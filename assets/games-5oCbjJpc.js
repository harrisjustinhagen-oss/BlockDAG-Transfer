import{R as e,r as t}from"./three-DxcQGzY8.js";var s,r,a={exports:{}},n={};var l=(r||(r=1,a.exports=function(){if(s)return n;s=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(t,s,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==s.key&&(a=""+s.key),"key"in s)for(var n in r={},s)"key"!==n&&(r[n]=s[n]);else r=s;return s=r.ref,{$$typeof:e,type:t,key:a,ref:void 0!==s?s:null,props:r}}return n.Fragment=t,n.jsx=r,n.jsxs=r,n}()),a.exports);const o=({className:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),i=["S","H","D","C"],c=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],d=(e,t)=>{const s=(e=>{const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t})(e),r=t.map((e,t)=>({id:t,name:e,isHuman:0===t,hand:[],tricksTaken:[]}));for(let a=0;a<s.length;a++)r[a%4].hand.push(s[a]);return r.forEach(e=>e.hand=x(e.hand)),r},h=e=>c.indexOf(e),u={C:0,D:1,S:2,H:3},x=e=>[...e].sort((e,t)=>e.suit!==t.suit?u[e.suit]-u[t.suit]:h(e.rank)-h(t.rank)),m=e=>`${e.rank}${e.suit}`;c.map(e=>({suit:"H",rank:e}));const f=({className:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2c-2.5 3.5-6 6-6 9.5 0 2.5 2.5 3.5 6 3.5s6-1 6-3.5c0-3.5-3.5-6-6-9.5z M12 22l-3-3h6l-3 3z"})}),g=({className:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2L2 12l10 10 10-10L12 2z"})}),b=({className:e})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"7.5",r:"3.5"}),l.jsx("circle",{cx:"17.5",cy:"12.5",r:"3.5"}),l.jsx("circle",{cx:"6.5",cy:"12.5",r:"3.5"}),l.jsx("path",{d:"M12 22l-3-3h6l-3 3z"})]}),p={H:l.jsx(o,{}),S:l.jsx(f,{}),D:l.jsx(g,{}),C:l.jsx(b,{})},w=["J","Q","K","A"],v=({card:t,isFaceUp:s=!1,isSelected:r=!1,isPlayable:a=!0,className:n="",style:o={},onClick:i})=>{const c="H"===t.suit||"D"===t.suit,d=c?"text-red-600":"text-black",h=w.includes(t.rank);return s?l.jsxs("div",{className:`relative w-16 h-24 rounded-lg bg-white shadow-md border border-gray-300 transition-all duration-200 ease-in-out ${d} ${r?"ring-4 ring-yellow-400 z-10":""} ${i&&a?"cursor-pointer hover:shadow-xl":"cursor-default"} ${a?"hover:brightness-105":"opacity-60 saturate-[.8]"} ${n}`,style:o,onClick:()=>{i&&a&&i(t)},"aria-label":`${t.rank} of ${t.suit}`,children:[l.jsxs("div",{className:"absolute top-0.5 left-1 text-center leading-none",children:[l.jsx("p",{className:"text-lg font-bold",children:t.rank}),l.jsx("div",{className:"w-3.5 h-3.5 mx-auto",children:e.cloneElement(p[t.suit],{className:"w-full h-full"})})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h?l.jsxs("div",{className:"relative w-10 h-14 flex items-center justify-center rounded-md overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-10 "+(c?"bg-red-500":"bg-black")}),l.jsx("div",{className:`absolute inset-0 border ${c?"border-red-200":"border-gray-300"} rounded-md`}),l.jsx("span",{className:"text-4xl font-bold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.1)"},children:t.rank})]}):l.jsx("div",{className:"w-8 h-8 opacity-80",children:e.cloneElement(p[t.suit],{className:"w-full h-full"})})}),l.jsxs("div",{className:"absolute bottom-0.5 right-1 text-center leading-none transform rotate-180",children:[l.jsx("p",{className:"text-lg font-bold",children:t.rank}),l.jsx("div",{className:"w-3.5 h-3.5 mx-auto",children:e.cloneElement(p[t.suit],{className:"w-full h-full"})})]})]}):l.jsx("div",{className:`relative w-16 h-24 rounded-lg bg-red-800 shadow-lg border border-black/20 p-1 ${n}`,style:o,children:l.jsx("div",{className:"w-full h-full rounded-md border border-red-400/40",style:{backgroundImage:"\n              radial-gradient(circle at 1px 1px, rgba(255,255,255,0.2) 1px, transparent 0)\n            ",backgroundSize:"4px 4px"}})})},j=["You","West","North","East"],y=({onExit:s})=>{const[r,a]=t.useState("passing"),[n,o]=t.useState([]),[u,f]=t.useState(1),[g,b]=t.useState(0),[p,w]=t.useState([]),[y,N]=t.useState(null),[k,S]=t.useState(!1),[C,A]=t.useState([]),[I,M]=t.useState(""),[T,W]=t.useState({You:0,West:0,North:0,East:0}),[E,$]=t.useState({You:0,West:0,North:0,East:0}),[q,G]=t.useState(!1),[P,L]=t.useState(null),[z,D]=t.useState(null),[H,Y]=t.useState(null),[R,B]=t.useState(!1),_=["left","right","across","hold"][(u-1)%4],F=t.useCallback(()=>{const e=(()=>{const e=[];for(const t of i)for(const s of c)e.push({suit:t,rank:s});return e})(),t=d(e,j);o(t),w([]),N(null),S(!1),A([]),$({You:0,West:0,North:0,East:0}),L(null);const s=t.findIndex(e=>e.hand.some(e=>"C"===e.suit&&"2"===e.rank));b(s),a("hold"===_?"playing":"passing")},[_]);t.useEffect(()=>{F()},[u,F]);const O=t.useCallback(e=>{if(n.every(e=>13===e.hand.length)&&0===p.length)return e.filter(e=>"C"===e.suit&&"2"===e.rank);if(0===p.length){const t=e.some(e=>"H"!==e.suit);return k||!t?e:e.filter(e=>"H"!==e.suit)}const t=e.filter(e=>e.suit===y);return t.length>0?t:e},[p.length,k,y,n]),J=t.useMemo(()=>"playing"===r&&n[0]?O(n[0].hand):[],[r,n,0,O]),K=(e,t)=>{e&&(o(s=>{const r=[...s];return r[t].hand=r[t].hand.filter(t=>m(t)!==m(e)),r}),0===p.length&&N(e.suit),"H"!==e.suit||k||(S(!0),M("Hearts are broken!")),w(s=>[...s,{...e,playerIndex:t}]))},U=e=>{if("passing"===r)return void(e=>{A(t=>t.some(t=>m(t)===m(e))?t.filter(t=>m(t)!==m(e)):t.length<3?[...t,e]:t)})(e);if("playing"!==r||0!==g)return;J.some(t=>m(t)===m(e))?K(e,0):M("You can't play that card.")},Q=t.useCallback(()=>{const e=n[g];if(!e||e.isHuman||"playing"!==r)return;const t=O(e.hand);if(0===t.length)return;let s;if(0===p.length){const e=t.reduce((e,t)=>(e[t.suit]=(e[t.suit]||0)+1,e),{});let r=["C","D","S"].filter(t=>e[t]>0);if(0===r.length&&k&&r.push("H"),r.length>0){const a=r.sort((t,s)=>e[s]-e[t])[0],n=t.filter(e=>e.suit===a);s=n.sort((e,t)=>h(e.rank)-h(t.rank))[0]}}else if(y){if(t.some(e=>e.suit===y)){const e=t.filter(e=>e.suit===y),r=p.filter(e=>e.suit===y).sort((e,t)=>h(t.rank)-h(e.rank))[0];if("S"===y){const t=e.find(e=>"Q"===e.rank),r=p.some(e=>"S"===e.suit&&("K"===e.rank||"A"===e.rank));t&&r&&(s=t)}if(!s){const t=e.filter(e=>h(e.rank)<h(r.rank));s=t.length>0?t.sort((e,t)=>h(t.rank)-h(e.rank))[0]:e.sort((e,t)=>h(t.rank)-h(e.rank))[0]}}else{const e=t.find(e=>"S"===e.suit&&"Q"===e.rank),r=t.filter(e=>"H"===e.suit).sort((e,t)=>h(t.rank)-h(e.rank)),a=t.filter(e=>"S"===e.suit&&("A"===e.rank||"K"===e.rank)).sort((e,t)=>h(t.rank)-h(e.rank));if(e)s=e;else if(r.length>0)s=r[0];else if(a.length>0)s=a[0];else{const e=t.reduce((e,t)=>(e[t.suit]=(e[t.suit]||0)+1,e),{}),r=Object.keys(e).sort((t,s)=>e[s]-e[t])[0],a=t.filter(e=>e.suit===r);s=a.sort((e,t)=>h(t.rank)-h(e.rank))[0]}}}s||(s=t.sort((e,t)=>h(e.rank)-h(t.rank))[0]),setTimeout(()=>K(s,g),1e3)},[n,g,r,O,p,y,k]),V=t.useMemo(()=>{var e;return 13===(null==(e=n[0])?void 0:e.hand.length)&&0===p.length},[n,p.length]);t.useEffect(()=>{if(z)return;const e=0===g,t=j[g];switch(r){case"passing":M("hold"!==_?`Select 3 cards to pass ${_}.`:"No passing this round.");break;case"playing":e?V?M("Your turn. You must play the 2 of Clubs."):0===p.length?M("It's your turn to lead."):M("It's your turn to play."):M(V?`${t} starts with the 2 of Clubs.`:`${t} is thinking...`);break;case"trick-end":if(P){const{name:e,points:t}=P;let s=`${e} takes the trick`;s+=t>0?` with ${t} point${t>1?"s":""}.`:".",M(s)}break;case"round-end":M("Round over! Calculating scores...")}},[r,g,P,z,_,0,V,p.length]),t.useEffect(()=>{"playing"===r&&n[g]&&!n[g].isHuman&&p.length<4&&Q()},[g,n,r,p,Q]),t.useEffect(()=>{if(4===p.length){a("trick-end");const e=p.filter(e=>e.suit===y).sort((e,t)=>h(t.rank)-h(e.rank))[0].playerIndex,t=p.reduce((e,t)=>{return e+("H"===(s=t).suit?1:"S"===s.suit&&"Q"===s.rank?13:0);var s},0);L({name:j[e],points:t,winnerIndex:e}),setTimeout(()=>{L(null),o(t=>{const s=[...t];return s[e].tricksTaken.push(...p),s}),t>0&&$(s=>({...s,[j[e]]:(s[j[e]]??0)+t})),w([]),N(null),b(e),0===n[0].hand.length?a("round-end"):a("playing")},1500)}else if(p.length>0&&p.length<4){const e=p[p.length-1].playerIndex;b((e+1)%4)}},[p,y,n]),t.useEffect(()=>{if("round-end"===r){const e={...E},t=Object.keys(e).find(t=>26===e[t]);t&&Object.keys(e).forEach(s=>{e[s]=s===t?0:26});const s={};for(const r of j)s[r]=(T[r]??0)+(e[r]??0);if(W(s),Object.values(s).some(e=>e>=100)){const e=Object.entries(s).sort((e,t)=>e[1]-t[1])[0][0];D(e),a("game-over"),G(!0)}else setTimeout(()=>{f(e=>e+1)},3e3)}},[r,E,T]);const X=n[0],Z=e=>{switch(e){case 0:return"bottom-4";case 1:return"left-4";case 2:return"top-4";case 3:return"right-4";default:return""}};return l.jsxs("div",{className:"relative w-full h-full bg-green-800/50 flex flex-col items-center justify-center font-sans overflow-hidden p-2",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-green-900 to-slate-900"}),n.map((e,t)=>{if(0===t||!e)return null;const s=g===t;let r="",a="";return 1===t&&(r="left-2 top-1/2 -translate-y-1/2 flex-col",a="rotate(90deg)"),2===t&&(r="top-2 left-1/2 -translate-x-1/2"),3===t&&(r="right-2 top-1/2 -translate-y-1/2 flex-col",a="-rotate(90deg)"),l.jsxs("div",{className:`absolute flex items-center gap-2 ${r}`,children:[l.jsxs("div",{className:"p-2 rounded-lg bg-black/30 text-white text-center "+(s?"ring-2 ring-yellow-300":""),children:[l.jsx("p",{className:"font-bold",children:e.name}),l.jsxs("p",{className:"text-xs",children:["Score: ",T[e.name]]}),l.jsxs("p",{className:"text-xs",children:["Cards: ",e.hand.length]})]}),l.jsx("div",{className:"flex",style:{transform:a},children:e.hand.map((e,t)=>l.jsx(v,{card:{suit:"S",rank:"2"},isFaceUp:!1,className:"-ml-10"},t))})]},e.id)}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-32 flex items-center justify-center",children:p.map((e,t)=>l.jsx("div",{className:`absolute ${Z(e.playerIndex)} ${P?`animate-collect-${Z(P.winnerIndex).split("-")[0]}`:""}`,children:l.jsx(v,{card:e,isFaceUp:!0})},t))}),X&&l.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-full flex flex-col items-center",children:[l.jsx("div",{className:"relative flex justify-center items-end h-32",onMouseEnter:()=>B(!0),onMouseLeave:()=>{B(!1),Y(null)},children:X.hand.map((e,t)=>{const s="passing"===r&&C.some(t=>m(t)===m(e)),a="playing"===r&&J.some(t=>m(t)===m(e)),n=X.hand.length,o=(t-(n-1)/2)*(n>10?4:6),i=R?H===t?-30:-10:0;return l.jsx("div",{className:"absolute bottom-0",style:{transform:`rotate(${o}deg) translateY(${i}px)`,transformOrigin:"bottom center",transition:"transform 0.2s ease-out",zIndex:H===t?20:t},onMouseEnter:()=>Y(t),children:l.jsx(v,{card:e,isFaceUp:!0,isSelected:s,isPlayable:a||"passing"===r,onClick:U})},m(e))})}),l.jsxs("div",{className:"p-2 mt-2 rounded-lg bg-black/50 text-white text-center min-w-[150px] "+(0===g?"ring-2 ring-yellow-300":""),children:[l.jsx("p",{className:"font-bold",children:X.name}),l.jsxs("p",{className:"text-sm",children:["Score: ",T[X.name]]})]})]}),l.jsxs("div",{className:"absolute top-4 w-full px-4 flex justify-between items-start",children:[l.jsx("div",{className:"bg-black/50 p-3 rounded-lg text-center text-white min-w-[250px] max-w-md",children:l.jsx("p",{className:"font-bold text-lg",children:I})}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600",children:"Scores"}),l.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700",children:"Exit"})]})]}),"passing"===r&&"hold"!==_&&l.jsx("div",{className:"absolute bottom-1/3",children:l.jsxs("button",{onClick:()=>{if(3!==C.length)return void M("Please select exactly 3 cards.");const e=[...C],t=[...n],s=n.map((e,t)=>0===t?[]:(e=>{const t=[...e].sort((e,t)=>h(t.rank)-h(e.rank));let s=t.filter(e=>"S"===e.suit&&["Q","K","A"].includes(e.rank));if(s.length<3){const r={C:0,D:0,S:0,H:0};e.forEach(e=>r[e.suit]++);const a=["C","D"].filter(e=>r[e]>0&&r[e]<=3-s.length).sort((e,t)=>r[e]-r[t]);if(a.length>0){const e=a[0],r=t.filter(t=>t.suit===e&&!s.some(e=>m(e)===m(t)));s.push(...r)}}if(s.length<3){const e=t.filter(e=>!s.some(t=>m(t)===m(e))).filter(e=>!("C"===e.suit&&h(e.rank)<8));s.push(...e.slice(0,3-s.length))}if(s.length<3){const e=t.filter(e=>!s.some(t=>m(t)===m(e)));s.push(...e.slice(0,3-s.length))}return s.slice(0,3)})(e.hand));t[0].hand=t[0].hand.filter(t=>!e.some(e=>m(e)===m(t))),s.forEach((e,s)=>{0!==s&&(t[s].hand=t[s].hand.filter(t=>!e.some(e=>m(e)===m(t))))});for(let a=0;a<4;a++){let r;switch(_){case"left":const t=(a+1)%4;r=0===t?e:s[t];break;case"right":const n=(a+3)%4;r=0===n?e:s[n];break;case"across":const l=(a+2)%4;r=0===l?e:s[l];break;default:r=[]}t[a].hand.push(...r),t[a].hand=x(t[a].hand)}o(t),a("playing");const r=t.findIndex(e=>e.hand.some(e=>"C"===e.suit&&"2"===e.rank));b(r)},disabled:3!==C.length,className:"px-8 py-4 bg-green-600 text-white font-bold text-xl rounded-lg shadow-lg hover:bg-green-700 disabled:bg-gray-500 disabled:cursor-not-allowed",children:["Pass ",C.length,"/3 Cards"]})}),q&&l.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-30 animate-fadeIn",onClick:()=>G(!1),children:l.jsxs("div",{className:"bg-[var(--bg-panel-solid)] p-6 rounded-lg shadow-2xl text-white w-full max-w-md",onClick:e=>e.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-rose-300",children:"Scoreboard"}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-lg",children:[l.jsx("div",{className:"font-bold border-b-2 border-rose-400 pb-1",children:"Player"}),l.jsx("div",{className:"font-bold border-b-2 border-rose-400 pb-1 text-right",children:"Score"}),j.map(t=>l.jsxs(e.Fragment,{children:[l.jsx("div",{children:t}),l.jsx("div",{className:"font-mono text-right",children:T[t]})]},t))]}),l.jsxs("p",{className:"text-sm text-slate-400 mt-4",children:["First to ",100," points loses!"]}),l.jsx("button",{onClick:()=>G(!1),className:"mt-6 w-full py-2 bg-slate-600 text-white font-semibold rounded-lg hover:bg-slate-700",children:"Close"})]})}),z&&l.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-40 animate-fadeIn",children:l.jsxs("div",{className:"bg-[var(--bg-panel-solid)] p-8 rounded-lg shadow-2xl text-white text-center w-full max-w-md",children:[l.jsx("h2",{className:"text-4xl font-bold mb-4 text-yellow-400",children:"Game Over!"}),l.jsxs("p",{className:"text-2xl mb-6",children:[l.jsx("span",{className:"font-bold text-green-400",children:z})," wins the game!"]}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx("button",{onClick:()=>{W({You:0,West:0,North:0,East:0}),f(1),D(null),G(!1)},className:"px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600",children:"Play Again"}),l.jsx("button",{onClick:s,className:"px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700",children:"Exit to Menu"})]})]})})]})},N=[{question:"What is the chemical symbol for water?",options:["O2","H2O","CO2","NaCl"],correctAnswerIndex:1,category:"Science"},{question:"Which planet is known as the Red Planet?",options:["Earth","Mars","Jupiter","Saturn"],correctAnswerIndex:1,category:"Science"},{question:"What is the powerhouse of the cell?",options:["Nucleus","Ribosome","Mitochondrion","Chloroplast"],correctAnswerIndex:2,category:"Science"},{question:"What force keeps us on the ground?",options:["Magnetism","Gravity","Friction","Tension"],correctAnswerIndex:1,category:"Science"},{question:"What is the speed of light?",options:["300,000 km/s","150,000 km/s","500,000 km/s","1,000,000 km/s"],correctAnswerIndex:0,category:"Science"},{question:"Who was the first President of the United States?",options:["Abraham Lincoln","Thomas Jefferson","George Washington","John Adams"],correctAnswerIndex:2,category:"History"},{question:"In which year did the Titanic sink?",options:["1905","1912","1918","1923"],correctAnswerIndex:1,category:"History"},{question:"What ancient civilization built the pyramids?",options:["Greeks","Romans","Egyptians","Persians"],correctAnswerIndex:2,category:"History"},{question:"Which war was fought between the North and South regions of the United States?",options:["Revolutionary War","World War I","Civil War","Cold War"],correctAnswerIndex:2,category:"History"},{question:"Who discovered America in 1492?",options:["Ferdinand Magellan","Christopher Columbus","Marco Polo","Vasco da Gama"],correctAnswerIndex:1,category:"History"},{question:"Who painted the Mona Lisa?",options:["Vincent van Gogh","Pablo Picasso","Leonardo da Vinci","Claude Monet"],correctAnswerIndex:2,category:"Art"},{question:"What is the famous sculpture by Michelangelo?",options:["The Thinker","David","Venus de Milo","Pieta"],correctAnswerIndex:1,category:"Art"},{question:"Which artist is known for his 'drip' technique?",options:["Andy Warhol","Jackson Pollock","Salvador DalÃ­","Frida Kahlo"],correctAnswerIndex:1,category:"Art"},{question:"What art movement is Salvador DalÃ­ associated with?",options:["Cubism","Impressionism","Surrealism","Pop Art"],correctAnswerIndex:2,category:"Art"},{question:"Who painted 'Starry Night'?",options:["Vincent van Gogh","Edvard Munch","Paul CÃ©zanne","Rembrandt"],correctAnswerIndex:0,category:"Art"},{question:"Who wrote 'Romeo and Juliet'?",options:["Charles Dickens","William Shakespeare","Jane Austen","Mark Twain"],correctAnswerIndex:1,category:"Literature"},{question:"What is the first book of the Harry Potter series?",options:["The Chamber of Secrets","The Prisoner of Azkaban","The Sorcerer's Stone","The Goblet of Fire"],correctAnswerIndex:2,category:"Literature"},{question:"Which of these is a famous work by J.R.R. Tolkien?",options:["The Chronicles of Narnia","A Song of Ice and Fire","The Lord of the Rings","The Wheel of Time"],correctAnswerIndex:2,category:"Literature"},{question:"Who is the author of 'To Kill a Mockingbird'?",options:["Harper Lee","F. Scott Fitzgerald","Ernest Hemingway","John Steinbeck"],correctAnswerIndex:0,category:"Literature"},{question:"In 'The Great Gatsby', who is the mysterious millionaire?",options:["Nick Carraway","Tom Buchanan","Jay Gatsby","George Wilson"],correctAnswerIndex:2,category:"Literature"},{question:"What is the capital of France?",options:["London","Berlin","Paris","Madrid"],correctAnswerIndex:2,category:"Geography"},{question:"Which is the longest river in the world?",options:["Amazon","Nile","Yangtze","Mississippi"],correctAnswerIndex:1,category:"Geography"},{question:"What is the largest desert in the world?",options:["Sahara","Gobi","Arabian","Antarctic Polar Desert"],correctAnswerIndex:3,category:"Geography"},{question:"Which country is known as the Land of the Rising Sun?",options:["China","Japan","South Korea","Thailand"],correctAnswerIndex:1,category:"Geography"},{question:"Mount Everest is located in which mountain range?",options:["The Andes","The Rockies","The Alps","The Himalayas"],correctAnswerIndex:3,category:"Geography"},{question:"Who is known as the 'King of Pop'?",options:["Elvis Presley","Michael Jackson","James Brown","Stevie Wonder"],correctAnswerIndex:1,category:"Pop Culture"},{question:"Which band sang 'Bohemian Rhapsody'?",options:["The Beatles","Led Zeppelin","Queen","The Rolling Stones"],correctAnswerIndex:2,category:"Pop Culture"},{question:"What is the highest-grossing film of all time (unadjusted for inflation)?",options:["Titanic","Avatar","Avengers: Endgame","Star Wars: The Force Awakens"],correctAnswerIndex:1,category:"Pop Culture"},{question:"In the TV show 'Friends', what is the name of the coffee shop they frequent?",options:["The Perk","Central Perk","The Coffee House","Daily Grind"],correctAnswerIndex:1,category:"Pop Culture"},{question:"What video game series features characters like Mario, Luigi, and Bowser?",options:["The Legend of Zelda","Sonic the Hedgehog","Super Mario","Donkey Kong"],correctAnswerIndex:2,category:"Super Mario"}],k=e=>[...e].sort(()=>Math.random()-.5),S=({party:e,onExit:s})=>{const[r,a]=t.useState("lobby"),[n,o]=t.useState([]),[i,c]=t.useState(0),[d,h]=t.useState(0),[u,x]=t.useState([]),[m,f]=t.useState([]),[g,b]=t.useState(20),p=t.useRef(void 0),w=t.useRef(void 0),v=m[d],j=t.useCallback(()=>{i+1>3?a("game-over"):(c(e=>e+1),h(0),a("category-intro"))},[i]),y=t.useCallback(()=>{h(e=>e+1),a("question")},[]),S=t.useCallback(()=>{w.current&&window.clearTimeout(w.current),p.current&&window.clearInterval(p.current),a("answer-reveal"),o(e=>e.map(e=>e.hasAnswered&&e.lastAnswerIndex===v.correctAnswerIndex?{...e,score:e.score+10+g}:e)),w.current=window.setTimeout(()=>{d+1>=5?j():y()},3e3)},[g,v,d,j,y]);t.useEffect(()=>("question"===r&&(g>0?p.current=window.setInterval(()=>{b(e=>e-1)},1e3):S()),()=>{p.current&&window.clearInterval(p.current)}),[r,g,S]),t.useEffect(()=>{if("category-intro"===r){const e=u[i-1],t=k(N.filter(t=>t.category===e)).slice(0,5);f(t),w.current=window.setTimeout(()=>a("question"),3e3)}else"question"===r&&(b(20),o(e=>e.map(e=>({...e,hasAnswered:!1,lastAnswerIndex:null}))));return()=>{w.current&&window.clearTimeout(w.current)}},[r,i,u]);const C=t.useCallback((e,t)=>{o(s=>{let r=!0;const a=s.map(s=>{const a=s.name===e;return a||s.hasAnswered||(r=!1),a?{...s,hasAnswered:!0,lastAnswerIndex:t}:s});return r&&window.setTimeout(()=>S(),500),a})},[S]);t.useEffect(()=>{const e=[];return"question"===r&&n.forEach(t=>{if(t.isBot&&!t.hasAnswered){const s=8e3*Math.random()+1e3,r=window.setTimeout(()=>{const e=Math.floor(4*Math.random());C(t.name,e)},s);e.push(r)}}),()=>{e.forEach(e=>window.clearTimeout(e))}},[r,n,C]);const A=()=>{const t=e.map(t=>({name:t,score:0,isBot:!e.includes("You")||"You"!==t,hasAnswered:!1,lastAnswerIndex:null}));o(t);const s=[...new Set(N.map(e=>e.category))];x(k(s).slice(0,3)),c(1),h(0),a("category-intro")},I=n.find(e=>!e.isBot),M=[...n].sort((e,t)=>t.score-e.score),T=()=>l.jsxs("div",{className:"w-full md:w-64 bg-[var(--bg-main-translucent)] p-4 rounded-lg border border-[var(--border-color)]",children:[l.jsx("h3",{className:"text-lg font-bold text-teal-300 mb-3 text-center",children:"Scores"}),l.jsx("ul",{className:"space-y-2",children:M.map(e=>l.jsxs("li",{className:"flex justify-between items-center bg-[var(--bg-panel)] p-2 rounded-md",children:[l.jsx("span",{className:"font-semibold text-white truncate pr-2",children:e.name}),l.jsxs("div",{className:"flex items-center gap-2",children:["question"===r&&l.jsx("div",{className:"w-4 h-4 rounded-full border-2 "+(e.hasAnswered?"bg-green-500 border-green-400":"bg-transparent border-slate-500"),title:e.hasAnswered?"Answered":"Thinking..."}),l.jsx("span",{className:"font-mono text-teal-400",children:e.score})]})]},e.name))})]});return l.jsx("div",{className:"w-full h-full bg-[var(--bg-panel-solid)] flex flex-col items-center justify-center p-4 sm:p-6",children:(()=>{switch(r){case"lobby":return l.jsxs("div",{className:"text-center animate-fadeIn",children:[l.jsx("h2",{className:"text-4xl font-bold text-teal-300 mb-4",children:"Trivia Challenge"}),l.jsx("p",{className:"text-lg text-slate-300 mb-8",children:"Get ready to test your knowledge!"}),l.jsxs("div",{className:"bg-[var(--bg-panel)] p-6 rounded-lg max-w-sm mx-auto mb-8",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Players"}),l.jsx("ul",{className:"space-y-2",children:e.map(e=>l.jsx("li",{className:"font-semibold text-lg text-slate-300",children:e},e))})]}),l.jsx("button",{onClick:A,className:"px-8 py-4 bg-teal-500 text-white font-bold text-xl rounded-lg shadow-lg hover:bg-teal-600 transition-colors",children:"Start Game"})]});case"category-intro":return l.jsxs("div",{className:"text-center animate-fadeIn",children:[l.jsxs("p",{className:"text-2xl text-slate-400",children:["Round ",i," of ",3]}),l.jsx("h2",{className:"text-5xl font-bold text-teal-300 my-4",children:u[i-1]}),l.jsx("p",{className:"text-xl text-slate-300",children:"Get ready for the first question..."})]});case"question":return l.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6 animate-fadeIn",children:[l.jsx(T,{}),l.jsxs("div",{className:"flex-grow bg-[var(--bg-panel-solid)] p-6 rounded-lg border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-400",children:["Question ",d+1," / ",5]}),l.jsx("span",{className:"text-sm font-bold text-teal-300",children:v.category})]}),l.jsx("div",{className:"relative h-2.5 w-full bg-[var(--bg-main-translucent)] rounded-full mb-4 overflow-hidden",children:l.jsx("div",{className:"absolute top-0 left-0 h-full bg-yellow-400 rounded-full transition-all duration-1000 linear",style:{width:g/20*100+"%"}})}),l.jsx("p",{className:"text-xl md:text-2xl font-semibold text-white mb-6 min-h-[6rem] flex items-center",children:v.question}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.options.map((e,t)=>l.jsx("button",{onClick:()=>I&&!I.hasAnswered&&C(I.name,t),disabled:I&&I.hasAnswered,className:"p-4 text-left font-semibold text-white bg-[var(--bg-interactive)] rounded-lg hover:bg-[var(--bg-interactive-hover)] transition-colors disabled:cursor-not-allowed disabled:opacity-70 disabled:hover:bg-[var(--bg-interactive)]",children:e},t))})]})]});case"answer-reveal":return l.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6 animate-fadeIn",children:[l.jsx(T,{}),l.jsxs("div",{className:"flex-grow bg-[var(--bg-panel-solid)] p-6 rounded-lg border border-[var(--border-color)]",children:[l.jsx("p",{className:"text-xl md:text-2xl font-semibold text-white mb-6 min-h-[6rem] flex items-center",children:v.question}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.options.map((e,t)=>{let s="bg-[var(--bg-interactive)]";return t===v.correctAnswerIndex&&(s="bg-green-500 ring-2 ring-white"),l.jsxs("div",{className:`relative p-4 text-left font-semibold text-white rounded-lg transition-colors ${s}`,children:[e,l.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2",children:n.map(e=>{if(e.lastAnswerIndex===t){const t=e.lastAnswerIndex===v.correctAnswerIndex;return l.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold "+(t?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),title:e.name,children:e.name.charAt(0)},e.name)}return null})})]},t)})})]})]});case"game-over":return(()=>{const e=M[0];return l.jsxs("div",{className:"text-center animate-fadeIn",children:[l.jsx("h2",{className:"text-5xl font-bold text-yellow-300 mb-4",children:"Game Over!"}),l.jsxs("p",{className:"text-2xl text-white mb-8",children:[l.jsx("span",{className:"font-bold text-green-400",children:e.name})," is the winner!"]}),l.jsxs("div",{className:"bg-[var(--bg-panel)] p-6 rounded-lg max-w-md mx-auto mb-8",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Final Scores"}),l.jsx("ul",{className:"space-y-2 text-left",children:M.map((e,t)=>l.jsxs("li",{className:"flex justify-between items-center text-lg p-2 rounded "+(0===t?"bg-yellow-500/20":""),children:[l.jsxs("span",{className:"font-semibold",children:[t+1,". ",e.name]}),l.jsx("span",{className:"font-mono",children:e.score})]},e.name))})]}),l.jsx("button",{onClick:s,className:"px-8 py-4 bg-teal-500 text-white font-bold text-xl rounded-lg shadow-lg hover:bg-teal-600 transition-colors",children:"Back to Games"})]})})();default:return l.jsx("div",{children:"Loading..."})}})()})},C=["Tree","Car","Sun","House","Apple","Computer","Phone","Pizza","Dog","Cat","Robot","Rocket"],A=["#000000","#ffffff","#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#a855f7","#ec4899","#78716c"],I=["Is it a plane?","Maybe a cloud?","I have no idea","Looks like a blob","Is it food?","A circle?","A square?"],M=({onExit:e})=>{const s=t.useRef(null),[r,a]=t.useState(!1),[n,o]=t.useState(null),[i,c]=t.useState("#000000"),[d,h]=t.useState(5),[u,x]=t.useState("choosing"),[m,f]=t.useState([]),[g,b]=t.useState(""),[p,w]=t.useState(0),[v,j]=t.useState(1),[y]=t.useState(3),[N,k]=t.useState([{name:"You",score:0,isDrawer:!0,hasGuessed:!1,avatarColor:"bg-cyan-500"},{name:"Alice",score:0,isDrawer:!1,hasGuessed:!1,avatarColor:"bg-purple-500"},{name:"Bob",score:0,isDrawer:!1,hasGuessed:!1,avatarColor:"bg-green-500"},{name:"Charlie",score:0,isDrawer:!1,hasGuessed:!1,avatarColor:"bg-yellow-500"}]),[S,M]=t.useState([]);t.useEffect(()=>{if(s.current){const e=s.current;e.width=e.offsetWidth,e.height=e.offsetHeight;const t=e.getContext("2d");t&&(t.lineCap="round",t.lineJoin="round",t.strokeStyle=i,t.lineWidth=d,o(t),t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height))}},[u]),t.useEffect(()=>{n&&(n.strokeStyle=i,n.lineWidth=d)},[i,d,n]),t.useEffect(()=>{let e;if("drawing"===u&&p>0){if(e=setTimeout(()=>w(e=>e-1),1e3),Math.random()>.7){const e=N.filter(e=>"You"!==e.name&&!e.hasGuessed)[Math.floor(3*Math.random())];if(e){const t=(60-p)/100;Math.random()<t?G(e.name,g):G(e.name,I[Math.floor(Math.random()*I.length)])}}}else"drawing"===u&&0===p&&P();return()=>clearTimeout(e)},[u,p,N,g]),t.useEffect(()=>{if("choosing"===u){const e=[...C].sort(()=>.5-Math.random());f(e.slice(0,3))}},[u]);const T=e=>{if("drawing"!==u)return;const{offsetX:t,offsetY:s}=$(e);null==n||n.beginPath(),null==n||n.moveTo(t,s),a(!0)},W=e=>{if(!r||"drawing"!==u)return;const{offsetX:t,offsetY:s}=$(e);null==n||n.lineTo(t,s),null==n||n.stroke()},E=()=>{null==n||n.closePath(),a(!1)},$=e=>{if(!s.current)return{offsetX:0,offsetY:0};const t=s.current.getBoundingClientRect();let r,a;return"touches"in e?(r=e.touches[0].clientX,a=e.touches[0].clientY):(r=e.clientX,a=e.clientY),{offsetX:r-t.left,offsetY:a-t.top}},q=()=>{n&&s.current&&(n.fillStyle="#ffffff",n.fillRect(0,0,s.current.width,s.current.height))},G=(e,t)=>{if(t.toLowerCase()===g.toLowerCase()){M(t=>[...t,{id:Date.now().toString(),player:"System",text:`${e} guessed the word!`,isCorrect:!0}]),k(t=>t.map(t=>{if(t.name===e){const e=10*p;return{...t,score:t.score+e,hasGuessed:!0}}return"You"===t.name&&t.isDrawer?{...t,score:t.score+50}:t}));const t=N,s=t.filter(e=>!e.isDrawer).length;t.filter(e=>!e.isDrawer&&e.hasGuessed).length+("You"!==e?1:0)>=s&&P()}else M(s=>[...s,{id:Date.now().toString(),player:e,text:t,isCorrect:!1}])},P=()=>{x("round_end"),setTimeout(()=>{v<y?(j(e=>e+1),x("choosing"),k(e=>e.map(e=>({...e,hasGuessed:!1})))):x("game_over")},3e3)};return l.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-6xl h-[90vh] bg-slate-800 rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-slate-700",children:[l.jsxs("div",{className:"bg-slate-900 p-4 flex justify-between items-center border-b border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-yellow-400",children:"Sketch It!"}),l.jsx("div",{className:"bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:l.jsxs("span",{className:"text-slate-400 text-sm",children:["Round ",v,"/",y]})}),"drawing"===u&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-mono font-bold text-white",children:p}),l.jsxs("div",{className:"text-xl font-bold text-white",children:["Word: ",l.jsx("span",{className:"text-cyan-400",children:g})]})]})]}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded-lg transition-colors",children:"Exit Game"})]}),l.jsxs("div",{className:"flex-grow flex overflow-hidden",children:[l.jsx("div",{className:"w-64 bg-slate-900/50 border-r border-slate-700 p-4 flex flex-col gap-2",children:N.sort((e,t)=>t.score-e.score).map(e=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl "+(e.hasGuessed?"bg-green-500/20 border border-green-500/50":"bg-slate-800"),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full ${e.avatarColor} flex items-center justify-center text-white font-bold`,children:e.name[0]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold "+("You"===e.name?"text-cyan-300":"text-slate-200"),children:e.name}),l.jsx("p",{className:"text-xs text-slate-400",children:e.isDrawer?"Drawer":"Guesser"})]})]}),l.jsx("span",{className:"font-mono font-bold text-white",children:e.score})]},e.name))}),l.jsxs("div",{className:"flex-grow bg-slate-700 p-4 relative flex flex-col items-center justify-center",children:["choosing"===u&&l.jsx("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:l.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-600 text-center",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Choose a word to draw!"}),l.jsx("div",{className:"flex gap-4",children:m.map(e=>l.jsx("button",{onClick:()=>(e=>{b(e),x("drawing"),w(60),M([{id:Date.now().toString(),player:"System",text:`You are drawing: ${e}!`,isCorrect:!1}]),q()})(e),className:"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all transform hover:scale-105",children:e},e))})]})}),"round_end"===u&&l.jsx("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:l.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-slate-600 text-center animate-fadeIn",children:[l.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Round Over!"}),l.jsxs("p",{className:"text-slate-400",children:["The word was ",l.jsx("span",{className:"text-green-400 font-bold",children:g})]})]})}),"game_over"===u&&l.jsx("div",{className:"absolute inset-0 z-10 bg-black/80 backdrop-blur-sm flex items-center justify-center",children:l.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-yellow-500/50 text-center animate-fadeIn shadow-2xl",children:[l.jsx("h3",{className:"text-4xl font-bold text-yellow-400 mb-6",children:"Game Over!"}),l.jsx("div",{className:"space-y-3 mb-8",children:N.sort((e,t)=>t.score-e.score).map((e,t)=>l.jsxs("div",{className:"flex justify-between items-center w-64 p-3 rounded-lg "+(0===t?"bg-yellow-500/20 border border-yellow-500/50":"bg-slate-700"),children:[l.jsxs("span",{className:"text-white font-bold flex items-center gap-2",children:[0===t&&"ðŸ‘‘"," ",e.name]}),l.jsx("span",{className:"font-mono text-white",children:e.score})]},e.name))}),l.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-colors",children:"Back to Menu"})]})}),l.jsx("canvas",{ref:s,className:"bg-white rounded-lg shadow-lg cursor-crosshair touch-none",style:{width:"100%",height:"100%",maxWidth:"800px",maxHeight:"600px"},onMouseDown:T,onMouseMove:W,onMouseUp:E,onMouseLeave:E,onTouchStart:T,onTouchMove:W,onTouchEnd:E})]}),l.jsxs("div",{className:"w-72 bg-slate-900 border-l border-slate-700 flex flex-col",children:[l.jsx("div",{className:"p-3 border-b border-slate-800 font-bold text-slate-400 uppercase text-xs tracking-wider",children:"Chat & Guesses"}),l.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-3",children:S.map(e=>l.jsxs("div",{className:"text-sm "+(e.isCorrect?"bg-green-500/20 border border-green-500/30 p-2 rounded-lg":""),children:[l.jsxs("span",{className:"font-bold "+("System"===e.player?"text-yellow-400":"text-slate-300"),children:[e.player,": "]}),l.jsx("span",{className:""+(e.isCorrect?"text-green-300 font-bold":"text-slate-400"),children:e.text})]},e.id))}),l.jsx("div",{className:"p-3 bg-slate-800 border-t border-slate-700",children:l.jsx("input",{type:"text",disabled:N[0].isDrawer,placeholder:N[0].isDrawer?"You are drawing...":"Type your guess here...",className:"w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-cyan-500 disabled:opacity-50"})})]})]}),"drawing"===u&&N[0].isDrawer&&l.jsxs("div",{className:"bg-slate-900 p-4 border-t border-slate-700 flex justify-center items-center gap-6",children:[l.jsx("div",{className:"flex items-center gap-2 bg-slate-800 p-2 rounded-xl",children:A.map(e=>l.jsx("button",{onClick:()=>c(e),className:"w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 "+(i===e?"border-white scale-110":"border-transparent"),style:{backgroundColor:e}},e))}),l.jsx("div",{className:"h-8 w-px bg-slate-700 mx-2"}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 p-2 rounded-xl",children:[l.jsx("input",{type:"range",min:"1",max:"20",value:d,onChange:e=>h(parseInt(e.target.value)),className:"w-24 accent-cyan-500"}),l.jsx("div",{className:"bg-white rounded-full",style:{width:d,height:d,backgroundColor:i}})]}),l.jsx("div",{className:"h-8 w-px bg-slate-700 mx-2"}),l.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear"]})]})]})})},T=["red","blue","green","yellow"],W=["0","1","2","3","4","5","6","7","8","9","skip","reverse","draw2"],E=({card:e,onClick:t,isPlayable:s,size:r="normal",hidden:a=!1})=>{if(a)return l.jsx("div",{className:`\n                    rounded-lg border-2 border-white shadow-md bg-slate-800\n                    flex items-center justify-center\n                    ${"small"===r?"w-8 h-12":"large"===r?"w-24 h-36":"w-16 h-24"}\n                `,children:l.jsx("div",{className:"w-full h-full bg-slate-900 rounded-md m-1 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500 rotate-45 transform"})})});const n=e=>{switch(e){case"skip":return"âŠ˜";case"reverse":return"â‡„";case"draw2":return"+2";case"wild":return"W";case"draw4":return"+4";default:return e}};return l.jsxs("div",{onClick:s?t:void 0,className:`\n                relative rounded-lg border-2 border-white shadow-md select-none transition-transform\n                ${(e=>{switch(e){case"red":return"bg-red-500";case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"yellow":return"bg-yellow-400";case"wild":return"bg-slate-900 bg-[conic-gradient(at_center,_var(--tw-gradient-stops))] from-red-500 via-blue-500 via-green-500 to-yellow-400";default:return"bg-slate-500"}})(e.color)}\n                ${"small"===r?"w-8 h-12 text-xs":"large"===r?"w-32 h-48 text-4xl":"w-20 h-32 text-2xl"}\n                ${s?"cursor-pointer hover:-translate-y-4 hover:shadow-xl ring-2 ring-yellow-300 z-10":""}\n            `,children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-[80%] h-[60%] bg-white rounded-[50%] flex items-center justify-center transform -rotate-12 shadow-inner border border-black/10",children:l.jsx("span",{className:`font-bold font-mono drop-shadow-sm ${"yellow"===e.color?"text-yellow-600":`text-${e.color}-600`} ${"wild"===e.color?"text-black":""}`,children:n(e.value)})})}),l.jsx("div",{className:"absolute top-1 left-1 text-white font-bold text-[0.6em] leading-none drop-shadow-md",children:n(e.value)}),l.jsx("div",{className:"absolute bottom-1 right-1 text-white font-bold text-[0.6em] leading-none drop-shadow-md rotate-180",children:n(e.value)})]})},$=({onExit:e})=>{var s;const[r,a]=t.useState([]),[n,o]=t.useState([]),[i,c]=t.useState([]),[d,h]=t.useState(0),[u,x]=t.useState(1),[m,f]=t.useState("red"),[g,b]=t.useState("playing"),[p,w]=t.useState(null),[v,j]=t.useState("Game Started!"),[y,N]=t.useState(0);t.useEffect(()=>{k()},[]);const k=()=>{const e=[];let t=0;T.forEach(s=>{W.forEach(r=>{e.push({id:"c-"+t++,color:s,value:r}),"0"!==r&&e.push({id:"c-"+t++,color:s,value:r})})});for(let a=0;a<4;a++)e.push({id:"w-"+t++,color:"wild",value:"wild"}),e.push({id:"w4-"+t++,color:"wild",value:"draw4"});const s=e.sort(()=>Math.random()-.5),r=[{id:0,name:"You",hand:[],isBot:!1},{id:1,name:"West",hand:[],isBot:!0},{id:2,name:"North",hand:[],isBot:!0},{id:3,name:"East",hand:[],isBot:!0}];for(let a=0;a<7;a++)r.forEach(e=>e.hand.push(s.pop()));let n=s.pop();for(;"wild"===n.color;)s.unshift(n),n=s.pop();a(s),o([n]),c(r),f(n.color),h(0),b("playing"),w(null),x(1)},S=(e=1)=>{let t=(d+e*u)%i.length;return t<0&&(t+=i.length),t},C=(e,t=1)=>{const s=[];let l=[...r],i=[...n];for(let r=0;r<t;r++){if(0===l.length){if(i.length<=1)break;const e=i.pop();l=i.sort(()=>Math.random()-.5),i=[e]}s.push(l.pop())}return a(l),o(i),c(t=>t.map(t=>t.id===e?{...t,hand:[...t.hand,...s]}:t)),s},A=e=>{const t=i[d];if(c(s=>s.map(s=>s.id===t.id?{...s,hand:s.hand.filter(t=>t.id!==e.id)}:s)),o(t=>[...t,e]),1===t.hand.length)return w(t.name),void b("game_over");let s=1;if("reverse"===e.value)x(e=>-1*e),2===i.length&&(s=2);else if("skip"===e.value)s=2;else if("draw2"===e.value){const e=S(1);C(e,2),s=2,j(`${i[e].name} draws 2!`)}else if("draw4"===e.value){const e=S(1);C(e,4),s=2,j(`${i[e].name} draws 4!`)}if("wild"===e.color)if(t.isBot){const e=["red","blue","green","yellow"],r=e[Math.floor(Math.random()*e.length)];f(r),j(`${t.name} chose ${r.toUpperCase()}`),I(s)}else b("choosing_color");else f(e.color),I(s)},I=(e=1)=>{h(t=>{let s=(t+e*u)%i.length;return s<0&&(s+=i.length),s})},M=e=>{if("wild"===e.color)return!0;const t=n[n.length-1];return e.color===m||e.value===t.value};t.useEffect(()=>{if("playing"!==g||0===d||p)return;const e=setTimeout(()=>{const e=i[d],t=e.hand.filter(e=>M(e));if(t.length>0){const e=t.find(e=>"wild"!==e.color)||t[0];A(e)}else C(e.id,1),j(`${e.name} drew a card.`),I()},1e3+1e3*Math.random());return()=>clearTimeout(e)},[d,g,i,m,n]);const $=e=>{switch(e){case 1:return"left-4 top-1/2 -translate-y-1/2 flex-col items-start";case 2:return"top-4 left-1/2 -translate-x-1/2 flex-row items-start";case 3:return"right-4 top-1/2 -translate-y-1/2 flex-col items-end";default:return"bottom-4 left-1/2 -translate-x-1/2"}};return l.jsxs("div",{className:"fixed inset-0 z-50 bg-green-800 flex flex-col items-center justify-center overflow-hidden font-sans",children:[l.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white to-transparent pointer-events-none"}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-start pointer-events-none",children:[l.jsxs("div",{className:"bg-black/40 p-2 rounded-lg text-white pointer-events-auto",children:[l.jsx("h1",{className:"text-xl font-bold text-yellow-400",children:"Uno Online"}),l.jsx("p",{className:"text-sm",children:v})]}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded pointer-events-auto shadow-lg",children:"Exit"})]}),l.jsxs("div",{className:"relative flex items-center gap-8 z-0",children:[l.jsxs("div",{onClick:0===d?()=>{0===d&&"playing"===g&&(C(0,1),I())}:void 0,className:"relative w-24 h-36 bg-slate-800 rounded-lg border-4 border-white shadow-xl flex items-center justify-center cursor-pointer hover:scale-105 transition-transform "+(0===d?"ring-4 ring-yellow-400 animate-pulse":""),children:[l.jsx("div",{className:"w-20 h-32 bg-slate-900 rounded border border-slate-700 flex items-center justify-center",children:l.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full rotate-45"})}),l.jsx("span",{className:"absolute -bottom-8 text-white font-bold text-shadow",children:"Draw"})]}),l.jsx("div",{className:"relative w-24 h-36",children:n.slice(-3).map((e,t)=>l.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${5*t-10}deg)`},children:l.jsx(E,{card:e,size:"large"})},e.id))}),l.jsx("div",{className:"absolute -inset-16 border-4 border-dashed border-white/20 rounded-full pointer-events-none animate-spin-slow "+(-1===u?"animate-reverse-spin":""),style:{animationDuration:"10s"}}),l.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 px-4 py-1 rounded-full text-white font-bold text-sm shadow-lg border border-white/50 uppercase tracking-widest bg-"+("yellow"===m?"yellow-400":"blue"===m?"blue-500":"green"===m?"green-500":"red-500"),children:["Color: ",m]})]}),i.map(e=>{if(0===e.id)return null;const t=d===e.id;return l.jsxs("div",{className:`absolute ${$(e.id)} flex gap-2 p-3 rounded-xl transition-all ${t?"bg-yellow-400/30 shadow-[0_0_20px_rgba(250,204,21,0.4)] scale-105":"bg-black/30"}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold border-2 border-white shadow-md "+(t?"bg-yellow-500":"bg-slate-700"),children:e.name[0]}),l.jsxs("div",{className:"flex flex-col justify-center",children:[l.jsx("span",{className:"text-white font-bold text-shadow",children:e.name}),l.jsx("div",{className:"flex -space-x-8 mt-1",children:e.hand.map((e,t)=>l.jsx("div",{style:{transform:`translateX(${2*t}px)`},children:l.jsx(E,{card:{id:"hidden",color:"red",value:"0"},size:"small",hidden:!0})},t))})]})]},e.id)}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-48 flex items-end justify-center pb-4 z-20 bg-gradient-to-t from-black/80 to-transparent",children:l.jsxs("div",{className:"relative flex items-end justify-center h-full min-w-[300px]",children:[l.jsxs("div",{className:"absolute -top-12 left-0 flex items-center gap-3 bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-white/20 transition-all "+(0===d?"ring-2 ring-yellow-400 bg-yellow-900/60":""),children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-600 border-2 border-white flex items-center justify-center text-white font-bold",children:"Y"}),l.jsx("div",{className:"text-white font-bold",children:"You"})]}),null==(s=i[0])?void 0:s.hand.map((e,t)=>{const s=M(e)&&0===d,r=i[0].hand.length,a=5*(t-(r-1)/2),n=5*Math.abs(t-(r-1)/2);return l.jsx("div",{className:"transition-all duration-300 -ml-8 first:ml-0 hover:z-30 hover:-translate-y-8 origin-bottom",style:{transform:`rotate(${a}deg) translateY(${n}px)`,zIndex:t},children:l.jsx(E,{card:e,isPlayable:s,onClick:()=>(e=>{0===d&&"playing"===g&&(M(e)?A(e):j("Cannot play that card!"))})(e)})},e.id)})]})}),"choosing_color"===g&&l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center animate-fadeIn",children:l.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-2xl border border-slate-600 text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Choose a Color"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.map(e=>l.jsx("button",{onClick:()=>(e=>{f(e),b("playing"),I("draw4"===n[n.length-1].value?2:1)})(e),className:"w-24 h-24 rounded-xl shadow-lg transform hover:scale-105 transition-transform bg-"+("yellow"===e?"yellow-400":"blue"===e?"blue-500":"green"===e?"green-500":"red-500")},e))})]})}),"game_over"===g&&l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center animate-fadeIn",children:l.jsxs("div",{className:"bg-slate-900 p-10 rounded-3xl shadow-2xl border-2 border-yellow-500 text-center max-w-md w-full",children:[l.jsx("h2",{className:"text-5xl font-bold text-yellow-400 mb-4",children:"You"===p?"You Won!":"Game Over"}),l.jsx("p",{className:"text-2xl text-white mb-8",children:"You"===p?"Congratulations! ðŸŽ‰":`${p} wins this round.`}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("button",{onClick:k,className:"w-full py-4 bg-green-600 hover:bg-green-500 text-white font-bold text-xl rounded-xl shadow-lg transition-colors",children:"Play Again"}),l.jsx("button",{onClick:e,className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-bold text-xl rounded-xl shadow-lg transition-colors",children:"Exit to Menu"})]})]})})]})};export{y as H,M as S,S as T,$ as U,o as a,l as j};
