const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UE5PixelStream-ChubS3bA.js","assets/games-5oCbjJpc.js","assets/three-DxcQGzY8.js"])))=>i.map(i=>d[i]);
import{j as e,H as t,T as n,S as r,U as s,a as i}from"./games-5oCbjJpc.js";import{a,g as o,r as l,G as c,R as u,L as d,b as h,F as f,M as p,V as m,C as g,c as v,S as y,d as x,P as b,D as w,e as N,f as k,I as S,Q as _,h as E,O as T,T as j,i as C,B as A,j as I,k as R,N as P,l as O,m as L,n as D,o as M,p as F,q as U,s as z,t as B,u as V,v as q,w as H,x as $,y as G,z as W,A as K,E as Q,H as X,J as Y,K as J,U as Z,W as ee,X as te,Y as ne,Z as re,_ as se,$ as ie,a0 as ae,a1 as oe,a2 as le,a3 as ce,a4 as ue,a5 as de,a6 as he,a7 as fe,a8 as pe,a9 as me,aa as ge,ab as ve,ac as ye,ad as xe,ae as be,af as we,ag as Ne,ah as ke,ai as Se,aj as _e,ak as Ee,al as Te,am as je,an as Ce}from"./three-DxcQGzY8.js";import{C as Ae,S as Ie,M as Re,G as Pe,X as Oe,W as Le,T as De,U as Me,a as Fe,b as Ue,I as ze,A as Be,Z as Ve,R as qe,c as He,d as $e,e as Ge,f as We,g as Ke,H as Qe,h as Xe,L as Ye,i as Je,j as Ze,k as et,l as tt,m as nt,n as rt}from"./mining-BCeyXXph.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var st,it,at={exports:{}},ot={},lt={exports:{}},ct={};function ut(){return it||(it=1,lt.exports=(st||(st=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,k||(k=!0,N());else{var t=n(c);null!==t&&I(w,t.startTime-e)}}var N,k=!1,S=-1,_=5,E=-1;function T(){return!(!g&&e.unstable_now()-E<_)}function j(){if(g=!1,k){var t=e.unstable_now();E=t;var s=!0;try{e:{p=!1,m&&(m=!1,y(S),S=-1),f=!0;var i=h;try{t:{for(b(t),d=n(l);null!==d&&!(d.expirationTime>t&&T());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,b(t),s=!0;break t}d===n(l)&&r(l),b(t)}else r(l);d=n(l)}if(null!==d)s=!0;else{var u=n(c);null!==u&&I(w,u.startTime-t),s=!1}}break e}finally{d=null,h=i,f=!1}s=void 0}}finally{s?N():k=!1}}}if("function"==typeof x)N=function(){x(j)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,A=C.port2;C.port1.onmessage=j,N=function(){A.postMessage(null)}}else N=function(){v(j,0)};function I(t,n){S=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(_=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,i){var a=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(m?(y(S),S=-1):m=!0,I(w,i-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,k||(k=!0,N()))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ct)),ct)),lt.exports}var dt,ht,ft,pt,mt={exports:{}},gt={};function vt(){if(dt)return gt;dt=1;var e=a();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gt.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},gt.flushSync=function(e){var t=i.T,n=r.p;try{if(i.T=null,r.p=2,e)return e()}finally{i.T=t,r.p=n,r.d.f()}},gt.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},gt.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},gt.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,s=o(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:a}):"script"===n&&r.d.X(e,{crossOrigin:s,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},gt.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=o(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},gt.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,s=o(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:s,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},gt.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=o(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},gt.requestFormReset=function(e){r.d.r(e)},gt.unstable_batchedUpdates=function(e,t){return e(t)},gt.useFormState=function(e,t,n){return i.H.useFormState(e,t,n)},gt.useFormStatus=function(){return i.H.useHostTransitionStatus()},gt.version="19.2.3",gt}function yt(){if(ft)return ot;ft=1;var e=ut(),t=a(),n=(ht||(ht=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),mt.exports=vt()),mt.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function o(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function l(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(i(e)!==e)throw Error(r(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var C=Symbol.for("react.client.reference");function A(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===C?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case g:return"StrictMode";case w:return"Suspense";case N:return"SuspenseList";case _:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case x:return e.displayName||"Context";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:A(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return A(e(t))}catch(n){}}return null}var I=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},L=[],D=-1;function M(e){return{current:e}}function F(e){0>D||(e.current=L[D],L[D]=null,D--)}function U(e,t){D++,L[D]=e.current,e.current=t}var z,B,V=M(null),q=M(null),H=M(null),$=M(null);function G(e,t){switch(U(H,t),U(q,e),U(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?wd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=Nd(t=wd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(V),U(V,e)}function W(){F(V),F(q),F(H)}function K(e){null!==e.memoizedState&&U($,e);var t=V.current,n=Nd(t,e.type);t!==n&&(U(q,e),U(V,n))}function Q(e){q.current===e&&(F(V),F(q)),$.current===e&&(F($),ph._currentValue=O)}function X(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||"",B=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+z+e+B}var Y=!1;function J(e,t){if(!e||Y)return"";Y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"==typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Y=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function Z(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return J(e.type,!1);case 11:return J(e.type.render,!1);case 1:return J(e.type,!0);case 31:return X("Activity");default:return""}}function ee(e){try{var t="",n=null;do{t+=Z(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var te=Object.prototype.hasOwnProperty,ne=e.unstable_scheduleCallback,re=e.unstable_cancelCallback,se=e.unstable_shouldYield,ie=e.unstable_requestPaint,ae=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,le=e.unstable_ImmediatePriority,ce=e.unstable_UserBlockingPriority,ue=e.unstable_NormalPriority,de=e.unstable_LowPriority,he=e.unstable_IdlePriority,fe=e.log,pe=e.unstable_setDisableYieldValue,me=null,ge=null;function ve(e){if("function"==typeof fe&&pe(e),ge&&"function"==typeof ge.setStrictMode)try{ge.setStrictMode(me,e)}catch(t){}}var ye=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/be|0)|0},xe=Math.log,be=Math.LN2;var we=256,Ne=262144,ke=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=Se(r):0!==(a&=o)?s=Se(a):n||0!==(n=o&~e)&&(s=Se(n)):0!==(o=r&~i)?s=Se(o):0!==a?s=Se(a):n||0!==(n=r&~e)&&(s=Se(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&4194048&n)?t:s}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=ke;return!(62914560&(ke<<=1))&&(ke=4194304),e}function Ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ye(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ye(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Pe(e,t){var n=t&-t;return 0!==((n=42&n?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function De(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:Ah(e.type)}function Me(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var Fe=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Fe,ze="__reactProps$"+Fe,Be="__reactContainer$"+Fe,Ve="__reactEvents$"+Fe,qe="__reactListeners$"+Fe,He="__reactHandles$"+Fe,$e="__reactResources$"+Fe,Ge="__reactMarker$"+Fe;function We(e){delete e[Ue],delete e[ze],delete e[Ve],delete e[qe],delete e[He]}function Ke(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=zd(e);null!==e;){if(n=e[Ue])return n;e=zd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[Ue]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Ye(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[Ge]=!0}var Ze=new Set,et={};function tt(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(et[e]=t,e=0;e<t.length;e++)Ze.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},it={};function at(e,t,n){if(s=t,te.call(it,s)||!te.call(st,s)&&(rt.test(s)?it[s]=!0:(st[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function lt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function gt(e){if(!e._valueTracker){var t=pt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function yt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=pt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var bt=/[\n"\\]/g;function wt(e){return e.replace(bt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Nt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?St(e,a,dt(t)):null!=n?St(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!=typeof s&&"symbol"!=typeof s),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+dt(o):e.removeAttribute("name")}function kt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=n){if(("submit"===i||"reset"===i)&&null==t)return void gt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:s)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a),gt(e)}function St(e,t,n){"number"===t&&xt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Tt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(r(92));if(I(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s),gt(e)}function jt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function At(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var i in t)s=t[i],t.hasOwnProperty(i)&&n[i]!==s&&At(e,i,s)}else for(var a in t)t.hasOwnProperty(a)&&At(e,a,t[a])}function Rt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ot=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lt(e){return Ot.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Mt=null;function Ft(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ut=null,zt=null;function Bt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(Nt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=s[ze]||null;if(!i)throw Error(r(90));Nt(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&yt(s)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Vt=!1;function qt(e,t,n){if(Vt)return e(t,n);Vt=!0;try{return e(t)}finally{if(Vt=!1,(null!==Ut||null!==zt)&&(ru(),Ut&&(t=Ut,e=zt,zt=Ut=null,Bt(t),e)))for(t=0;t<e.length;t++)Bt(e[t])}}function Ht(e,t){var n=e.stateNode;if(null===n)return null;var s=n[ze]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var $t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Gt=!1;if($t)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Gt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(tf){Gt=!1}var Kt=null,Qt=null,Xt=null;function Yt(){if(Xt)return Xt;var e,t,n=Qt,r=n.length,s="value"in Kt?Kt.value:Kt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Xt=s.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Zt:en,this.isPropagationStopped=en,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var nn,rn,sn,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},on=tn(an),ln=d({},an,{view:0,detail:0}),cn=tn(ln),un=d({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(nn=e.screenX-sn.screenX,rn=e.screenY-sn.screenY):rn=nn=0,sn=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),dn=tn(un),hn=tn(d({},un,{dataTransfer:0})),fn=tn(d({},ln,{relatedTarget:0})),pn=tn(d({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=tn(d({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),gn=tn(d({},an,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function wn(){return bn}var Nn=tn(d({},ln,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),kn=tn(d({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=tn(d({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),_n=tn(d({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=tn(d({},un,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=tn(d({},an,{newState:0,oldState:0})),jn=[9,13,27,32],Cn=$t&&"CompositionEvent"in window,An=null;$t&&"documentMode"in document&&(An=document.documentMode);var In=$t&&"TextEvent"in window&&!An,Rn=$t&&(!Cn||An&&8<An&&11>=An),Pn=String.fromCharCode(32),On=!1;function Ln(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function zn(e,t,n,r){Ut?zt?zt.push(r):zt=[r]:Ut=r,0<(t=od(t,"onChange")).length&&(n=new on("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bn=null,Vn=null;function qn(e){Zu(e,0)}function Hn(e){if(yt(Xe(e)))return e}function $n(e,t){if("change"===e)return t}var Gn=!1;if($t){var Wn;if($t){var Kn="oninput"in document;if(!Kn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Kn="function"==typeof Qn.oninput}Wn=Kn}else Wn=!1;Gn=Wn&&(!document.documentMode||9<document.documentMode)}function Xn(){Bn&&(Bn.detachEvent("onpropertychange",Yn),Vn=Bn=null)}function Yn(e){if("value"===e.propertyName&&Hn(Vn)){var t=[];zn(t,Vn,e,Ft(e)),qt(qn,t)}}function Jn(e,t,n){"focusin"===e?(Xn(),Vn=n,(Bn=t).attachEvent("onpropertychange",Yn)):"focusout"===e&&Xn()}function Zn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Vn)}function er(e,t){if("click"===e)return Hn(t)}function tr(e,t){if("input"===e||"change"===e)return Hn(t)}var nr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rr(e,t){if(nr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!te.call(t,s)||!nr(e[s],t[s]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function or(e){for(var t=xt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=xt((e=t.contentWindow).document)}return t}function lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var cr=$t&&"documentMode"in document&&11>=document.documentMode,ur=null,dr=null,hr=null,fr=!1;function pr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fr||null==ur||ur!==xt(r)||("selectionStart"in(r=ur)&&lr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},hr&&rr(hr,r)||(hr=r,0<(r=od(dr,"onSelect")).length&&(t=new on("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ur)))}function mr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gr={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},vr={},yr={};function xr(e){if(vr[e])return vr[e];if(!gr[e])return e;var t,n=gr[e];for(t in n)if(n.hasOwnProperty(t)&&t in yr)return vr[e]=n[t];return e}$t&&(yr=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);var br=xr("animationend"),wr=xr("animationiteration"),Nr=xr("animationstart"),kr=xr("transitionrun"),Sr=xr("transitionstart"),_r=xr("transitioncancel"),Er=xr("transitionend"),Tr=new Map,jr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Tr.set(e,t),tt(t,[e])}jr.push("scrollEnd");var Ar="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Ir=[],Rr=0,Pr=0;function Or(){for(var e=Rr,t=Pr=Rr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var s=Ir[t];Ir[t++]=null;var i=Ir[t];if(Ir[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Fr(n,s,i)}}function Lr(e,t,n,r){Ir[Rr++]=e,Ir[Rr++]=t,Ir[Rr++]=n,Ir[Rr++]=r,Pr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Lr(e,t,n,r),Ur(e)}function Mr(e,t){return Lr(e,null,null,t),Ur(e)}function Fr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-ye(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Ur(e){if(50<Kc)throw Kc=0,Qc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var zr={};function Br(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,t,n,r){return new Br(e,t,n,r)}function qr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,t){var n=e.alternate;return null===n?((n=Vr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $r(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gr(e,t,n,s,i,a){var o=0;if(s=e,"function"==typeof e)qr(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Vr(31,n,t,i)).elementType=_,e.lanes=a,e;case m:return Wr(n.children,i,a,t);case g:o=8,i|=24;break;case v:return(e=Vr(12,n,t,2|i)).elementType=v,e.lanes=a,e;case w:return(e=Vr(13,n,t,i)).elementType=w,e.lanes=a,e;case N:return(e=Vr(19,n,t,i)).elementType=N,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case y:o=9;break e;case b:o=11;break e;case k:o=14;break e;case S:o=16,s=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),s=null}return(t=Vr(o,n,t,i)).elementType=e,t.type=s,t.lanes=a,t}function Wr(e,t,n,r){return(e=Vr(7,e,r,t)).lanes=n,e}function Kr(e,t,n){return(e=Vr(6,e,null,t)).lanes=n,e}function Qr(e){var t=Vr(18,null,null,0);return t.stateNode=e,t}function Xr(e,t,n){return(t=Vr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yr=new WeakMap;function Jr(e,t){if("object"==typeof e&&null!==e){var n=Yr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ee(t)},Yr.set(e,t),t)}return{value:e,source:t,stack:ee(t)}}var Zr=[],es=0,ts=null,ns=0,rs=[],ss=0,is=null,as=1,os="";function ls(e,t){Zr[es++]=ns,Zr[es++]=ts,ts=e,ns=t}function cs(e,t,n){rs[ss++]=as,rs[ss++]=os,rs[ss++]=is,is=e;var r=as;e=os;var s=32-ye(r)-1;r&=~(1<<s),n+=1;var i=32-ye(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,as=1<<32-ye(t)+s|n<<s|r,os=i+e}else as=1<<i|n<<s|r,os=e}function us(e){null!==e.return&&(ls(e,1),cs(e,1,0))}function ds(e){for(;e===ts;)ts=Zr[--es],Zr[es]=null,ns=Zr[--es],Zr[es]=null;for(;e===is;)is=rs[--ss],rs[ss]=null,os=rs[--ss],rs[ss]=null,as=rs[--ss],rs[ss]=null}function hs(e,t){rs[ss++]=as,rs[ss++]=os,rs[ss++]=is,as=t.id,os=t.overflow,is=e}var fs=null,ps=null,ms=!1,gs=null,vs=!1,ys=Error(r(519));function xs(e){throw _s(Jr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ys}function bs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[ze]=r,n){case"dialog":ed("cancel",t),ed("close",t);break;case"iframe":case"object":case"embed":ed("load",t);break;case"video":case"audio":for(n=0;n<Yu.length;n++)ed(Yu[n],t);break;case"source":ed("error",t);break;case"img":case"image":case"link":ed("error",t),ed("load",t);break;case"details":ed("toggle",t);break;case"input":ed("invalid",t),kt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ed("invalid",t);break;case"textarea":ed("invalid",t),Tt(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||fd(t.textContent,n)?(null!=r.popover&&(ed("beforetoggle",t),ed("toggle",t)),null!=r.onScroll&&ed("scroll",t),null!=r.onScrollEnd&&ed("scrollend",t),null!=r.onClick&&(t.onclick=Dt),t=!0):t=!1,t||xs(e,!0)}function ws(e){for(fs=e.return;fs;)switch(fs.tag){case 5:case 31:case 13:return void(vs=!1);case 27:case 3:return void(vs=!0);default:fs=fs.return}}function Ns(e){if(e!==fs)return!1;if(!ms)return ws(e),ms=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||kd(e.type,e.memoizedProps)),t=!t),t&&ps&&xs(e),ws(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));ps=Ud(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));ps=Ud(e)}else 27===n?(n=ps,Ad(e.type)?(e=Fd,Fd=null,ps=e):ps=n):ps=fs?Md(e.stateNode.nextSibling):null;return!0}function ks(){ps=fs=null,ms=!1}function Ss(){var e=gs;return null!==e&&(null===Oc?Oc=e:Oc.push.apply(Oc,e),gs=null),e}function _s(e){null===gs?gs=[e]:gs.push(e)}var Es=M(null),Ts=null,js=null;function Cs(e,t,n){U(Es,t._currentValue),t._currentValue=n}function As(e){e._currentValue=Es.current,F(Es)}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rs(e,t,n,s){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a.return,n,e),s||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(r(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Is(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ps(e,t,n,s){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var l=i.type;nr(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===$.current){if(null===(o=i.alternate))throw Error(r(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(ph):e=[ph])}i=i.return}null!==e&&Rs(t,e,n,s),t.flags|=262144}function Os(e){for(e=e.firstContext;null!==e;){if(!nr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ls(e){Ts=e,js=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ds(e){return Fs(Ts,e)}function Ms(e,t){return null===Ts&&Ls(e),Fs(e,t)}function Fs(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===js){if(null===e)throw Error(r(308));js=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else js=js.next=t;return n}var Us="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},zs=e.unstable_scheduleCallback,Bs=e.unstable_NormalPriority,Vs={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qs(){return{controller:new Us,data:new Map,refCount:0}}function Hs(e){e.refCount--,0===e.refCount&&zs(Bs,function(){e.controller.abort()})}var $s=null,Gs=0,Ws=0,Ks=null;function Qs(){if(0===--Gs&&null!==$s){null!==Ks&&(Ks.status="fulfilled");var e=$s;$s=null,Ws=0,Ks=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Xs=R.S;R.S=function(e,t){Mc=ae(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$s){var n=$s=[];Gs=0,Ws=Gu(),Ks={status:"pending",value:void 0,then:function(e){n.push(e)}}}Gs++,t.then(Qs,Qs)}(0,t),null!==Xs&&Xs(e,t)};var Ys=M(null);function Js(){var e=Ys.current;return null!==e?e:yc.pooledCache}function Zs(e,t){U(Ys,null===t?Ys.current:t.pool)}function ei(){var e=Js();return null===e?null:{parent:Vs._currentValue,pool:e}}var ti=Error(r(460)),ni=Error(r(474)),ri=Error(r(542)),si={then:function(){}};function ii(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ai(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ui(e=t.reason),e;default:if("string"==typeof t.status)t.then(Dt,Dt);else{if(null!==(e=yc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ui(e=t.reason),e}throw li=t,ti}}function oi(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw li=t,ti;throw t}}var li=null;function ci(){if(null===li)throw Error(r(459));var e=li;return li=null,e}function ui(e){if(e===ti||e===ri)throw Error(r(483))}var di=null,hi=0;function fi(e){var t=hi;return hi+=1,null===di&&(di=[]),ai(di,e,t)}function pi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function mi(e,t){if(t.$$typeof===h)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Hr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===S&&oi(s)===t.type)?(pi(t=i(t,n.props),n),t.return=e,t):(pi(t=Gr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Kr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return pi(n=Gr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Xr(t,e.mode,n)).return=e,t;case S:return h(e,t=oi(t),n)}if(I(t)||j(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,fi(t),n);if(t.$$typeof===x)return h(e,Ms(e,t),n);mi(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===s?c(e,t,n,r):null;case p:return n.key===s?u(e,t,n,r):null;case S:return g(e,t,n=oi(n),r)}if(I(n)||j(n))return null!==s?null:d(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,fi(n),r);if(n.$$typeof===x)return g(e,t,Ms(e,n),r);mi(e,n)}return null}function v(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case S:return v(e,t,n,r=oi(r),s)}if(I(r)||j(r))return d(t,e=e.get(n)||null,r,s,null);if("function"==typeof r.then)return v(e,t,n,fi(r),s);if(r.$$typeof===x)return v(e,t,n,Ms(t,r),s);mi(t,r)}return null}function y(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===m){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===S&&oi(b)===c.type){n(l,c.sibling),pi(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((d=Wr(u.props.children,l.mode,d,u.key)).return=l,l=d):(pi(d=Gr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Xr(u,l.mode,d)).return=l,l=d}return o(l);case S:return y(l,c,u=oi(u),d)}if(I(u))return function(r,i,o,l){for(var c=null,u=null,d=i,f=i=0,p=null;null!==d&&f<o.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var m=g(r,d,o[f],l);if(null===m){null===d&&(d=p);break}e&&d&&null===m.alternate&&t(r,d),i=a(m,i,f),null===u?c=m:u.sibling=m,u=m,d=p}if(f===o.length)return n(r,d),ms&&ls(r,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(r,o[f],l))&&(i=a(d,i,f),null===u?c=d:u.sibling=d,u=d);return ms&&ls(r,f),c}for(d=s(d);f<o.length;f++)null!==(p=v(d,r,f,o[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),i=a(p,i,f),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(r,e)}),ms&&ls(r,f),c}(l,c,u,d);if(j(u)){if("function"!=typeof(b=j(u)))throw Error(r(150));return function(i,o,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,f=o,p=o=0,m=null,y=l.next();null!==f&&!y.done;p++,y=l.next()){f.index>p?(m=f,f=null):m=f.sibling;var x=g(i,f,y.value,c);if(null===x){null===f&&(f=m);break}e&&f&&null===x.alternate&&t(i,f),o=a(x,o,p),null===d?u=x:d.sibling=x,d=x,f=m}if(y.done)return n(i,f),ms&&ls(i,p),u;if(null===f){for(;!y.done;p++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,p),null===d?u=y:d.sibling=y,d=y);return ms&&ls(i,p),u}for(f=s(f);!y.done;p++,y=l.next())null!==(y=v(f,i,p,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),o=a(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(i,e)}),ms&&ls(i,p),u}(l,c,u=b.call(u),d)}if("function"==typeof u.then)return y(l,c,fi(u),d);if(u.$$typeof===x)return y(l,c,Ms(l,u),d);mi(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Kr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{hi=0;var s=y(e,t,n,r);return di=null,s}catch(a){if(a===ti||a===ri)throw a;var i=Vr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var vi=gi(!0),yi=gi(!1),xi=!1;function bi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ki(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&vc){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Ur(e),Fr(e,null,n),t}return Lr(e,r,t,n),Ur(e)}function Si(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function _i(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ei=!1;function Ti(){if(Ei){if(null!==Ks)throw Ks}}function ji(e,t,n,r){Ei=!1;var s=e.updateQueue;xi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(bc&f)===f:(r&f)===f){0!==f&&f===Ws&&(Ei=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(v,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(v,h,f):m))break e;h=d({},h,f);break e;case 2:xi=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),jc|=a,e.lanes=a,e.memoizedState=h}}function Ci(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function Ai(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ci(n[e],t)}var Ii=M(null),Ri=M(0);function Pi(e,t){U(Ri,e=Ec),U(Ii,t),Ec=e|t.baseLanes}function Oi(){U(Ri,Ec),U(Ii,Ii.current)}function Li(){Ec=Ri.current,F(Ii),F(Ri)}var Di=M(null),Mi=null;function Fi(e){var t=e.alternate;U(qi,1&qi.current),U(Di,e),null===Mi&&(null===t||null!==Ii.current||null!==t.memoizedState)&&(Mi=e)}function Ui(e){U(qi,qi.current),U(Di,e),null===Mi&&(Mi=e)}function zi(e){22===e.tag?(U(qi,qi.current),U(Di,e),null===Mi&&(Mi=e)):Bi()}function Bi(){U(qi,qi.current),U(Di,Di.current)}function Vi(e){F(Di),Mi===e&&(Mi=null),F(qi)}var qi=M(0);function Hi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ld(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $i=0,Gi=null,Wi=null,Ki=null,Qi=!1,Xi=!1,Yi=!1,Ji=0,Zi=0,ea=null,ta=0;function na(){throw Error(r(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,s,i){return $i=i,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?bo:wo,Yi=!1,i=n(r,s),Yi=!1,Xi&&(i=aa(t,n,r,s)),ia(e),i}function ia(e){R.H=xo;var t=null!==Wi&&null!==Wi.next;if($i=0,Ki=Wi=Gi=null,Qi=!1,Zi=0,ea=null,t)throw Error(r(300));null===e||Mo||null!==(e=e.dependencies)&&Os(e)&&(Mo=!0)}function aa(e,t,n,s){Gi=e;var i=0;do{if(Xi&&(ea=null),Zi=0,Xi=!1,25<=i)throw Error(r(301));if(i+=1,Ki=Wi=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}R.H=No,a=t(n,s)}while(Xi);return a}function oa(){var e=R.H,t=e.useState()[0];return t="function"==typeof t.then?fa(t):t,e=e.useState()[0],(null!==Wi?Wi.memoizedState:null)!==e&&(Gi.flags|=1024),t}function la(){var e=0!==Ji;return Ji=0,e}function ca(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ua(e){if(Qi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Qi=!1}$i=0,Ki=Wi=Gi=null,Xi=!1,Zi=Ji=0,ea=null}function da(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ki?Gi.memoizedState=Ki=e:Ki=Ki.next=e,Ki}function ha(){if(null===Wi){var e=Gi.alternate;e=null!==e?e.memoizedState:null}else e=Wi.next;var t=null===Ki?Gi.memoizedState:Ki.next;if(null!==t)Ki=t,Wi=e;else{if(null===e){if(null===Gi.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Wi=e).memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},null===Ki?Gi.memoizedState=Ki=e:Ki=Ki.next=e}return Ki}function fa(e){var t=Zi;return Zi+=1,null===ea&&(ea=[]),e=ai(ea,e,t),t=Gi,null===(null===Ki?t.memoizedState:Ki.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?bo:wo),e}function pa(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return fa(e);if(e.$$typeof===x)return Ds(e)}throw Error(r(438,String(e)))}function ma(e){var t=null,n=Gi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Gi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Gi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function ga(e,t){return"function"==typeof t?t(e):t}function va(e){return ya(ha(),Wi,e)}function ya(e,t,n){var s=e.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=n;var i=e.baseQueue,a=s.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,s.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(bc&h)===h:($i&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ws&&(d=!0);else{if(($i&f)===f){u=u.next,f===Ws&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Gi.lanes|=f,jc|=f}h=u.action,Yi&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,Gi.lanes|=h,jc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!nr(a,e.memoizedState)&&(Mo=!0,d&&null!==(n=Ks)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,s.lastRenderedState=a}return null===i&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xa(e){var t=ha(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);nr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function ba(e,t,n){var s=Gi,i=ha(),a=ms;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!nr((Wi||i).memoizedState,n);if(o&&(i.memoizedState=n,Mo=!0),i=i.queue,$a(ka.bind(null,s,i,e),[e]),i.getSnapshot!==t||o||null!==Ki&&1&Ki.memoizedState.tag){if(s.flags|=2048,za(9,{destroy:void 0},Na.bind(null,s,i,n,t),null),null===yc)throw Error(r(349));a||127&$i||wa(s,t,n)}return n}function wa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&_a(e)}function ka(e,t,n){return n(function(){Sa(t)&&_a(e)})}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nr(e,n)}catch(r){return!0}}function _a(e){var t=Mr(e,2);null!==t&&Jc(t,e,2)}function Ea(e){var t=da();if("function"==typeof e){var n=e;if(e=n(),Yi){ve(!0);try{n()}finally{ve(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e},t}function Ta(e,t,n,r){return e.baseState=n,ya(e,Wi,"function"==typeof r?r:ga)}function ja(e,t,n,s,i){if(go(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==R.T?n(!0):a.isTransition=!1,s(a),null===(n=t.pending)?(a.next=t.pending=a,Ca(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Ca(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=R.T,a={};R.T=a;try{var o=n(s,r),l=R.S;null!==l&&l(a,o),Aa(e,t,o)}catch(c){Ra(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),R.T=i}}else try{Aa(e,t,i=n(s,r))}catch(u){Ra(e,t,u)}}function Aa(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ia(e,t,n)},function(n){return Ra(e,t,n)}):Ia(e,t,n)}function Ia(e,t,n){t.status="fulfilled",t.value=n,Pa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ca(e,n)))}function Ra(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Pa(t),t=t.next}while(t!==r)}e.action=null}function Pa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Oa(e,t){return t}function La(e,t){if(ms){var n=yc.formState;if(null!==n){e:{var r=Gi;if(ms){if(ps){t:{for(var s=ps,i=vs;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=Md(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ps=Md(s.nextSibling),r="F!"===s.data;break e}}xs(r)}r=!1}r&&(t=n[0])}}return(n=da()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},n.queue=r,n=fo.bind(null,Gi,r),r.dispatch=n,r=Ea(!1),i=mo.bind(null,Gi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=da()).queue=s,n=ja.bind(null,Gi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Da(e){return Ma(ha(),Wi,e)}function Ma(e,t,n){if(t=ya(e,t,Oa)[0],e=va(ga)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=fa(t)}catch(a){if(a===ti)throw ri;throw a}else r=t;var s=(t=ha()).queue,i=s.dispatch;return n!==t.memoizedState&&(Gi.flags|=2048,za(9,{destroy:void 0},Fa.bind(null,s,n),null)),[r,i,e]}function Fa(e,t){e.action=t}function Ua(e){var t=ha(),n=Wi;if(null!==n)return Ma(t,n,e);ha(),t=t.memoizedState;var r=(n=ha()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function za(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Gi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Gi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return ha().memoizedState}function Va(e,t,n,r){var s=da();Gi.flags|=e,s.memoizedState=za(1|t,{destroy:void 0},n,void 0===r?null:r)}function qa(e,t,n,r){var s=ha();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==Wi&&null!==r&&ra(r,Wi.memoizedState.deps)?s.memoizedState=za(t,i,n,r):(Gi.flags|=e,s.memoizedState=za(1|t,i,n,r))}function Ha(e,t){Va(8390656,8,e,t)}function $a(e,t){qa(2048,8,e,t)}function Ga(e){var t=ha().memoizedState;return function(e){Gi.flags|=4;var t=Gi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Gi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&vc)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Wa(e,t){return qa(4,2,e,t)}function Ka(e,t){return qa(4,4,e,t)}function Qa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Xa(e,t,n){n=null!=n?n.concat([e]):null,qa(4,4,Qa.bind(null,t,e),n)}function Ya(){}function Ja(e,t){var n=ha();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Za(e,t){var n=ha();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ra(t,r[1]))return r[0];if(r=e(),Yi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r}function eo(e,t,n){return void 0===n||1073741824&$i&&!(261930&bc)?e.memoizedState=t:(e.memoizedState=n,e=Yc(),Gi.lanes|=e,jc|=e,n)}function to(e,t,n,r){return nr(n,t)?n:null!==Ii.current?(e=eo(e,n,r),nr(e,t)||(Mo=!0),e):42&$i&&(!(1073741824&$i)||261930&bc)?(e=Yc(),Gi.lanes|=e,jc|=e,t):(Mo=!0,e.memoizedState=n)}function no(e,t,n,r,s){var i=P.p;P.p=0!==i&&8>i?i:8;var a,o,l,c=R.T,u={};R.T=u,mo(e,!1,t,n);try{var d=s(),h=R.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)po(e,t,(a=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<o.length;e++)(0,o[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Xc());else po(e,t,r,Xc())}catch(f){po(e,t,{then:function(){},status:"rejected",reason:f},Xc())}finally{P.p=i,null!==c&&null!==u.types&&(c.types=u.types),R.T=c}}function ro(){}function so(e,t,n,s){if(5!==e.tag)throw Error(r(476));var i=io(e).queue;no(e,i,t,O,null===n?ro:function(){return ao(e),n(s)})}function io(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ao(e){var t=io(e);null===t.next&&(t=e.alternate.memoizedState),po(e,t.next.queue,{},Xc())}function oo(){return Ds(ph)}function lo(){return ha().memoizedState}function co(){return ha().memoizedState}function uo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Xc(),r=ki(t,e=Ni(n),n);return null!==r&&(Jc(r,t,n),Si(r,t,n)),t={cache:qs()},void(e.payload=t)}t=t.return}}function ho(e,t,n){var r=Xc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},go(e)?vo(t,n):null!==(n=Dr(e,t,n,r))&&(Jc(n,e,r),yo(n,t,r))}function fo(e,t,n){po(e,t,n,Xc())}function po(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(go(e))vo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,nr(o,a))return Lr(e,t,s,0),null===yc&&Or(),!1}catch(l){}if(null!==(n=Dr(e,t,s,r)))return Jc(n,e,r),yo(n,t,r),!0}return!1}function mo(e,t,n,s){if(s={lane:2,revertLane:Gu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},go(e)){if(t)throw Error(r(479))}else null!==(t=Dr(e,n,s,2))&&Jc(t,e,2)}function go(e){var t=e.alternate;return e===Gi||null!==t&&t===Gi}function vo(e,t){Xi=Qi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yo(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var xo={readContext:Ds,use:pa,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useInsertionEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useSyncExternalStore:na,useId:na,useHostTransitionStatus:na,useFormState:na,useActionState:na,useOptimistic:na,useMemoCache:na,useCacheRefresh:na};xo.useEffectEvent=na;var bo={readContext:Ds,use:pa,useCallback:function(e,t){return da().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Ha,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Va(4194308,4,Qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){Va(4,2,e,t)},useMemo:function(e,t){var n=da();t=void 0===t?null:t;var r=e();if(Yi){ve(!0);try{e()}finally{ve(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=da();if(void 0!==n){var s=n(t);if(Yi){ve(!0);try{n(t)}finally{ve(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=ho.bind(null,Gi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},da().memoizedState=e},useState:function(e){var t=(e=Ea(e)).queue,n=fo.bind(null,Gi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ya,useDeferredValue:function(e,t){return eo(da(),e,t)},useTransition:function(){var e=Ea(!1);return e=no.bind(null,Gi,e.queue,!0,!1),da().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Gi,i=da();if(ms){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===yc)throw Error(r(349));127&bc||wa(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ha(ka.bind(null,s,a,e),[e]),s.flags|=2048,za(9,{destroy:void 0},Na.bind(null,s,a,n,t),null),n},useId:function(){var e=da(),t=yc.identifierPrefix;if(ms){var n=os;t="_"+t+"R_"+(n=(as&~(1<<32-ye(as)-1)).toString(32)+n),0<(n=Ji++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=ta++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oo,useFormState:La,useActionState:La,useOptimistic:function(e){var t=da();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=mo.bind(null,Gi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ma,useCacheRefresh:function(){return da().memoizedState=uo.bind(null,Gi)},useEffectEvent:function(e){var t=da(),n={impl:e};return t.memoizedState=n,function(){if(2&vc)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},wo={readContext:Ds,use:pa,useCallback:Ja,useContext:Ds,useEffect:$a,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:Ka,useMemo:Za,useReducer:va,useRef:Ba,useState:function(){return va(ga)},useDebugValue:Ya,useDeferredValue:function(e,t){return to(ha(),Wi.memoizedState,e,t)},useTransition:function(){var e=va(ga)[0],t=ha().memoizedState;return["boolean"==typeof e?e:fa(e),t]},useSyncExternalStore:ba,useId:lo,useHostTransitionStatus:oo,useFormState:Da,useActionState:Da,useOptimistic:function(e,t){return Ta(ha(),0,e,t)},useMemoCache:ma,useCacheRefresh:co};wo.useEffectEvent=Ga;var No={readContext:Ds,use:pa,useCallback:Ja,useContext:Ds,useEffect:$a,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:Ka,useMemo:Za,useReducer:xa,useRef:Ba,useState:function(){return xa(ga)},useDebugValue:Ya,useDeferredValue:function(e,t){var n=ha();return null===Wi?eo(n,e,t):to(n,Wi.memoizedState,e,t)},useTransition:function(){var e=xa(ga)[0],t=ha().memoizedState;return["boolean"==typeof e?e:fa(e),t]},useSyncExternalStore:ba,useId:lo,useHostTransitionStatus:oo,useFormState:Ua,useActionState:Ua,useOptimistic:function(e,t){var n=ha();return null!==Wi?Ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ma,useCacheRefresh:co};function ko(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}No.useEffectEvent=Ga;var So={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),s=Ni(r);s.payload=t,null!=n&&(s.callback=n),null!==(t=ki(e,s,r))&&(Jc(t,e,r),Si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),s=Ni(r);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=ki(e,s,r))&&(Jc(t,e,r),Si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=Ni(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ki(e,r,n))&&(Jc(t,e,n),Si(t,e,n))}};function _o(e,t,n,r,s,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!rr(n,r)||!rr(s,i))}function Eo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function To(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=d({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function jo(e){Ar(e)}function Co(e){}function Ao(e){Ar(e)}function Io(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ro(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Po(e,t,n){return(n=Ni(n)).tag=3,n.payload={element:null},n.callback=function(){Io(e,t)},n}function Oo(e){return(e=Ni(e)).tag=3,e}function Lo(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"==typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){Ro(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Ro(t,n,r),"function"!=typeof s&&(null===zc?zc=new Set([this]):zc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(r(461)),Mo=!1;function Fo(e,t,n,r){t.child=null===e?yi(t,null,n,r):vi(t,e.child,n,r)}function Uo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ls(t),r=sa(e,t,n,a,i,s),o=la(),null===e||Mo?(ms&&o&&us(t),t.flags|=1,Fo(e,t,r,s),t.child):(ca(e,t,s),ll(e,t,s))}function zo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!=typeof i||qr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Gr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Bo(e,t,i,r,s))}if(i=e.child,!cl(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:rr)(a,r)&&e.ref===t.ref)return ll(e,t,s)}return t.flags|=1,(e=Hr(i,r)).ref=t.ref,e.return=t,t.child=e}function Bo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(rr(i,r)&&e.ref===t.ref){if(Mo=!1,t.pendingProps=r=i,!cl(e,s))return t.lanes=e.lanes,ll(e,t,s);131072&e.flags&&(Mo=!0)}}return Ko(e,t,n,r,s)}function Vo(e,t,n,r){var s=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~i}else r=0,t.child=null;return Ho(e,t,i,n,r)}if(!(536870912&n))return r=t.lanes=536870912,Ho(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Zs(0,null!==i?i.cachePool:null),null!==i?Pi(t,i):Oi(),zi(t)}else null!==i?(Zs(0,i.cachePool),Pi(t,i),Bi(),t.memoizedState=null):(null!==e&&Zs(0,null),Oi(),Bi());return Fo(e,t,s,n),t.child}function qo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ho(e,t,n,r,s){var i=Js();return i=null===i?null:{parent:Vs._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Zs(0,null),Oi(),zi(t),null!==e&&Ps(e,t,r,!0),t.childLanes=s,null}function $o(e,t){return(t=rl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Go(e,t,n){return vi(t,e.child,null,n),(e=$o(t,t.pendingProps)).flags|=2,Vi(t),t.memoizedState=null,e}function Wo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ko(e,t,n,r,s){return Ls(t),n=sa(e,t,n,r,void 0,s),r=la(),null===e||Mo?(ms&&r&&us(t),t.flags|=1,Fo(e,t,n,s),t.child):(ca(e,t,s),ll(e,t,s))}function Qo(e,t,n,r,s,i){return Ls(t),t.updateQueue=null,n=aa(t,r,n,s),ia(e),r=la(),null===e||Mo?(ms&&r&&us(t),t.flags|=1,Fo(e,t,n,i),t.child):(ca(e,t,i),ll(e,t,i))}function Xo(e,t,n,r,s){if(Ls(t),null===t.stateNode){var i=zr,a=n.contextType;"object"==typeof a&&null!==a&&(i=Ds(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=So,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},bi(t),a=n.contextType,i.context="object"==typeof a&&null!==a?Ds(a):zr,i.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(ko(t,n,a,r),i.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(a=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&So.enqueueReplaceState(i,i.state,null),ji(t,r,i,s),Ti(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=To(n,o);i.props=l;var c=i.context,u=n.contextType;a=zr,"object"==typeof u&&null!==u&&(a=Ds(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o||c!==a)&&Eo(t,i,r,a),xi=!1;var h=t.memoizedState;i.state=h,ji(t,r,i,s),Ti(),c=t.memoizedState,o||h!==c||xi?("function"==typeof d&&(ko(t,n,d,r),c=t.memoizedState),(l=xi||_o(t,n,l,r,h,c,a))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,wi(e,t),u=To(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=zr,"object"==typeof c&&null!==c&&(l=Ds(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a!==d||h!==l)&&Eo(t,i,r,l),xi=!1,h=t.memoizedState,i.state=h,ji(t,r,i,s),Ti();var f=t.memoizedState;a!==d||h!==f||xi||null!==e&&null!==e.dependencies&&Os(e.dependencies)?("function"==typeof o&&(ko(t,n,o,r),f=t.memoizedState),(u=xi||_o(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Os(e.dependencies))?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Wo(e,t),r=!!(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=vi(t,e.child,null,s),t.child=vi(t,null,n,s)):Fo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=ll(e,t,s),e}function Yo(e,t,n,r){return ks(),t.flags|=256,Fo(e,t,n,r),t.child}var Jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:ei()}}function el(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ic),e}function tl(e,t,n){var s,i=t.pendingProps,a=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&qi.current)),s&&(a=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(ms){if(a?Fi(t):Bi(),(e=ps)?null!==(e=null!==(e=Od(e,vs))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==is?{id:as,overflow:os}:null,retryLane:536870912,hydrationErrors:null},(n=Qr(e)).return=t,t.child=n,fs=t,ps=null):e=null,null===e)throw xs(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Bi(),l=rl({mode:"hidden",children:l},a=t.mode),i=Wr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Zo(n),i.childLanes=el(e,s,n),t.memoizedState=Jo,qo(null,i)):(Fi(t),nl(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Fi(t),t.flags&=-257,t=sl(e,t,n)):null!==t.memoizedState?(Bi(),t.child=e.child,t.flags|=128,t=null):(Bi(),l=i.fallback,a=t.mode,i=rl({mode:"visible",children:i.children},a),(l=Wr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,vi(t,e.child,null,n),(i=t.child).memoizedState=Zo(n),i.childLanes=el(e,s,n),t.memoizedState=Jo,t=qo(null,i));else if(Fi(t),Dd(l)){if(s=l.nextSibling&&l.nextSibling.dataset)var u=s.dgst;s=u,(i=Error(r(419))).stack="",i.digest=s,_s({value:i,source:null,stack:null}),t=sl(e,t,n)}else if(Mo||Ps(e,t,n,!1),s=0!==(n&e.childLanes),Mo||s){if(null!==(s=yc)&&(0!==(i=Pe(s,n))&&i!==c.retryLane))throw c.retryLane=i,Mr(e,i),Jc(s,e,i),Do;Ld(l)||uu(),t=sl(e,t,n)}else Ld(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ps=Md(l.nextSibling),fs=t,ms=!0,gs=null,vs=!1,null!==e&&hs(t,e),(t=nl(t,i.children)).flags|=4096);return t}return a?(Bi(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=Hr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Hr(u,l):(l=Wr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,qo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Zo(n):(null!==(a=l.cachePool)?(c=Vs._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=ei(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=el(e,s,n),t.memoizedState=Jo,qo(e.child,i)):(Fi(t),e=(n=e.child).sibling,(n=Hr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function nl(e,t){return(t=rl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function rl(e,t){return(e=Vr(22,e,null,t)).lanes=0,e}function sl(e,t,n){return vi(t,e.child,null,n),(e=nl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function il(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function al(e,t,n,r,s,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s,a.treeForkCount=i)}function ol(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;r=r.children;var a=qi.current,o=!!(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,U(qi,a),Fo(e,t,r,n),r=ms?ns:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&il(e,n,t);else if(19===e.tag)il(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Hi(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),al(t,!1,s,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Hi(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}al(t,!0,n,null,i,r);break;case"together":al(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ll(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ps(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Hr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function cl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Os(e))}function ul(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Mo=!0;else{if(!(cl(e,n)||128&t.flags))return Mo=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),Cs(0,Vs,e.memoizedState.cache),ks();break;case 27:case 5:K(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:Cs(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ui(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Fi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?tl(e,t,n):(Fi(t),null!==(e=ll(e,t,n))?e.sibling:null);Fi(t);break;case 19:var s=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ps(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return ol(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),U(qi,qi.current),r)break;return null;case 22:return t.lanes=0,Vo(e,t,n,t.pendingProps);case 24:Cs(0,Vs,e.memoizedState.cache)}return ll(e,t,n)}(e,t,n);Mo=!!(131072&e.flags)}else Mo=!1,ms&&1048576&t.flags&&cs(t,ns,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=oi(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var i=e.$$typeof;if(i===b){t.tag=11,t=Uo(null,t,e,s,n);break e}if(i===k){t.tag=14,t=zo(null,t,e,s,n);break e}}throw t=A(e)||e,Error(r(306,t,""))}qr(e)?(s=To(e,s),t.tag=1,t=Xo(null,t,e,s,n)):(t.tag=0,t=Ko(null,t,e,s,n))}return t;case 0:return Ko(e,t,t.type,t.pendingProps,n);case 1:return Xo(e,t,s=t.type,i=To(s,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(r(387));s=t.pendingProps;var a=t.memoizedState;i=a.element,wi(e,t),ji(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Cs(0,Vs,s),s!==a.cache&&Rs(t,[Vs],n,!0),Ti(),s=o.element,a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Yo(e,t,s,n);break e}if(s!==i){_s(i=Jr(Error(r(424)),t)),t=Yo(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ps=Md(e.firstChild),fs=t,ms=!0,gs=null,vs=!0,n=yi(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ks(),s===i){t=ll(e,t,n);break e}Fo(e,t,s,n)}t=t.child}return t;case 26:return Wo(e,t),null===e?(n=Qd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ms||(n=t.type,e=t.pendingProps,(s=bd(H.current).createElement(n))[Ue]=t,s[ze]=e,gd(s,n,e),Je(s),t.stateNode=s):t.memoizedState=Qd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&ms&&(s=t.stateNode=Bd(t.type,t.pendingProps,H.current),fs=t,vs=!0,i=ps,Ad(t.type)?(Fd=i,ps=Md(s.firstChild)):ps=i),Fo(e,t,t.pendingProps.children,n),Wo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ms&&((i=s=ps)&&(null!==(s=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=Md(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,vs))?(t.stateNode=s,fs=t,ps=Md(s.firstChild),vs=!1,i=!0):i=!1),i||xs(t)),K(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,kd(i,a)?s=null:null!==o&&kd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=sa(e,t,oa,null,null,n),ph._currentValue=i),Wo(e,t),Fo(e,t,s,n),t.child;case 6:return null===e&&ms&&((e=n=ps)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Md(e.nextSibling)))return null}return e}(n,t.pendingProps,vs))?(t.stateNode=n,fs=t,ps=null,e=!0):e=!1),e||xs(t)),null;case 13:return tl(e,t,n);case 4:return G(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=vi(t,null,s,n):Fo(e,t,s,n),t.child;case 11:return Uo(e,t,t.type,t.pendingProps,n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Cs(0,t.type,s.value),Fo(e,t,s.children,n),t.child;case 9:return i=t.type._context,s=t.pendingProps.children,Ls(t),s=s(i=Ds(i)),t.flags|=1,Fo(e,t,s,n),t.child;case 14:return zo(e,t,t.type,t.pendingProps,n);case 15:return Bo(e,t,t.type,t.pendingProps,n);case 19:return ol(e,t,n);case 31:return function(e,t,n){var s=t.pendingProps,i=!!(128&t.flags);if(t.flags&=-129,null===e){if(ms){if("hidden"===s.mode)return e=$o(t,s),t.lanes=536870912,qo(null,e);if(Ui(t),(e=ps)?null!==(e=null!==(e=Od(e,vs))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==is?{id:as,overflow:os}:null,retryLane:536870912,hydrationErrors:null},(n=Qr(e)).return=t,t.child=n,fs=t,ps=null):e=null,null===e)throw xs(t);return t.lanes=536870912,null}return $o(t,s)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Ui(t),i)if(256&t.flags)t.flags&=-257,t=Go(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Mo||Ps(e,t,n,!1),i=0!==(n&e.childLanes),Mo||i){if(null!==(s=yc)&&0!==(o=Pe(s,n))&&o!==a.retryLane)throw a.retryLane=o,Mr(e,o),Jc(s,e,o),Do;uu(),t=Go(e,t,n)}else e=a.treeContext,ps=Md(o.nextSibling),fs=t,ms=!0,gs=null,vs=!1,null!==e&&hs(t,e),(t=$o(t,s)).flags|=4096;return t}return(e=Hr(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Vo(e,t,n,t.pendingProps);case 24:return Ls(t),s=Ds(Vs),null===e?(null===(i=Js())&&(i=yc,a=qs(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:s,cache:i},bi(t),Cs(0,Vs,i)):(0!==(e.lanes&n)&&(wi(e,t),ji(t,null,null,n),Ti()),i=e.memoizedState,a=t.memoizedState,i.parent!==s?(i={parent:s,cache:s},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Cs(0,Vs,s)):(s=a.cache,Cs(0,Vs,s),s!==i.cache&&Rs(t,[Vs],n,!0))),Fo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function dl(e){e.flags|=4}function hl(e,t,n,r,s){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!ou())throw li=si,ni;e.flags|=8192}}else e.flags&=-16777217}function fl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!lh(t)){if(!ou())throw li=si,ni;e.flags|=8192}}function pl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?je():536870912,e.lanes|=t,Rc|=t)}function ml(e,t){if(!ms)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vl(e,t,n){var s=t.pendingProps;switch(ds(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return gl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),As(Vs),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Ns(t)?dl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,Ss())),gl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(dl(t),null!==a?(gl(t),fl(t,a)):(gl(t),hl(t,i,0,0,n))):a?a!==e.memoizedState?(dl(t),gl(t),fl(t,a)):(gl(t),t.flags&=-16777217):((e=e.memoizedProps)!==s&&dl(t),gl(t),hl(t,i,0,0,n)),null;case 27:if(Q(t),n=H.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&dl(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return gl(t),null}e=V.current,Ns(t)?bs(t):(e=Bd(i,s,n),t.stateNode=e,dl(t))}return gl(t),null;case 5:if(Q(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&dl(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return gl(t),null}if(a=V.current,Ns(t))bs(t);else{var o=bd(H.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof s.is?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?a.multiple=!0:s.size&&(a.size=s.size);break;default:a="string"==typeof s.is?o.createElement(i,{is:s.is}):o.createElement(i)}}a[Ue]=t,a[ze]=s;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(gd(a,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&dl(t)}}return gl(t),hl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&dl(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));if(e=H.current,Ns(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(i=fs))switch(i.tag){case 27:case 5:s=i.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||fd(e.nodeValue,n)))||xs(t,!0)}else(e=bd(e).createTextNode(s))[Ue]=t,t.stateNode=e}return gl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(s=Ns(t),null!==n){if(null===e){if(!s)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[Ue]=t}else ks(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gl(t),e=!1}else n=Ss(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Vi(t),t):(Vi(t),null);if(128&t.flags)throw Error(r(558))}return gl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=Ns(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[Ue]=t}else ks(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gl(t),i=!1}else i=Ss(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Vi(t),t):(Vi(t),null)}return Vi(t),128&t.flags?(t.lanes=n,t):(n=null!==s,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(i=s.alternate.memoizedState.cachePool.pool),a=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(a=s.memoizedState.cachePool.pool),a!==i&&(s.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),pl(t,t.updateQueue),gl(t),null);case 4:return W(),null===e&&rd(t.stateNode.containerInfo),gl(t),null;case 10:return As(t.type),gl(t),null;case 19:if(F(qi),null===(s=t.memoizedState))return gl(t),null;if(i=!!(128&t.flags),null===(a=s.rendering))if(i)ml(s,!1);else{if(0!==Tc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=Hi(e))){for(t.flags|=128,ml(s,!1),e=a.updateQueue,t.updateQueue=e,pl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)$r(n,e),n=n.sibling;return U(qi,1&qi.current|2),ms&&ls(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&ae()>Fc&&(t.flags|=128,i=!0,ml(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Hi(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,pl(t,e),ml(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!ms)return gl(t),null}else 2*ae()-s.renderingStartTime>Fc&&536870912!==n&&(t.flags|=128,i=!0,ml(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=s.last)?e.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ae(),e.sibling=null,n=qi.current,U(qi,i?1&n|2:1&n),ms&&ls(t,s.treeForkCount),e):(gl(t),null);case 22:case 23:return Vi(t),Li(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&n)&&!(128&t.flags)&&(gl(t),6&t.subtreeFlags&&(t.flags|=8192)):gl(t),null!==(n=t.updateQueue)&&pl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&F(Ys),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),As(Vs),gl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function yl(e,t){switch(ds(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return As(Vs),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Vi(t),null===t.alternate)throw Error(r(340));ks()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Vi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ks()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(qi),null;case 4:return W(),null;case 10:return As(t.type),null;case 22:case 23:return Vi(t),Li(),null!==e&&F(Ys),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return As(Vs),null;default:return null}}function xl(e,t){switch(ds(t),t.tag){case 3:As(Vs),W();break;case 26:case 27:case 5:Q(t);break;case 4:W();break;case 31:null!==t.memoizedState&&Vi(t);break;case 13:Vi(t);break;case 19:F(qi);break;case 10:As(t.type);break;case 22:case 23:Vi(t),Li(),null!==e&&F(Ys);break;case 24:As(Vs)}}function bl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){Tu(t,t.return,o)}}function wl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){Tu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){Tu(t,t.return,u)}}function Nl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ai(t,n)}catch(r){Tu(e,e.return,r)}}}function kl(e,t,n){n.props=To(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Tu(e,t,r)}}function Sl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(s){Tu(e,t,s)}}function _l(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(s){Tu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(i){Tu(e,t,i)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Tu(e,e.return,s)}}function Tl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(p)||pd(e,t,p,null,s,h)}}for(var f in s){var p=s[f];if(h=n[f],s.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:p!==h&&pd(e,t,f,p,s,h)}}return void Nt(e,o,l,c,u,d,a,i);case"select":for(a in p=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(a)||pd(e,t,a,null,s,c)}for(i in s)if(a=s[i],c=n[i],s.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&pd(e,t,i,a,s,c)}return t=l,n=o,s=p,void(null!=f?_t(e,!!n,f,!1):!!s!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:pd(e,t,l,null,s,i)}for(o in s)if(i=s[o],a=n[o],s.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(r(91));break;default:i!==a&&pd(e,t,o,i,s,a)}return void Et(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!s.hasOwnProperty(m))if("selected"===m)e.selected=!1;else pd(e,t,m,null,s,f);for(c in s)if(f=s[c],p=n[c],s.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else pd(e,t,c,f,s,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!s.hasOwnProperty(g)&&pd(e,t,g,null,s,f);for(u in s)if(f=s[u],p=n[u],s.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:pd(e,t,u,f,s,p)}return;default:if(Rt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!s.hasOwnProperty(v)&&md(e,t,v,void 0,s,f);for(d in s)f=s[d],p=n[d],!s.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||md(e,t,d,f,s,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!s.hasOwnProperty(y)&&pd(e,t,y,null,s,f);for(h in s)f=s[h],p=n[h],!s.hasOwnProperty(h)||f===p||null==f&&null==p||pd(e,t,h,f,s,p)}(s,e.type,n,t),s[ze]=t}catch(i){Tu(e,e.return,i)}}function jl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ad(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||jl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ad(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Dt));else if(4!==r&&(27===r&&Ad(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function Il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ad(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Il(e,t,n),e=e.sibling;null!==e;)Il(e,t,n),e=e.sibling}function Rl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);gd(t,r,n),t[Ue]=e,t[ze]=n}catch(i){Tu(e,e.return,i)}}var Pl=!1,Ol=!1,Ll=!1,Dl="function"==typeof WeakSet?WeakSet:Set,Ml=null;function Fl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Jl(e,n),4&r&&bl(5,n);break;case 1:if(Jl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Tu(n,n.return,a)}else{var s=To(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Tu(n,n.return,o)}}64&r&&Nl(n),512&r&&Sl(n,n.return);break;case 3:if(Jl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ai(e,t)}catch(a){Tu(n,n.return,a)}}break;case 27:null===t&&4&r&&Rl(n);case 26:case 5:Jl(e,n),null===t&&4&r&&El(n),512&r&&Sl(n,n.return);break;case 12:Jl(e,n);break;case 31:Jl(e,n),4&r&&Hl(e,n);break;case 13:Jl(e,n),4&r&&$l(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Iu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Pl)){t=null!==t&&null!==t.memoizedState||Ol,s=Pl;var i=Ol;Pl=r,(Ol=t)&&!i?ec(e,n,!!(8772&n.subtreeFlags)):Jl(e,n),Pl=s,Ol=i}break;case 30:break;default:Jl(e,n)}}function Ul(e){var t=e.alternate;null!==t&&(e.alternate=null,Ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Bl=!1;function Vl(e,t,n){for(n=n.child;null!==n;)ql(e,t,n),n=n.sibling}function ql(e,t,n){if(ge&&"function"==typeof ge.onCommitFiberUnmount)try{ge.onCommitFiberUnmount(me,n)}catch(i){}switch(n.tag){case 26:Ol||_l(n,t),Vl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ol||_l(n,t);var r=zl,s=Bl;Ad(n.type)&&(zl=n.stateNode,Bl=!1),Vl(e,t,n),Vd(n.stateNode),zl=r,Bl=s;break;case 5:Ol||_l(n,t);case 6:if(r=zl,s=Bl,zl=null,Vl(e,t,n),Bl=s,null!==(zl=r))if(Bl)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(n.stateNode)}catch(a){Tu(n,t,a)}else try{zl.removeChild(n.stateNode)}catch(a){Tu(n,t,a)}break;case 18:null!==zl&&(Bl?(Id(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Kh(e)):Id(zl,n.stateNode));break;case 4:r=zl,s=Bl,zl=n.stateNode.containerInfo,Bl=!0,Vl(e,t,n),zl=r,Bl=s;break;case 0:case 11:case 14:case 15:wl(2,n,t),Ol||wl(4,n,t),Vl(e,t,n);break;case 1:Ol||(_l(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&kl(n,t,r)),Vl(e,t,n);break;case 21:Vl(e,t,n);break;case 22:Ol=(r=Ol)||null!==n.memoizedState,Vl(e,t,n),Ol=r;break;default:Vl(e,t,n)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Kh(e)}catch(n){Tu(t,t.return,n)}}}function $l(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Kh(e)}catch(n){Tu(t,t.return,n)}}function Gl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ru.bind(null,e,t);t.then(r,r)}})}function Wl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var i=n[s],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Ad(l.type)){zl=l.stateNode,Bl=!1;break e}break;case 5:zl=l.stateNode,Bl=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Bl=!0;break e}l=l.return}if(null===zl)throw Error(r(160));ql(a,o,i),zl=null,Bl=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ql(t,e),t=t.sibling}var Kl=null;function Ql(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wl(t,e),Xl(e),4&s&&(wl(3,e,e.return),bl(3,e),wl(5,e,e.return));break;case 1:Wl(t,e),Xl(e),512&s&&(Ol||null===n||_l(n,n.return)),64&s&&Pl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var i=Kl;if(Wl(t,e),Xl(e),512&s&&(Ol||null===n||_l(n,n.return)),4&s){var a=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Ge]||a[Ue]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(s),i.head.insertBefore(a,i.querySelector("head > title"))),gd(a,s,n),a[Ue]=e,Je(a),s=a;break e;case"link":var o=ah("link","href",i).get(s+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}gd(a=i.createElement(s),s,n),i.head.appendChild(a);break;case"meta":if(o=ah("meta","content",i).get(s+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}gd(a=i.createElement(s),s,n),i.head.appendChild(a);break;default:throw Error(r(468,s))}a[Ue]=e,Je(a),s=a}e.stateNode=s}else oh(i,e.type,e.stateNode);else e.stateNode=th(i,s,e.memoizedProps);else a!==s?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===s?oh(i,e.type,e.stateNode):th(i,s,e.memoizedProps)):null===s&&null!==e.stateNode&&Tl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wl(t,e),Xl(e),512&s&&(Ol||null===n||_l(n,n.return)),null!==n&&4&s&&Tl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wl(t,e),Xl(e),512&s&&(Ol||null===n||_l(n,n.return)),32&e.flags){i=e.stateNode;try{jt(i,"")}catch(m){Tu(e,e.return,m)}}4&s&&null!=e.stateNode&&Tl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&s&&(Ll=!0);break;case 6:if(Wl(t,e),Xl(e),4&s){if(null===e.stateNode)throw Error(r(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(m){Tu(e,e.return,m)}}break;case 3:if(ih=null,i=Kl,Kl=$d(t.containerInfo),Wl(t,e),Kl=i,Xl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Kh(t.containerInfo)}catch(m){Tu(e,e.return,m)}Ll&&(Ll=!1,Yl(e));break;case 4:s=Kl,Kl=$d(e.stateNode.containerInfo),Wl(t,e),Xl(e),Kl=s;break;case 12:default:Wl(t,e),Xl(e);break;case 31:case 19:Wl(t,e),Xl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Gl(e,s)));break;case 13:Wl(t,e),Xl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Dc=ae()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Gl(e,s)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Pl,d=Ol;if(Pl=u||i,Ol=d||c,Wl(t,e),Ol=d,Pl=u,Xl(e),8192&s)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Pl||Ol||Zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(m){Tu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Tu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Rd(p,!0):Rd(c.stateNode,!1)}catch(m){Tu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Gl(e,n))));case 30:case 21:}}function Xl(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(jl(s)){n=s;break}s=s.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var i=n.stateNode;Il(e,Cl(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(jt(a,""),n.flags&=-33),Il(e,Cl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Al(e,Cl(e),o);break;default:throw Error(r(161))}}catch(l){Tu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Yl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Yl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Jl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Fl(e,t.alternate,t),t=t.sibling}function Zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:wl(4,t,t.return),Zl(t);break;case 1:_l(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&kl(t,t.return,n),Zl(t);break;case 27:Vd(t.stateNode);case 26:case 5:_l(t,t.return),Zl(t);break;case 22:null===t.memoizedState&&Zl(t);break;default:Zl(t)}e=e.sibling}}function ec(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:ec(s,i,n),bl(4,i);break;case 1:if(ec(s,i,n),"function"==typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Tu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Ci(l[s],o)}catch(c){Tu(r,r.return,c)}}n&&64&a&&Nl(i),Sl(i,i.return);break;case 27:Rl(i);case 26:case 5:ec(s,i,n),n&&null===r&&4&a&&El(i),Sl(i,i.return);break;case 12:ec(s,i,n);break;case 31:ec(s,i,n),n&&4&a&&Hl(s,i);break;case 13:ec(s,i,n),n&&4&a&&$l(s,i);break;case 22:null===i.memoizedState&&ec(s,i,n),Sl(i,i.return);break;case 30:break;default:ec(s,i,n)}t=t.sibling}}function tc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Hs(n))}function nc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hs(e))}function rc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)sc(e,t,n,r),t=t.sibling}function sc(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:rc(e,t,n,r),2048&s&&bl(9,t);break;case 1:case 31:case 13:default:rc(e,t,n,r);break;case 3:rc(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hs(e)));break;case 12:if(2048&s){rc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Tu(t,t.return,l)}}else rc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?rc(e,t,n,r):ac(e,t):2&i._visibility?rc(e,t,n,r):(i._visibility|=2,ic(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&s&&tc(a,t);break;case 24:rc(e,t,n,r),2048&s&&nc(t.alternate,t)}}function ic(e,t,n,r,s){for(s=s&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:ic(i,a,o,l,s),bl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?ic(i,a,o,l,s):ac(i,a):(u._visibility|=2,ic(i,a,o,l,s)),s&&2048&c&&tc(a.alternate,a);break;case 24:ic(i,a,o,l,s),s&&2048&c&&nc(a.alternate,a);break;default:ic(i,a,o,l,s)}t=t.sibling}}function ac(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:ac(n,r),2048&s&&tc(r.alternate,r);break;case 24:ac(n,r),2048&s&&nc(r.alternate,r);break;default:ac(n,r)}t=t.sibling}}var oc=8192;function lc(e,t,n){if(e.subtreeFlags&oc)for(e=e.child;null!==e;)cc(e,t,n),e=e.sibling}function cc(e,t,n){switch(e.tag){case 26:lc(e,t,n),e.flags&oc&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var s=Xd(r.href),i=t.querySelector(Yd(s));if(i)return null!==(t=i._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=uh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void Je(i);i=t.ownerDocument||t,r=Jd(r),(s=qd.get(s))&&rh(r,s),Je(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),gd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=uh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Kl,e.memoizedState,e.memoizedProps);break;case 5:default:lc(e,t,n);break;case 3:case 4:var r=Kl;Kl=$d(e.stateNode.containerInfo),lc(e,t,n),Kl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=oc,oc=16777216,lc(e,t,n),oc=r):lc(e,t,n))}}function uc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,pc(r,e)}uc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)hc(e),e=e.sibling}function hc(e){switch(e.tag){case 0:case 11:case 15:dc(e),2048&e.flags&&wl(9,e,e.return);break;case 3:case 12:default:dc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,fc(e)):dc(e)}}function fc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,pc(r,e)}uc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:wl(8,t,t.return),fc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,fc(t));break;default:fc(t)}e=e.sibling}}function pc(e,t){for(;null!==Ml;){var n=Ml;switch(n.tag){case 0:case 11:case 15:wl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Hs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ml=r;else e:for(n=e;null!==Ml;){var s=(r=Ml).sibling,i=r.return;if(Ul(r),r===n){Ml=null;break e}if(null!==s){s.return=i,Ml=s;break e}Ml=i}}}var mc={getCacheForType:function(e){var t=Ds(Vs),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ds(Vs).controller.signal}},gc="function"==typeof WeakMap?WeakMap:Map,vc=0,yc=null,xc=null,bc=0,wc=0,Nc=null,kc=!1,Sc=!1,_c=!1,Ec=0,Tc=0,jc=0,Cc=0,Ac=0,Ic=0,Rc=0,Pc=null,Oc=null,Lc=!1,Dc=0,Mc=0,Fc=1/0,Uc=null,zc=null,Bc=0,Vc=null,qc=null,Hc=0,$c=0,Gc=null,Wc=null,Kc=0,Qc=null;function Xc(){return 2&vc&&0!==bc?bc&-bc:null!==R.T?Gu():De()}function Yc(){if(0===Ic)if(536870912&bc&&!ms)Ic=536870912;else{var e=Ne;!(3932160&(Ne<<=1))&&(Ne=262144),Ic=e}return null!==(e=Di.current)&&(e.flags|=32),Ic}function Jc(e,t,n){(e!==yc||2!==wc&&9!==wc)&&null===e.cancelPendingCommit||(iu(e,0),nu(e,bc,Ic,!1)),Ae(e,n),2&vc&&e===yc||(e===yc&&(!(2&vc)&&(Cc|=n),4===Tc&&nu(e,bc,Ic,!1)),Uu(e))}function Zc(e,t,n){if(6&vc)throw Error(r(327));for(var s=!n&&!(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),i=s?function(e,t){var n=vc;vc|=2;var s=lu(),i=cu();yc!==e||bc!==t?(Uc=null,Fc=ae()+500,iu(e,t)):Sc=Ee(e,t);e:for(;;)try{if(0!==wc&&null!==xc){t=xc;var a=Nc;t:switch(wc){case 1:wc=0,Nc=null,gu(e,t,a,1);break;case 2:case 9:if(ii(a)){wc=0,Nc=null,mu(t);break}t=function(){2!==wc&&9!==wc||yc!==e||(wc=7),Uu(e)},a.then(t,t);break e;case 3:wc=7;break e;case 4:wc=5;break e;case 7:ii(a)?(wc=0,Nc=null,mu(t)):(wc=0,Nc=null,gu(e,t,a,7));break;case 5:var o=null;switch(xc.tag){case 26:o=xc.memoizedState;case 5:case 27:var l=xc;if(o?lh(o):l.stateNode.complete){wc=0,Nc=null;var c=l.sibling;if(null!==c)xc=c;else{var u=l.return;null!==u?(xc=u,vu(u)):xc=null}break t}}wc=0,Nc=null,gu(e,t,a,5);break;case 6:wc=0,Nc=null,gu(e,t,a,6);break;case 8:su(),Tc=6;break e;default:throw Error(r(462))}}fu();break}catch(d){au(e,d)}return js=Ts=null,R.H=s,R.A=i,vc=n,null!==xc?0:(yc=null,bc=0,Or(),Tc)}(e,t):du(e,t,!0),a=s;;){if(0===i){Sc&&!s&&nu(e,t,0,!1);break}if(n=e.current.alternate,!a||tu(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Pc;var c=l.current.memoizedState.isDehydrated;if(c&&(iu(l,o).flags|=256),2!==(o=du(l,o,!1))){if(_c&&!c){l.errorRecoveryDisabledLanes|=a,Cc|=a,i=4;break e}a=Oc,Oc=i,null!==a&&(null===Oc?Oc=a:Oc.push.apply(Oc,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){iu(e,0),nu(e,t,0,!0);break}e:{switch(s=e,a=i){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:nu(s,t,Ic,!kc);break e;case 2:Oc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(i=Dc+300-ae())){if(nu(s,t,Ic,!kc),0!==_e(s,0,!0))break e;Hc=t,s.timeoutHandle=_d(eu.bind(null,s,n,Oc,Uc,Lc,t,Ic,Cc,Rc,kc,a,"Throttled",-0,0),i)}else eu(s,n,Oc,Uc,Lc,t,Ic,Cc,Rc,kc,a,null,-0,0)}break}i=du(e,t,!1),a=!1}Uu(e)}function eu(e,t,n,r,s,i,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){cc(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var p=(62914560&i)===i?Dc-ae():(4194048&i)===i?Mc-ae():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&hh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&hh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ch&&(ch=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],i=s.transferSize,a=s.initiatorType,o=s.duration;if(i&&o&&vd(a)){for(a=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&vd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+a)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&hh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ch?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,p)))return Hc=i,e.cancelPendingCommit=p(xu.bind(null,e,t,i,n,r,s,a,o,l,u,d,null,h,f)),void nu(e,i,a,!c)}xu(e,t,i,n,r,s,a,o,l)}function tu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nr(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nu(e,t,n,r){t&=~Ac,t&=~Cc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-ye(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Ie(e,n,t)}function ru(){return!!(6&vc)||(zu(0),!1)}function su(){if(null!==xc){if(0===wc)var e=xc.return;else js=Ts=null,ua(e=xc),di=null,hi=0,e=xc;for(;null!==e;)xl(e.alternate,e),e=e.return;xc=null}}function iu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Ed(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc=0,su(),yc=e,xc=n=Hr(e.current,null),bc=t,wc=0,Nc=null,kc=!1,Sc=Ee(e,t),_c=!1,Rc=Ic=Ac=Cc=jc=Tc=0,Oc=Pc=null,Lc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-ye(r),i=1<<s;t|=e[s],r&=~i}return Ec=t,Or(),n}function au(e,t){Gi=null,R.H=xo,t===ti||t===ri?(t=ci(),wc=3):t===ni?(t=ci(),wc=4):wc=t===Do?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,Nc=t,null===xc&&(Tc=1,Io(e,Jr(t,e.current)))}function ou(){var e=Di.current;return null===e||((4194048&bc)===bc?null===Mi:!!((62914560&bc)===bc||536870912&bc)&&e===Mi)}function lu(){var e=R.H;return R.H=xo,null===e?xo:e}function cu(){var e=R.A;return R.A=mc,e}function uu(){Tc=4,kc||(4194048&bc)!==bc&&null!==Di.current||(Sc=!0),!(134217727&jc)&&!(134217727&Cc)||null===yc||nu(yc,bc,Ic,!1)}function du(e,t,n){var r=vc;vc|=2;var s=lu(),i=cu();yc===e&&bc===t||(Uc=null,iu(e,t)),t=!1;var a=Tc;e:for(;;)try{if(0!==wc&&null!==xc){var o=xc,l=Nc;switch(wc){case 8:su(),a=6;break e;case 3:case 2:case 9:case 6:null===Di.current&&(t=!0);var c=wc;if(wc=0,Nc=null,gu(e,o,l,c),n&&Sc){a=0;break e}break;default:c=wc,wc=0,Nc=null,gu(e,o,l,c)}}hu(),a=Tc;break}catch(u){au(e,u)}return t&&e.shellSuspendCounter++,js=Ts=null,vc=r,R.H=s,R.A=i,null===xc&&(yc=null,bc=0,Or()),a}function hu(){for(;null!==xc;)pu(xc)}function fu(){for(;null!==xc&&!se();)pu(xc)}function pu(e){var t=ul(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?vu(e):xc=t}function mu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qo(n,t,t.pendingProps,t.type,void 0,bc);break;case 11:t=Qo(n,t,t.pendingProps,t.type.render,t.ref,bc);break;case 5:ua(t);default:xl(n,t),t=ul(n,t=xc=$r(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?vu(e):xc=t}function gu(e,t,n,s){js=Ts=null,ua(t),di=null,hi=0;var i=t.return;try{if(function(e,t,n,s,i){if(n.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=n.alternate)&&Ps(t,n,i,!0),null!==(n=Di.current)){switch(n.tag){case 31:case 13:return null===Mi?uu():null===n.alternate&&0===Tc&&(Tc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===si?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),ju(e,s,i)),!1;case 22:return n.flags|=65536,s===si?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),ju(e,s,i)),!1}throw Error(r(435,n.tag))}return ju(e,s,i),uu(),!1}if(ms)return null!==(t=Di.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,s!==ys&&_s(Jr(e=Error(r(422),{cause:s}),n))):(s!==ys&&_s(Jr(t=Error(r(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,s=Jr(s,n),_i(e,i=Po(e.stateNode,s,i)),4!==Tc&&(Tc=2)),!1;var a=Error(r(520),{cause:s});if(a=Jr(a,n),null===Pc?Pc=[a]:Pc.push(a),4!==Tc&&(Tc=2),null===t)return!0;s=Jr(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,_i(n,e=Po(n.stateNode,s,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==zc&&zc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Lo(i=Oo(i),e,n,s),_i(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,bc))return Tc=1,Io(e,Jr(n,e.current)),void(xc=null)}catch(a){if(null!==i)throw xc=i,a;return Tc=1,Io(e,Jr(n,e.current)),void(xc=null)}32768&t.flags?(ms||1===s?e=!0:Sc||536870912&bc?e=!1:(kc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=Di.current)&&13===s.tag&&(s.flags|=16384))),yu(t,e)):vu(t)}function vu(e){var t=e;do{if(32768&t.flags)return void yu(t,kc);e=t.return;var n=vl(t.alternate,t,Ec);if(null!==n)return void(xc=n);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Tc&&(Tc=5)}function yu(e,t){do{var n=yl(e.alternate,e);if(null!==n)return n.flags&=32767,void(xc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(xc=e);xc=e=n}while(null!==e);Tc=6,xc=null}function xu(e,t,n,s,i,a,o,l,c){e.cancelPendingCommit=null;do{Su()}while(0!==Bc);if(6&vc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-ye(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,a|=Pr,o,l,c),e===yc&&(xc=yc=null,bc=0),qc=t,Vc=e,Hc=n,$c=a,Gc=i,Wc=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ne(ue,function(){return _u(),null})):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=R.T,R.T=null,i=P.p,P.p=2,o=vc,vc|=4;try{!function(e,t){if(e=e.containerInfo,yd=kh,lr(e=or(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===s&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},kh=!1,Ml=t;null!==Ml;)if(e=(t=Ml).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ml=e;else for(;null!==Ml;){switch(a=(t=Ml).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var m=To(n.type,i);e=s.getSnapshotBeforeUpdate(m,a),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){Tu(n,n.return,v)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Pd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Ml=e;break}Ml=t.return}}(e,t)}finally{vc=o,P.p=i,R.T=s}}Bc=1,bu(),wu(),Nu()}}function bu(){if(1===Bc){Bc=0;var e=Vc,t=qc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=R.T,R.T=null;var r=P.p;P.p=2;var s=vc;vc|=4;try{Ql(t,e);var i=xd,a=or(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&ar(o.ownerDocument.documentElement,o)){if(null!==l&&lr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var v=ir(o,m),y=ir(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var x=d.createRange();x.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(x),f.extend(y.node,y.offset)):(x.setEnd(y.node,y.offset),f.addRange(x))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}kh=!!yd,xd=yd=null}finally{vc=s,P.p=r,R.T=n}}e.current=t,Bc=2}}function wu(){if(2===Bc){Bc=0;var e=Vc,t=qc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=R.T,R.T=null;var r=P.p;P.p=2;var s=vc;vc|=4;try{Fl(e,t.alternate,t)}finally{vc=s,P.p=r,R.T=n}}Bc=3}}function Nu(){if(4===Bc||3===Bc){Bc=0,ie();var e=Vc,t=qc,n=Hc,r=Wc;10256&t.subtreeFlags||10256&t.flags?Bc=5:(Bc=0,qc=Vc=null,ku(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(zc=null),Le(n),t=t.stateNode,ge&&"function"==typeof ge.onCommitFiberRoot)try{ge.onCommitFiberRoot(me,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=R.T,s=P.p,P.p=2,R.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{R.T=t,P.p=s}}3&Hc&&Su(),Uu(e),s=e.pendingLanes,261930&n&&42&s?e===Qc?Kc++:(Kc=0,Qc=e):Kc=0,zu(0)}}function ku(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Hs(t)))}function Su(){return bu(),wu(),Nu(),_u()}function _u(){if(5!==Bc)return!1;var e=Vc,t=$c;$c=0;var n=Le(Hc),s=R.T,i=P.p;try{P.p=32>n?32:n,R.T=null,n=Gc,Gc=null;var a=Vc,o=Hc;if(Bc=0,qc=Vc=null,Hc=0,6&vc)throw Error(r(331));var l=vc;if(vc|=4,hc(a.current),sc(a,a.current,o,n),vc=l,zu(0,!1),ge&&"function"==typeof ge.onPostCommitFiberRoot)try{ge.onPostCommitFiberRoot(me,a)}catch(c){}return!0}finally{P.p=i,R.T=s,ku(e,t)}}function Eu(e,t,n){t=Jr(n,t),null!==(e=ki(e,t=Po(e.stateNode,t,2),2))&&(Ae(e,2),Uu(e))}function Tu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===zc||!zc.has(r))){e=Jr(n,e),null!==(r=ki(t,n=Oo(2),2))&&(Lo(n,r,t,e),Ae(r,2),Uu(r));break}}t=t.return}}function ju(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new gc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(_c=!0,s.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,yc===e&&(bc&n)===n&&(4===Tc||3===Tc&&(62914560&bc)===bc&&300>ae()-Dc?!(2&vc)&&iu(e,0):Ac|=n,Rc===bc&&(Rc=0)),Uu(e)}function Au(e,t){0===t&&(t=je()),null!==(e=Mr(e,t))&&(Ae(e,t),Uu(e))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 31:case 13:var s=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==s&&s.delete(t),Au(e,n)}var Pu=null,Ou=null,Lu=!1,Du=!1,Mu=!1,Fu=0;function Uu(e){e!==Ou&&null===e.next&&(null===Ou?Pu=Ou=e:Ou=Ou.next=e),Du=!0,Lu||(Lu=!0,jd(function(){6&vc?ne(le,Bu):Vu()}))}function zu(e,t){if(!Mu&&Du){Mu=!0;do{for(var n=!1,r=Pu;null!==r;){if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-ye(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,$u(r,i))}else i=bc,!(3&(i=_e(r,r===yc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ee(r,i)||(n=!0,$u(r,i));r=r.next}}while(n);Mu=!1}}function Bu(){Vu()}function Vu(){Du=Lu=!1;var e=0;0!==Fu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Sd&&(Sd=e,!0);return Sd=null,!1}()&&(e=Fu);for(var t=ae(),n=null,r=Pu;null!==r;){var s=r.next,i=qu(r,t);0===i?(r.next=null,null===n?Pu=s:n.next=s,null===s&&(Ou=n)):(n=r,(0!==e||3&i)&&(Du=!0)),r=s}0!==Bc&&5!==Bc||zu(e),0!==Fu&&(Fu=0)}function qu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-ye(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Te(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=bc,n=_e(e,e===(t=yc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===wc||9===wc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&re(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Ee(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&re(r),Le(n)){case 2:case 8:n=ce;break;case 32:default:n=ue;break;case 268435456:n=he}return r=Hu.bind(null,e),n=ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&re(r),e.callbackPriority=2,e.callbackNode=null,2}function Hu(e,t){if(0!==Bc&&5!==Bc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=bc;return 0===(r=_e(e,e===yc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Zc(e,r,t),qu(e,ae()),null!=e.callbackNode&&e.callbackNode===n?Hu.bind(null,e):null)}function $u(e,t){if(Su())return null;Zc(e,t,!0)}function Gu(){if(0===Fu){var e=Ws;0===e&&(e=we,!(261888&(we<<=1))&&(we=256)),Fu=e}return Fu}function Wu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Lt(""+e)}function Ku(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Qu=0;Qu<jr.length;Qu++){var Xu=jr[Qu];Cr(Xu.toLowerCase(),"on"+(Xu[0].toUpperCase()+Xu.slice(1)))}Cr(br,"onAnimationEnd"),Cr(wr,"onAnimationIteration"),Cr(Nr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(kr,"onTransitionRun"),Cr(Sr,"onTransitionStart"),Cr(_r,"onTransitionCancel"),Cr(Er,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ju=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yu));function Zu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Ar(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Ar(u)}s.currentTarget=null,i=l}}}}function ed(e,t){var n=t[Ve];void 0===n&&(n=t[Ve]=new Set);var r=e+"__bubble";n.has(r)||(sd(t,e,2,!1),n.add(r))}function td(e,t,n){var r=0;t&&(r|=4),sd(n,e,r,t)}var nd="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[nd]){e[nd]=!0,Ze.forEach(function(t){"selectionchange"!==t&&(Ju.has(t)||td(t,!1,e),td(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[nd]||(t[nd]=!0,td("selectionchange",!1,t))}}function sd(e,t,n,r){switch(Ah(t)){case 2:var s=Sh;break;case 8:s=_h;break;default:s=Eh}n=s.bind(null,t,n,e),s=void 0,!Gt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function id(e,t,n,r,s){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==l;){if(null===(o=Ke(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=a=o;continue e}l=l.parentNode}}r=r.return}qt(function(){var r=a,s=Ft(n),o=[];e:{var l=Tr.get(e);if(void 0!==l){var c=on,u=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":c=Nn;break;case"focusin":u="focus",c=fn;break;case"focusout":u="blur",c=fn;break;case"beforeblur":case"afterblur":c=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Sn;break;case br:case wr:case Nr:c=pn;break;case Er:c=_n;break;case"scroll":case"scrollend":c=cn;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=kn;break;case"toggle":case"beforetoggle":c=Tn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ht(m,f))&&d.push(ad(m,g,p)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,s),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Mt||!(u=n.relatedTarget||n.fromElement)||!Ke(u)&&!u[Be])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ke(u):null)&&(h=i(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=dn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=kn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?l:Xe(c),p=null==u?l:Xe(u),(l=new d(g,m+"leave",c,n,s)).target=h,l.relatedTarget=p,g=null,Ke(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ld,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var v=m;v;v=d(v))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&cd(o,l,c,d,!1),null!==u&&null!==h&&cd(o,h,u,d,!0)}if("select"===(c=(l=r?Xe(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=$n;else if(Un(l))if(Gn)y=tr;else{y=Zn;var x=Jn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Rt(r.elementType)&&(y=$n):y=er;switch(y&&(y=y(e,r))?zn(o,y,n,s):(x&&x(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&St(l,"number",l.value)),x=r?Xe(r):window,e){case"focusin":(Un(x)||"true"===x.contentEditable)&&(ur=x,dr=r,hr=null);break;case"focusout":hr=dr=ur=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,pr(o,n,s);break;case"selectionchange":if(cr)break;case"keydown":case"keyup":pr(o,n,s)}var b;if(Cn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Mn?Ln(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Rn&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Mn&&(b=Yt()):(Qt="value"in(Kt=s)?Kt.value:Kt.textContent,Mn=!0)),0<(x=od(r,w)).length&&(w=new gn(w,e,null,n,s),o.push({event:w,listeners:x}),b?w.data=b:null!==(b=Dn(n))&&(w.data=b))),(b=In?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(On=!0,Pn);case"textInput":return(e=t.data)===Pn&&On?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!Cn&&Ln(e,t)?(e=Yt(),Xt=Qt=Kt=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=od(r,"onBeforeInput")).length&&(x=new gn("onBeforeInput","beforeinput",null,n,s),o.push({event:x,listeners:w}),x.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Wu((s[ze]||null).action),a=r.submitter;a&&null!==(t=(t=a[ze]||null)?Wu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new on("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Fu){var e=a?Ku(s,a):new FormData(s);so(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"==typeof i&&(o.preventDefault(),e=a?Ku(s,a):new FormData(s),so(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(o,e,r,n,s)}Zu(o,t)})}function ad(e,t,n){return{instance:e,listener:t,currentTarget:n}}function od(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Ht(e,n))&&r.unshift(ad(e,s,i)),null!=(s=Ht(e,t))&&r.push(ad(e,s,i))),3===e.tag)return r;e=e.return}return[]}function ld(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function cd(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ht(n,i))&&a.unshift(ad(n,c,l)):s||null!=(c=Ht(n,i))&&a.push(ad(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ud=/\r\n?/g,dd=/\u0000|\uFFFD/g;function hd(e){return("string"==typeof e?e:""+e).replace(ud,"\n").replace(dd,"")}function fd(e,t){return t=hd(t),hd(e)===t}function pd(e,t,n,s,i,a){switch(n){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||jt(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&jt(e,""+s);break;case"className":lt(e,"class",s);break;case"tabIndex":lt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(e,n,s);break;case"style":It(e,s,a);break;case"data":if("object"!==t){lt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=Lt(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&pd(e,t,"name",i.name,i,null),pd(e,t,"formEncType",i.formEncType,i,null),pd(e,t,"formMethod",i.formMethod,i,null),pd(e,t,"formTarget",i.formTarget,i,null)):(pd(e,t,"encType",i.encType,i,null),pd(e,t,"method",i.method,i,null),pd(e,t,"target",i.target,i,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=Lt(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Dt);break;case"onScroll":null!=s&&ed("scroll",e);break;case"onScrollEnd":null!=s&&ed("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}n=Lt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":ed("beforetoggle",e),ed("toggle",e),at(e,"popover",s);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":at(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=Pt.get(n)||n,s)}}function md(e,t,n,s,i,a){switch(n){case"style":It(e,s,a);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof s?jt(e,s):("number"==typeof s||"bigint"==typeof s)&&jt(e,""+s);break;case"onScroll":null!=s&&ed("scroll",e);break;case"onScrollEnd":null!=s&&ed("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:et.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=e[ze]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!=typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):at(e,n,s):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,i)))}}function gd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ed("error",e),ed("load",e);var s,i=!1,a=!1;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(null!=o)switch(s){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:pd(e,t,s,o,n,null)}}return a&&pd(e,t,"srcSet",n.srcSet,n,null),void(i&&pd(e,t,"src",n.src,n,null));case"input":ed("invalid",e);var l=s=o=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:pd(e,t,i,d,n,null)}}return void kt(e,s,l,c,u,o,a,!1);case"select":for(a in ed("invalid",e),i=o=s=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:pd(e,t,a,l,n,null)}return t=s,n=o,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(o in ed("invalid",e),s=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:pd(e,t,o,l,n,null)}return void Tt(e,i,a,s);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i;else pd(e,t,c,i,n,null);return;case"dialog":ed("beforetoggle",e),ed("toggle",e),ed("cancel",e),ed("close",e);break;case"iframe":case"object":ed("load",e);break;case"video":case"audio":for(i=0;i<Yu.length;i++)ed(Yu[i],e);break;case"image":ed("error",e),ed("load",e);break;case"details":ed("toggle",e);break;case"embed":case"source":case"link":ed("error",e),ed("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:pd(e,t,u,i,n,null)}return;default:if(Rt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&md(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&pd(e,t,l,i,n,null))}function vd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var yd=null,xd=null;function bd(e){return 9===e.nodeType?e:e.ownerDocument}function wd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function kd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sd=null;var _d="function"==typeof setTimeout?setTimeout:void 0,Ed="function"==typeof clearTimeout?clearTimeout:void 0,Td="function"==typeof Promise?Promise:void 0,jd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Td?function(e){return Td.resolve(null).then(e).catch(Cd)}:_d;function Cd(e){setTimeout(function(){throw e})}function Ad(e){return"head"===e}function Id(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Kh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Vd(e.ownerDocument.documentElement);else if("head"===n){Vd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[Ge]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Vd(e.ownerDocument.body);n=s}while(n);Kh(t)}function Rd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Pd(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Od(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Md(e.nextSibling)))return null}return e}function Ld(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Md(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Fd=null;function Ud(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Md(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Bd(e,t,n){switch(t=bd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Vd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var qd=new Map,Hd=new Set;function $d(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Gd=P.d;P.d={f:function(){var e=Gd.f(),t=ru();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?ao(t):Gd.r(e)},D:function(e){Gd.D(e),Kd("dns-prefetch",e,null)},C:function(e,t){Gd.C(e,t),Kd("preconnect",e,t)},L:function(e,t,n){Gd.L(e,t,n);var r=Wd;if(r&&e&&t){var s='link[rel="preload"][as="'+wt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+wt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(s+='[imagesizes="'+wt(n.imageSizes)+'"]')):s+='[href="'+wt(e)+'"]';var i=s;switch(t){case"style":i=Xd(e);break;case"script":i=Zd(e)}qd.has(i)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),qd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Yd(i))||"script"===t&&r.querySelector(eh(i))||(gd(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}},m:function(e,t){Gd.m(e,t);var n=Wd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+wt(r)+'"][href="'+wt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Zd(e)}if(!qd.has(i)&&(e=d({rel:"modulepreload",href:e},t),qd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(eh(i)))return}gd(r=n.createElement("link"),"link",e),Je(r),n.head.appendChild(r)}}},X:function(e,t){Gd.X(e,t);var n=Wd;if(n&&e){var r=Ye(n).hoistableScripts,s=Zd(e),i=r.get(s);i||((i=n.querySelector(eh(s)))||(e=d({src:e,async:!0},t),(t=qd.get(s))&&sh(e,t),Je(i=n.createElement("script")),gd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Gd.S(e,t,n);var r=Wd;if(r&&e){var s=Ye(r).hoistableStyles,i=Xd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Yd(i)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=qd.get(i))&&rh(e,n);var l=a=r.createElement("link");Je(l),gd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,nh(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Gd.M(e,t);var n=Wd;if(n&&e){var r=Ye(n).hoistableScripts,s=Zd(e),i=r.get(s);i||((i=n.querySelector(eh(s)))||(e=d({src:e,async:!0,type:"module"},t),(t=qd.get(s))&&sh(e,t),Je(i=n.createElement("script")),gd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Wd="undefined"==typeof document?null:document;function Kd(e,t,n){var r=Wd;if(r&&"string"==typeof t&&t){var s=wt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"==typeof n&&(s+='[crossorigin="'+n+'"]'),Hd.has(s)||(Hd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(gd(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}}function Qd(e,t,n,s){var i,a,o,l,c=(c=H.current)?$d(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Xd(n.href),(s=(n=Ye(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Xd(n.href);var u=Ye(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Yd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),qd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},qd.set(e,n),u||(i=c,a=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),gd(a,"link",o),Je(a),i.head.appendChild(a))))),t&&null===s)throw Error(r(528,""));return d}if(t&&null!==s)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Zd(n),(s=(n=Ye(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Xd(e){return'href="'+wt(e)+'"'}function Yd(e){return'link[rel="stylesheet"]['+e+"]"}function Jd(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Zd(e){return'[src="'+wt(e)+'"]'}function eh(e){return"script[async]"+e}function th(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+wt(n.href)+'"]');if(s)return t.instance=s,Je(s),s;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Je(s=(e.ownerDocument||e).createElement("style")),gd(s,"style",i),nh(s,n.precedence,e),t.instance=s;case"stylesheet":i=Xd(n.href);var a=e.querySelector(Yd(i));if(a)return t.state.loading|=4,t.instance=a,Je(a),a;s=Jd(n),(i=qd.get(i))&&rh(s,i),Je(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),gd(a,"link",s),t.state.loading|=4,nh(a,n.precedence,e),t.instance=a;case"script":return a=Zd(n.src),(i=e.querySelector(eh(a)))?(t.instance=i,Je(i),i):(s=n,(i=qd.get(a))&&sh(s=d({},n),i),Je(i=(e=e.ownerDocument||e).createElement("script")),gd(i,"link",s),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,nh(s,n.precedence,e));return t.instance}function nh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function rh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function sh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ih=null;function ah(e,t,n){if(null===ih){var r=new Map,s=ih=new Map;s.set(n,r)}else(r=(s=ih).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ge]||i[Ue]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function oh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function lh(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var ch=0;function uh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)hh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var dh=null;function hh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,dh=new Map,t.forEach(fh,e),dh=null,uh.call(e))}function fh(e,t){if(!(4&t.state.loading)){var n=dh.get(e);if(n)var r=n.get(null);else{n=new Map,dh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=uh.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var ph={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function mh(e,t,n,r,s,i,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.hiddenUpdates=Ce(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function gh(e,t,n,r,s,i,a,o,l,c,u,d){return e=new mh(e,t,n,a,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Vr(3,null,null,t),e.current=i,i.stateNode=e,(t=qs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},bi(i),e}function vh(e){return e?e=zr:zr}function yh(e,t,n,r,s,i){s=vh(s),null===r.context?r.context=s:r.pendingContext=s,(r=Ni(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ki(e,r,t))&&(Jc(n,0,t),Si(n,e,t))}function xh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function bh(e,t){xh(e,t),(e=e.alternate)&&xh(e,t)}function wh(e){if(13===e.tag||31===e.tag){var t=Mr(e,67108864);null!==t&&Jc(t,0,67108864),bh(e,67108864)}}function Nh(e){if(13===e.tag||31===e.tag){var t=Xc(),n=Mr(e,t=Oe(t));null!==n&&Jc(n,0,t),bh(e,t)}}var kh=!0;function Sh(e,t,n,r){var s=R.T;R.T=null;var i=P.p;try{P.p=2,Eh(e,t,n,r)}finally{P.p=i,R.T=s}}function _h(e,t,n,r){var s=R.T;R.T=null;var i=P.p;try{P.p=8,Eh(e,t,n,r)}finally{P.p=i,R.T=s}}function Eh(e,t,n,r){if(kh){var s=Th(r);if(null===s)id(e,t,r,jh,n),Uh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Rh=zh(Rh,e,t,n,r,s),!0;case"dragenter":return Ph=zh(Ph,e,t,n,r,s),!0;case"mouseover":return Oh=zh(Oh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Lh.set(i,zh(Lh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dh.set(i,zh(Dh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Uh(e,r),4&t&&-1<Fh.indexOf(e)){for(;null!==s;){var i=Qe(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Se(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ye(a);o.entanglements[1]|=l,a&=~l}Uu(i),!(6&vc)&&(Fc=ae()+500,zu(0))}}break;case 31:case 13:null!==(o=Mr(i,2))&&Jc(o,0,2),ru(),bh(i,2)}if(null===(i=Th(r))&&id(e,t,r,jh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else id(e,t,r,null,n)}}function Th(e){return Ch(e=Ft(e))}var jh=null;function Ch(e){if(jh=null,null!==(e=Ke(e))){var t=i(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=o(t)))return e;e=null}else if(31===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return jh=e,null}function Ah(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case le:return 2;case ce:return 8;case ue:case de:return 32;case he:return 268435456;default:return 32}default:return 32}}var Ih=!1,Rh=null,Ph=null,Oh=null,Lh=new Map,Dh=new Map,Mh=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uh(e,t){switch(e){case"focusin":case"focusout":Rh=null;break;case"dragenter":case"dragleave":Ph=null;break;case"mouseover":case"mouseout":Oh=null;break;case"pointerover":case"pointerout":Lh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function zh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Qe(t))&&wh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Bh(e){var t=Ke(e.target);if(null!==t){var n=i(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=o(n)))return e.blockedOn=t,void Me(e.priority,function(){Nh(n)})}else if(31===t){if(null!==(t=l(n)))return e.blockedOn=t,void Me(e.priority,function(){Nh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Th(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&wh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Mt=r,n.target.dispatchEvent(r),Mt=null,t.shift()}return!0}function qh(e,t,n){Vh(e)&&n.delete(t)}function Hh(){Ih=!1,null!==Rh&&Vh(Rh)&&(Rh=null),null!==Ph&&Vh(Ph)&&(Ph=null),null!==Oh&&Vh(Oh)&&(Oh=null),Lh.forEach(qh),Dh.forEach(qh)}function $h(t,n){t.blockedOn===n&&(t.blockedOn=null,Ih||(Ih=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hh)))}var Gh=null;function Wh(t){Gh!==t&&(Gh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gh===t&&(Gh=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],s=t[e+2];if("function"!=typeof r){if(null===Ch(r||n))continue;break}var i=Qe(n);null!==i&&(t.splice(e,3),e-=3,so(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Kh(e){function t(t){return $h(t,e)}null!==Rh&&$h(Rh,e),null!==Ph&&$h(Ph,e),null!==Oh&&$h(Oh,e),Lh.forEach(t),Dh.forEach(t);for(var n=0;n<Mh.length;n++){var r=Mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Mh.length&&null===(n=Mh[0]).blockedOn;)Bh(n),null===n.blockedOn&&Mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[ze]||null;if("function"==typeof i)a||Wh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[ze]||null)o=a.formAction;else if(null!==Ch(s))continue}else o=a.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Wh(n)}}}function Qh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Xh(e){this._internalRoot=e}function Yh(e){this._internalRoot=e}Yh.prototype.render=Xh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));yh(t.current,Xc(),e,t,null,null)},Yh.prototype.unmount=Xh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yh(e.current,2,null,e,null,null),ru(),t[Be]=null}},Yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mh.length&&0!==t&&t<Mh[n].priority;n++);Mh.splice(n,0,e),0===n&&Bh(e)}};var Jh=t.version;if("19.2.3"!==Jh)throw Error(r(527,Jh,"19.2.3"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=i(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(s=a.return)){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return c(a),e;if(o===s)return c(a),t;o=o.sibling}throw Error(r(188))}if(n.return!==s.return)n=a,s=o;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,s=o;break}if(u===s){l=!0,s=a,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,s=a;break}if(u===s){l=!0,s=o,n=a;break}u=u.sibling}if(!l)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Zh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{me=ef.inject(Zh),ge=ef}catch(nf){}}return ot.createRoot=function(e,t){if(!s(e))throw Error(r(299));var n=!1,i="",a=jo,o=Co,l=Ao;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=gh(e,1,!1,null,0,n,i,null,a,o,l,Qh),e[Be]=t.current,rd(e),new Xh(t)},ot.hydrateRoot=function(e,t,n){if(!s(e))throw Error(r(299));var i=!1,a="",o=jo,l=Co,c=Ao,u=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=gh(e,1,!0,t,0,i,a,u,o,l,c,Qh)).context=vh(null),n=t.current,(a=Ni(i=Oe(i=Xc()))).callback=null,ki(n,a,i),n=i,t.current.lanes=n,Ae(t,n),Uu(t),e[Be]=t.current,rd(e),new Yh(t)},ot.version="19.2.3",ot}const xt=o((pt||(pt=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),at.exports=yt()),at.exports)),bt={},wt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/BlockDAG-Transfer/"+e}(e))in bt)return;bt[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};var Nt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},St={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new _t;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Et=function(e){return function(e){const t=kt(e);return St.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return St.decodeString(e,!0)}catch(t){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jt=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ct=()=>{try{return jt()||(()=>{if("undefined"==typeof process)return;const e=Nt.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},At=e=>{var t,n;return null===(n=null===(t=Ct())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},It=e=>{const t=At(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Rt=()=>{var e;return null===(e=Ct())||void 0===e?void 0:e.config},Pt=e=>{var t;return null===(t=Ct())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Dt(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Et(JSON.stringify({alg:"none",type:"JWT"})),Et(JSON.stringify(i)),""].join(".")}const Ft={};let Ut=!1;function zt(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Lt(window.location.host)||Ft[e]===t||Ft[e]||Ut)return;function n(e){return`__firebase__banner__${e}`}Ft[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ft))Ft[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ut=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Vt(){return!function(){var e;const t=null===(e=Ct())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class qt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ht.prototype.create)}}class Ht{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace($t,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(s,n):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new qt(r,a,n)}}const $t=/\{\$([^}]+)}/g;function Gt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Wt(n)&&Wt(i)){if(!Gt(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wt(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Qt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Yt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Jt),void 0===r.error&&(r.error=Jt),void 0===r.complete&&(r.complete=Jt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jt(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e){return e&&e._delegate?e._delegate:e}class en{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ot;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:tn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=tn){return this.instances.has(e)}getOptions(e=tn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===tn?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(s){}var r;return n||null}normalizeInstanceIdentifier(e=tn){return this.component?this.component.multipleInstances?e:tn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,an;(an=sn||(sn={}))[an.DEBUG=0]="DEBUG",an[an.VERBOSE=1]="VERBOSE",an[an.INFO=2]="INFO",an[an.WARN=3]="WARN",an[an.ERROR=4]="ERROR",an[an.SILENT=5]="SILENT";const on={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},ln=sn.INFO,cn={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},un=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!cn[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dn{constructor(e){this.name=e,this._logLevel=ln,this._logHandler=un,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?on[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...e),this._logHandler(this,sn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...e),this._logHandler(this,sn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sn.INFO,...e),this._logHandler(this,sn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sn.WARN,...e),this._logHandler(this,sn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...e),this._logHandler(this,sn.ERROR,...e)}}let hn,fn;const pn=new WeakMap,mn=new WeakMap,gn=new WeakMap,vn=new WeakMap,yn=new WeakMap;let xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function bn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(kn(this),t),Nn(pn.get(this))}:function(...t){return Nn(e.apply(kn(this),t))}:function(t,...n){const r=e.call(kn(this),t,...n);return gn.set(r,t.sort?t.sort():[t]),Nn(r)}}function wn(e){return"function"==typeof e?bn(e):(e instanceof IDBTransaction&&function(e){if(mn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});mn.set(e,t)}(e),t=e,(hn||(hn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,xn):e);var t}function Nn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Nn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&pn.set(t,e)}).catch(()=>{}),yn.set(t,e),t}(e);if(vn.has(e))return vn.get(e);const t=wn(e);return t!==e&&(vn.set(e,t),yn.set(t,e)),t}const kn=e=>yn.get(e);const Sn=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],En=new Map;function Tn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(En.get(t))return En.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=_n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Sn.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,s?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),s&&i.done]))[0]};return En.set(t,i),i}xn=(e=>({...e,get:(t,n,r)=>Tn(t,n)||e.get(t,n,r),has:(t,n)=>!!Tn(t,n)||e.has(t,n)}))(xn);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Cn="@firebase/app",An="0.13.2",In=new dn("@firebase/app"),Rn="@firebase/app-compat",Pn="@firebase/analytics-compat",On="@firebase/analytics",Ln="@firebase/app-check-compat",Dn="@firebase/app-check",Mn="@firebase/auth",Fn="@firebase/auth-compat",Un="@firebase/database",zn="@firebase/data-connect",Bn="@firebase/database-compat",Vn="@firebase/functions",qn="@firebase/functions-compat",Hn="@firebase/installations",$n="@firebase/installations-compat",Gn="@firebase/messaging",Wn="@firebase/messaging-compat",Kn="@firebase/performance",Qn="@firebase/performance-compat",Xn="@firebase/remote-config",Yn="@firebase/remote-config-compat",Jn="@firebase/storage",Zn="@firebase/storage-compat",er="@firebase/firestore",tr="@firebase/ai",nr="@firebase/firestore-compat",rr="firebase",sr="[DEFAULT]",ir={[Cn]:"fire-core",[Rn]:"fire-core-compat",[On]:"fire-analytics",[Pn]:"fire-analytics-compat",[Dn]:"fire-app-check",[Ln]:"fire-app-check-compat",[Mn]:"fire-auth",[Fn]:"fire-auth-compat",[Un]:"fire-rtdb",[zn]:"fire-data-connect",[Bn]:"fire-rtdb-compat",[Vn]:"fire-fn",[qn]:"fire-fn-compat",[Hn]:"fire-iid",[$n]:"fire-iid-compat",[Gn]:"fire-fcm",[Wn]:"fire-fcm-compat",[Kn]:"fire-perf",[Qn]:"fire-perf-compat",[Xn]:"fire-rc",[Yn]:"fire-rc-compat",[Jn]:"fire-gcs",[Zn]:"fire-gcs-compat",[er]:"fire-fst",[nr]:"fire-fst-compat",[tr]:"fire-vertex","fire-js":"fire-js",[rr]:"fire-js-all"},ar=new Map,or=new Map,lr=new Map;function cr(e,t){try{e.container.addComponent(t)}catch(n){In.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ur(e){const t=e.name;if(lr.has(t))return In.debug(`There were multiple attempts to register component ${t}.`),!1;lr.set(t,e);for(const n of ar.values())cr(n,e);for(const n of or.values())cr(n,e);return!0}function dr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hr(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Ht("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new en("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="11.10.0";function gr(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:sr,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!=typeof s||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=Rt()),!n)throw fr.create("no-options");const i=ar.get(s);if(i){if(Gt(n,i.options)&&Gt(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const a=new rn(s);for(const l of lr.values())a.addComponent(l);const o=new pr(n,r,a);return ar.set(s,o),o}function vr(e=sr){const t=ar.get(e);if(!t&&e===sr&&Rt())return gr();if(!t)throw fr.create("no-app",{appName:e});return t}function yr(e,t,n){var r;let s=null!==(r=ir[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void In.warn(e.join(" "))}ur(new en(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="firebase-heartbeat-store";let br=null;function wr(){return br||(br=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),o=Nn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Nn(a.result),e.oldVersion,e.newVersion,Nn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(xr)}catch(n){}}}).catch(e=>{throw fr.create("idb-open",{originalErrorMessage:e.message})})),br}async function Nr(e,t){try{const n=(await wr()).transaction(xr,"readwrite"),r=n.objectStore(xr);await r.put(t,kr(e)),await n.done}catch(n){if(n instanceof qt)In.warn(n.message);else{const e=fr.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});In.warn(e.message)}}}function kr(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Er(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_r();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){In.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_r(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Tr(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Tr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Et(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return In.warn(t),""}}}function _r(){return(new Date).toISOString().substring(0,10)}class Er{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await wr()).transaction(xr),n=await t.objectStore(xr).get(kr(e));return await t.done,n}catch(t){if(t instanceof qt)In.warn(t.message);else{const e=fr.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});In.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Tr(e){return Et(JSON.stringify({version:2,heartbeats:e})).length}var jr;jr="",ur(new en("platform-logger",e=>new jn(e),"PRIVATE")),ur(new en("heartbeat",e=>new Sr(e),"PRIVATE")),yr(Cn,An,jr),yr(Cn,An,"esm2017"),yr("fire-js","");function Cr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function Ar(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
yr("firebase","11.10.0","app"),"function"==typeof SuppressedError&&SuppressedError;const Ir=Ar,Rr=new Ht("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pr=new dn("@firebase/auth");function Or(e,...t){Pr.logLevel<=sn.ERROR&&Pr.error(`Auth (${mr}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e,...t){throw Ur(e,...t)}function Dr(e,...t){return Ur(e,...t)}function Mr(e,t,n){const r=Object.assign(Object.assign({},Ir()),{[t]:n});return new Ht("auth","Firebase",r).create(t,{appName:e.name})}function Fr(e){return Mr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ur(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Rr.create(e,...t)}function zr(e,t,...n){if(!e)throw Ur(t,...n)}function Br(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Or(t),new Error(t)}function Vr(e,t){e||Br(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Hr()&&"https:"!==Hr()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return $r()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(e,t){Vr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yr=new Gr(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Zr(e,t,n,r,s={}){return es(e,s,async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Kt(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Lt(e.emulatorConfig.host)&&(l.credentials="include"),Kr.fetch()(await ns(e,e.config.apiHost,n,a),l)})}async function es(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qr),t);try{const t=new ss(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw is(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw is(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw is(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw is(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Mr(e,o,a);Lr(e,o)}}catch(s){if(s instanceof qt)throw s;Lr(e,"network-request-failed",{message:String(s)})}}async function ts(e,t,n,r,s={}){const i=await Zr(e,t,n,r,s);return"mfaPendingCredential"in i&&Lr(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function ns(e,t,n,r){const s=`${t}${n}?${r}`,i=e,a=i.config.emulator?Wr(e.config,s):`${e.config.apiScheme}://${s}`;if(Xr.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function rs(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ss{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Dr(this.auth,"network-request-failed")),Yr.get())})}}function is(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dr(e,t,r);return s.customData._tokenResponse=n,s}function as(e){return void 0!==e&&void 0!==e.enterprise}class os{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rs(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ls(e,t){return Zr(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function us(e){return 1e3*Number(e)}function ds(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Or("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(Or("Failed to decode base64 JWT payload"),null)}catch(s){return Or("Caught error parsing JWT payload as JSON",null==s?void 0:s.toString()),null}}function hs(e){const t=ds(e);return zr(t,"internal-error"),zr(void 0!==t.exp,"internal-error"),zr(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fs(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof qt&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class ps{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cs(this.lastLoginAt),this.creationTime=cs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await fs(e,ls(n,{idToken:r}));zr(null==s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?vs(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ms(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function vs(e){return e.map(e=>{var{providerId:t}=e,n=Cr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zr(e.idToken,"internal-error"),zr(void 0!==e.idToken,"internal-error"),zr(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):hs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zr(0!==e.length,"internal-error");const t=hs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(zr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await es(e,{},async()=>{const n=Kt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await ns(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Lt(e.emulatorConfig.host)&&(o.credentials="include"),Kr.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new ys;return n&&(zr("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(zr("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(zr("number"==typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ys,this.toJSON())}_performRefresh(){return Br("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(e,t){zr("string"==typeof e||void 0===e,"internal-error",{appName:t})}class bs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Cr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ms(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await fs(this,this.stsTokenManager.getToken(this.auth,e));return zr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Zt(e),r=await n.getIdToken(t),s=ds(r);zr(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"==typeof s.firebase?s.firebase:void 0,a=null==i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cs(us(s.auth_time)),issuedAtTime:cs(us(s.iat)),expirationTime:cs(us(s.exp)),signInProvider:a||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Zt(e);await gs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(zr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){zr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await gs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await fs(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Zr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:N}=t;zr(y&&N,e,"internal-error");const k=ys.fromJSON(this.name,N);zr("string"==typeof y,e,"internal-error"),xs(u,e.name),xs(d,e.name),zr("boolean"==typeof x,e,"internal-error"),zr("boolean"==typeof b,e,"internal-error"),xs(h,e.name),xs(f,e.name),xs(p,e.name),xs(m,e.name),xs(g,e.name),xs(v,e.name);const S=new bs({uid:y,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(S.providerData=w.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new ys;r.updateFromServerResponse(t);const s=new bs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await gs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];zr(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?vs(r.providerUserInfo):[],i=!(r.email&&r.passwordHash||(null==s?void 0:s.length)),a=new ys;a.updateFromIdToken(n);const o=new bs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ms(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==s?void 0:s.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Map;function Ns(e){Vr(e instanceof Function,"Expected a class definition");let t=ws.get(e);return t?(Vr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ws.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ks.type="NONE";const Ss=ks;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(e,t,n){return`firebase:${e}:${t}:${n}`}class Es{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=_s(this.userKey,r.apiKey,s),this.fullPersistenceKey=_s("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await ls(this.auth,{idToken:e}).catch(()=>{});return t?bs._fromGetAccountInfoResponse(this.auth,t,e):null}return bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Es(Ns(Ss),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Ns(Ss);const i=_s(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"==typeof t){const r=await ls(e,{idToken:t}).catch(()=>{});if(!r)break;n=await bs._fromGetAccountInfoResponse(e,r,t)}else n=bs._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Es(s,e,n)):new Es(s,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Is(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(js(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ps(t))return"Blackberry";if(Os(t))return"Webos";if(Cs(t))return"Safari";if((t.includes("chrome/")||As(t))&&!t.includes("edge/"))return"Chrome";if(Rs(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function js(e=Bt()){return/firefox\//i.test(e)}function Cs(e=Bt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function As(e=Bt()){return/crios\//i.test(e)}function Is(e=Bt()){return/iemobile/i.test(e)}function Rs(e=Bt()){return/android/i.test(e)}function Ps(e=Bt()){return/blackberry/i.test(e)}function Os(e=Bt()){return/webos/i.test(e)}function Ls(e=Bt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ds(){return function(){const e=Bt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ms(e=Bt()){return Ls(e)||Rs(e)||Os(e)||Ps(e)||/windows phone/i.test(e)||Is(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(e,t=[]){let n;switch(e){case"Browser":n=Ts(Bt());break;case"Worker":n=`${Ts(Bt())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mr}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new Us(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ns(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Es.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ls(this,{idToken:e}),n=await bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null==a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return zr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gs(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(Fr(this));const t=e?Zt(e):null;return t&&zr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&zr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Zr(e,"GET","/v2/passwordPolicy",Jr(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new zs(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ht("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Zr(e,"POST","/v2/accounts:revokeToken",Jr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ns(e)||this._popupRedirectResolver;zr(t,this,"argument-error"),this.redirectPersistenceManager=await Es.create(this,[Ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(zr(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"==typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Pr.logLevel<=sn.WARN&&Pr.warn(`Auth (${mr}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Vs(e){return Zt(e)}class qs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Yt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return zr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $s(e){return Hs.loadJS(e)}class Gs{constructor(){this.enterprise=new Ws}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ws{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ks="NO_RECAPTCHA";class Qs{constructor(e){this.type="recaptcha-enterprise",this.auth=Vs(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return Zr(e,"GET","/v2/recaptchaConfig",Jr(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new os(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const s=window.grecaptcha;as(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ks)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Gs).execute("siteKey",{action:"verify"})}return new Promise((e,s)=>{n(this.auth).then(n=>{if(!t&&as(window.grecaptcha))r(n,e,s);else{if("undefined"==typeof window)return void s(new Error("RecaptchaVerifier is only supported in browser"));let t=Hs.recaptchaEnterpriseScript;0!==t.length&&(t+=n),$s(t).then(()=>{r(n,e,s)}).catch(e=>{s(e)})}}).catch(e=>{s(e)})})}}async function Xs(e,t,n,r=!1,s=!1){const i=new Qs(e);let a;if(s)a=Ks;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ys(e,t,n,r,s){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Xs(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){const s=await Xs(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(e,t,n){const r=Vs(e);zr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=Zs(t),{host:i,port:a}=function(e){const t=Zs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:ei(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ei(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${s}//${i}${o}/`},c=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return zr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void zr(Gt(l,r.config.emulator)&&Gt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Lt(i)?(Dt(`${s}//${i}${o}`),zt("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Zs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ei(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ti{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}async function ni(e,t){return Zr(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(e,t){return ts(e,"POST","/v1/accounts:signInWithPassword",Jr(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class si extends ti{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new si(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new si(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ys(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ri);case"emailLink":return async function(e,t){return ts(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ys(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ni);case"emailLink":return async function(e,t){return ts(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(e,t){return ts(e,"POST","/v1/accounts:signInWithIdp",Jr(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Cr(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new ai(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ii(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ii(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ii(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kt(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){var t,n,r,s,i,a;const o=Qt(Xt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);zr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Qt(Xt(e)).link,n=t?Qt(Xt(t)).deep_link_id:null,r=Qt(Xt(e)).deep_link_id;return(r?Qt(Xt(r)).link:null)||r||n||t||e}(e);try{return new oi(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.providerId=li.PROVIDER_ID}static credential(e,t){return si._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=oi.parseLink(t);return zr(n,"argument-error"),si._fromEmailAndCode(e,n.code,n.tenantId)}}li.PROVIDER_ID="password",li.EMAIL_PASSWORD_SIGN_IN_METHOD="password",li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ci{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends ci{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends ui{constructor(){super("facebook.com")}static credential(e){return ai._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch(t){return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com",di.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hi extends ui{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ai._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return hi.credential(t,n)}catch(r){return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com",hi.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fi extends ui{constructor(){super("github.com")}static credential(e){return ai._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch(t){return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com",fi.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pi extends ui{constructor(){super("twitter.com")}static credential(e,t){return ai._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return pi.credential(t,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function mi(e,t){return ts(e,"POST","/v1/accounts:signUp",Jr(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi.TWITTER_SIGN_IN_METHOD="twitter.com",pi.PROVIDER_ID="twitter.com";class gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await bs._fromIdTokenResponse(e,n,r),i=vi(n);return new gi({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vi(n);return new gi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends qt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,yi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new yi(e,t,n,r)}}function xi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw yi._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function bi(e,t,n=!1){if(hr(e.app))return Promise.reject(Fr(e));const r="signIn",s=await xi(e,r,t),i=await gi._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function wi(e){const t=Vs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Ni(e,t,n){return hr(e.app)?Promise.reject(Fr(e)):async function(e,t){return bi(Vs(e),t)}(Zt(e),li.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&wi(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ki(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Zt(e),s={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},i=await fs(r,async function(e,t){return Zr(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}const Si="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Si,"1"),this.storage.removeItem(Si),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends _i{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Ds()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ei.type="LOCAL";const Ti=Ei;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends _i{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ji.type="SESSION";const Ci=ji;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ai{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ai(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ii(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai.receivers=[];class Ri{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Ii("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Oi(){return void 0!==Pi().WorkerGlobalScope&&"function"==typeof Pi().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Li="firebaseLocalStorageDb",Di="firebaseLocalStorage",Mi="fbase_key";class Fi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ui(e,t){return e.transaction([Di],t?"readwrite":"readonly").objectStore(Di)}function zi(){const e=indexedDB.open(Li,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Di,{keyPath:Mi})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Di)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Li);return new Fi(e).toPromise()}(),t(await zi()))})})}async function Bi(e,t,n){const r=Ui(e,!0).put({[Mi]:t,value:n});return new Fi(r).toPromise()}function Vi(e,t){const n=Ui(e,!0).delete(t);return new Fi(n).toPromise()}class qi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await zi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ai._getInstance(Oi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ri(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zi();return await Bi(e,Si,"1"),await Vi(e,Si),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ui(e,!1).get(t),r=await new Fi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ui(e,!1).getAll();return new Fi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qi.type="LOCAL";const Hi=qi;new Gr(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $i extends ti{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gi(e){return bi(e.auth,new $i(e),e.bypassAuthState)}function Wi(e){const{auth:t,user:n}=e;return zr(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(hr(r.app))return Promise.reject(Fr(r));const s="reauthenticate";try{const i=await fs(e,xi(r,s,t,e),n);zr(i.idToken,r,"internal-error");const a=ds(i.idToken);zr(a,r,"internal-error");const{sub:o}=a;return zr(e.uid===o,r,"user-mismatch"),gi._forOperation(e,s,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&Lr(r,"user-mismatch"),i}}(n,new $i(e),e.bypassAuthState)}async function Ki(e){const{auth:t,user:n}=e;return zr(n,t,"internal-error"),async function(e,t,n=!1){const r=await fs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return gi._forOperation(e,"link",r)}(n,new $i(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gi;case"linkViaPopup":case"linkViaRedirect":return Ki;case"reauthViaPopup":case"reauthViaRedirect":return Wi;default:Lr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Gr(2e3,1e4);class Yi extends Qi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Yi.currentPopupAction&&Yi.currentPopupAction.cancel(),Yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zr(e,this.auth,"internal-error"),e}async onExecution(){Vr(1===this.filter.length,"Popup operations only handle one event");const e=Ii();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Xi.get())};e()}}Yi.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ji="pendingRedirect",Zi=new Map;class ea extends Qi{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Zi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return _s(Ji,e.config.apiKey,e.name)}(t),r=function(e){return Ns(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Zi.set(this.auth._key(),e)}return this.bypassAuthState||Zi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ta(e,t){Zi.set(e._key(),t)}async function na(e,t,n=!1){if(hr(e.app))return Promise.reject(Fr(e));const r=Vs(e),s=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Ns(t):(zr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),i=new ea(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ia(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ia(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sa(e))}saveEventToCache(e){this.cachedEventUids.add(sa(e)),this.lastProcessedEventTime=Date.now()}}function sa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ia({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const aa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oa=/^https?/;async function la(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Zr(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(ca(r))return}catch(n){}Lr(e,"unauthorized-domain")}function ca(e){const t=qr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!oa.test(n))return!1;if(aa.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Gr(3e4,6e4);function da(){const e=Pi().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ha(e){return new Promise((t,n)=>{var r,s,i;function a(){da(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{da(),n(Dr(e,"network-request-failed"))},timeout:ua.get()})}if(null===(s=null===(r=Pi().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Pi().gapi)||void 0===i?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Pi()[t]=()=>{gapi.load?a():n(Dr(e,"network-request-failed"))},$s(`${Hs.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw fa=null,e})}let fa=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pa=new Gr(5e3,15e3),ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(e){const t=e.config;zr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Wr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:mr},s=ga.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Kt(r).slice(1)}`}async function ya(e){const t=await function(e){return fa=fa||ha(e),fa}(e),n=Pi().gapi;return zr(n,e,"internal-error"),t.open({where:document.body,url:va(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ma,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Dr(e,"network-request-failed"),i=Pi().setTimeout(()=>{r(s)},pa.get());function a(){Pi().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ba{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wa(e,t,n,r=500,s=600){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},xa),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Bt().toLowerCase();n&&(o=As(c)?"_blank":n),js(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Bt()){var t;return Ls(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new ba(null);const d=window.open(t||"",o,u);zr(d,e,"popup-blocked");try{d.focus()}catch(h){}return new ba(d)}const Na="__/auth/handler",ka="emulator/auth/handler",Sa=encodeURIComponent("fac");async function _a(e,t,n,r,s,i){zr(e.config.authDomain,e,"auth-domain-config-required"),zr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mr,eventId:s};if(t instanceof ci){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof ui){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Sa}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Na}`;return Wr(e,ka)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Kt(o).slice(1)}${c}`}const Ea="webStorageSupport";const Ta=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ci,this._completeRedirectFn=na,this._overrideRedirectResult=ta}async _openPopup(e,t,n,r){var s;Vr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return wa(e,await _a(e,t,n,qr(),r),Ii())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Pi().location.href=e}(await _a(e,t,n,qr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ya(e),n=new ra(e);return t.register("authEvent",t=>{zr(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ea,{type:Ea},n=>{var r;const s=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ea];void 0!==s&&t(!!s),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=la(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ms()||Cs()||Ls()}};var ja="@firebase/auth",Ca="1.10.8";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Aa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ia=Pt("authIdTokenMaxAge")||300;let Ra=null;var Pa;Hs={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var s,i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Pa="Browser",ur(new en("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;zr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:Pa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fs(Pa)},l=new Bs(n,r,s,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ur(new en("auth-internal",e=>{const t=Vs(e.getProvider("auth").getImmediate());return new Aa(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(ja,Ca,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pa)),yr(ja,Ca,"esm2017");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Oa="firebasestorage.googleapis.com",La="storageBucket";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Da extends qt{constructor(e,t,n=0){super(Ba(e),`Firebase Storage: ${t} (${Ba(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Da.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ba(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ma,Fa,Ua,za;function Ba(e){return"storage/"+e}function Va(){return new Da(Ma.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qa(e){return new Da(Ma.INVALID_ARGUMENT,e)}function Ha(){return new Da(Ma.APP_DELETED,"The Firebase app was deleted.")}function $a(e,t){return new Da(Ma.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ga(e){throw new Da(Ma.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Fa=Ma||(Ma={})).UNKNOWN="unknown",Fa.OBJECT_NOT_FOUND="object-not-found",Fa.BUCKET_NOT_FOUND="bucket-not-found",Fa.PROJECT_NOT_FOUND="project-not-found",Fa.QUOTA_EXCEEDED="quota-exceeded",Fa.UNAUTHENTICATED="unauthenticated",Fa.UNAUTHORIZED="unauthorized",Fa.UNAUTHORIZED_APP="unauthorized-app",Fa.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Fa.INVALID_CHECKSUM="invalid-checksum",Fa.CANCELED="canceled",Fa.INVALID_EVENT_NAME="invalid-event-name",Fa.INVALID_URL="invalid-url",Fa.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Fa.NO_DEFAULT_BUCKET="no-default-bucket",Fa.CANNOT_SLICE_BLOB="cannot-slice-blob",Fa.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Fa.NO_DOWNLOAD_URL="no-download-url",Fa.INVALID_ARGUMENT="invalid-argument",Fa.INVALID_ARGUMENT_COUNT="invalid-argument-count",Fa.APP_DELETED="app-deleted",Fa.INVALID_ROOT_OPERATION="invalid-root-operation",Fa.INVALID_FORMAT="invalid-format",Fa.INTERNAL_ERROR="internal-error",Fa.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class Wa{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Wa.makeFromUrl(e,t)}catch(s){return new Wa(e,"")}if(""===n.path)return n;throw r=e,new Da(Ma.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===Oa?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Wa(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Da(Ma.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Ka{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(e){return"string"==typeof e||e instanceof String}function Xa(e){return Ya()&&e instanceof Blob}function Ya(){return"undefined"!=typeof Blob}function Ja(e,t,n,r){if(r<t)throw qa(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw qa(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(za=Ua||(Ua={}))[za.NO_ERROR=0]="NO_ERROR",za[za.NETWORK_ERROR=1]="NETWORK_ERROR",za[za.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Za{constructor(e,t,n,r,s,i,a,o,l,c,u,d=!0,h=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new eo(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ua.NO_ERROR,s=n.getStatus();if(!t||
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ua.ABORT;return void e(!1,new eo(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new eo(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0!==e}(e)?n():n(e)}catch(i){r(i)}else if(null!==s){const e=Va();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Ha():new Da(Ma.CANCELED,"User canceled the upload/download."))}else{r(new Da(Ma.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new eo(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e,...t){if(c)return void h();if(e)return h(),void u.call(null,e,...t);if(l()||a)return h(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===o?(o=2,n=0):n=1e3*(r+Math.random()),d(n)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class eo{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function to(e,t,n,r,s,i,a=!0,o=!1){const l=function(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Za(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(...e){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(Ya())return new Blob(e);throw new Da(Ma.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ro(e){if("undefined"==typeof atob)throw t="base-64",new Da(Ma.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="raw",io="base64",ao="base64url",oo="data_url";class lo{constructor(e,t){this.data=e,this.contentType=t||null}}function co(e,t){switch(e){case so:return new lo(uo(t));case io:case ao:return new lo(ho(e,t));case oo:return new lo(function(e){const t=new fo(e);return t.base64?ho(io,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw $a(oo,"Malformed data URL.")}return uo(t)}(t.rest)}(t),new fo(t).contentType)}throw Va()}function uo(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function ho(e,t){switch(e){case io:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw $a(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ao:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw $a(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ro(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw $a(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class fo{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $a(oo,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class po{constructor(e,t){let n=0,r="";Xa(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Xa(this.data_)){const i=this.data_,a=(r=e,s=t,(n=i).webkitSlice?n.webkitSlice(r,s):n.mozSlice?n.mozSlice(r,s):n.slice?n.slice(r,s):null);return null===a?null:new po(a)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new po(n,!0)}var n,r,s}static getBlob(...e){if(Ya()){const t=e.map(e=>e instanceof po?e.data_:e);return new po(no.apply(null,t))}{const t=e.map(e=>Qa(e)?co(so,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new po(r,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(e,t){return t}class yo{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||vo}}let xo=null;function bo(){if(xo)return xo;const e=[];e.push(new yo("bucket")),e.push(new yo("generation")),e.push(new yo("metageneration")),e.push(new yo("name","fullPath",!0));const t=new yo("name");t.xform=function(e,t){return function(e){return!Qa(e)||e.length<2?e:go(e)}(t)},e.push(t);const n=new yo("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new yo("timeCreated")),e.push(new yo("updated")),e.push(new yo("md5Hash",null,!0)),e.push(new yo("cacheControl",null,!0)),e.push(new yo("contentDisposition",null,!0)),e.push(new yo("contentEncoding",null,!0)),e.push(new yo("contentLanguage",null,!0)),e.push(new yo("contentType",null,!0)),e.push(new yo("metadata","customMetadata",!0)),xo=e,xo}function wo(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Wa(n,r);return t._makeStorageReference(s)}})}(r,e),r}class No{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(e,t){return function(n,r){const s=function(e,t,n){const r=mo(t);return null===r?null:wo(e,r,n)}(e,r,t);return function(e){if(!e)throw Va()}(null!==s),s}}function So(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Da(Ma.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Da(Ma.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new Da(Ma.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Da(Ma.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function _o(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=function(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}(t,r,s),c=function(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}(l,n),u="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",d="\r\n--"+o+"--",h=po.getBlob(u,r,d);if(null===h)throw new Da(Ma.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const f={name:l.fullPath},p=function(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}(i,e.host,e._protocol),m=e.maxUploadRetryTime,g=new No(p,"POST",ko(e,n),m);return g.urlParams=f,g.headers=a,g.body=h.uploadData(),g.errorHandler=So(t),g}class Eo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,s){if(this.sent_)throw Ga("cannot .send() more than once");if(Lt(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ga("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ga("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ga("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ga("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class To extends Eo{initXhr(){this.xhr_.responseType="text"}}function jo(){return new To}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this._service=e,this._location=t instanceof Wa?t:Wa.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Co(e,t)}get root(){const e=new Wa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return go(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Wa(this._location.bucket,e);return new Co(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Da(Ma.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ao(e,t,n=so,r){e._throwIfRoot("uploadString");const s=co(n,t),i=Object.assign({},r);return null==i.contentType&&null!=s.contentType&&(i.contentType=s.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");const r=_o(e.storage,e._location,bo(),new po(t,!0),n);return e.storage.makeRequestWithTokens(r,jo).then(t=>({metadata:t,ref:e}))}(e,s.data,i)}function Io(e,t){if(e instanceof Oo){const n=e;if(null==n._bucket)throw new Da(Ma.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+La+"' property when initializing the app?");const r=new Co(n,n._bucket);return null!=t?Io(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wa(e._location.bucket,n);return new Co(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t):e}function Ro(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Oo)return new Co(e,t);throw qa("To use ref(service, url), the first argument must be a Storage instance.")}return Io(e,t)}function Po(e,t){const n=null==t?void 0:t[La];return null==n?null:Wa.makeFromBucketSpec(n,e)}class Oo{constructor(e,t,n,r,s,i=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=Oa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Wa.makeFromBucketSpec(r,this._host):Po(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Wa.makeFromBucketSpec(this._url,e):this._bucket=Po(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ja("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ja("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Co(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new Ka(Ha());{const i=to(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Lo="@firebase/storage",Do="0.13.14",Mo="storage";function Fo(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Oo(n,r,s,t,mr)}ur(new en(Mo,Fo,"PUBLIC").setMultipleInstances(!0)),yr(Lo,Do,""),yr(Lo,Do,"esm2017");var Uo,zo,Bo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,zo=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Uo=r}).apply(void 0!==Bo?Bo:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Vo,qo,Ho,$o,Go,Wo,Ko,Qo,Xo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xo&&Xo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function S(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,j=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(I)}};var I=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,P);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}B.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),$={};function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=Z(n),e&&e[M]?e.K(t,n,!!a(r)&&!!r.capture,s):function(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Y(e);if(l||(e[H]=l=new B(e)),n=l.add(t,n,r,o,i),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function W(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(z(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(V(n,e),0==n.h&&(n.src=null,t[H]=null)):z(e)}}}function Q(e){return e in $?$[e]:$[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function Y(e){return(e=e[H])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var s=t;w(t=new P(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=ne(a,r,!0,t)&&s}if(s=ne(a=t.g=e,r,!0,t)&&s,s=ne(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ne(a=t.g=n[i],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,R),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){R.call(this),this.h=e,this.g={}}d(ae,R);var oe=[];function le(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=s.JSON.stringify,ue=s.JSON.parse,de=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}he.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){P.call(this,"d")}function ve(){P.call(this,"c")}d(ge,P),d(ve,P);var ye={},xe=null;function be(){return xe=xe||new ee}function we(e){P.call(this,ye.La,e)}function Ne(e){const t=be();te(t,new we(t))}function ke(e,t){P.call(this,ye.STAT_EVENT,e),this.stat=t}function Se(e){const t=be();te(t,new ke(t,e))}function _e(e,t){P.call(this,ye.Ma,e),this.size=t}function Ee(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ye.La="serverreachability",d(we,P),ye.STAT_EVENT="statevent",d(ke,P),ye.Ma="timingevent",d(_e,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ce,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ie={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Re,he),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ce=new Re;var Le={},De={};function Me(e,t,n){e.L=1,e.v=ct(st(t)),e.m=n,e.P=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),Be(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(oe[0]=s.toString()),s=oe);for(var i=0;i<s.length;i++){var a=G(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,Ve(e,e.I)}function Ve(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ee(c(e.ba,e),t)}function qe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||sn(e.j,e)}function $e(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ye(n.h,e)))if(!e.K&&Ye(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Wt(n)}en(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ee(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else on(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Je(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),a.K){Ze(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),Be(o)),r.g=a}else Zt(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||on(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?on(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Vt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Vt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||Ne(),qe(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=qt(this.g);e="";var i=r.length,a=4==Vt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$e(this),He(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),$e(this),He(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==De){4==h&&(this.s=4,Se(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Se(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Ge(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tn(d),d.M=!0,Se(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),$e(this),He(this)}else je(this.i,this.l,o,null),Ge(this,o);4==h&&$e(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Vt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),$e(this),He(this)}}}catch(h){}},Pe.prototype.cancel=function(){this.J=!0,$e(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ne(),Se(17)),$e(this),this.s=2,He(this)):Ve(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new yt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),at(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new yt(null,this.h))}function st(e){return new rt(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof yt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(bt(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,gt)),e.i=new yt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,vt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,vt=/#/g;function yt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){xt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return xt(e),t=kt(e,t),e.g.has(t)}function Nt(e,t,n){bt(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function _t(){this.g=new de}function Et(e,t,n){const r=n||"";try{tt(e,function(e,n){let s=e;a(e)&&(s=ce(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function jt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ct(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.v=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Ot(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=yt.prototype).add=function(e,t){xt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"==typeof e)wt(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,wt(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Tt,he),Tt.prototype.g=function(){return new jt(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(jt,ee),(e=jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ct(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):It(this),3==this.readyState&&Ct(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Qa=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ot,ee);var Lt=/^https?$/i,Dt=["POST","PUT"];function Mt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),zt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Vt(e)||2!=e.Z()))if(e.u&&4==Vt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==Vt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(nt)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Lt.test(a?a.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<Vt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){Bt(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Bt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Vt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new _t,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Kt(e),3==e.G){var t=e.U++,n=st(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Yt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ct(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}ln(e)}function Wt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Kt(e){Wt(e),e.u&&(s.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),j||(T(),j=!0),C.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Yt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,r,t)}function Yt(e,t){e.H&&y(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Et(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),j||(T(),j=!0),C.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ee(c(e.Fa,e),an(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Yt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(st(t)),n.m=null,n.P=!0,Fe(n,e)}function rn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=be(),new _e(r,n)),Qt(e)}else Zt(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ee(c(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:on(e,5);break;case 4:on(e,10);break;case 3:on(e,6);break;default:on(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function on(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||it(r,"https"),ct(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(St,n,"TestLoadImage: error",!1,t,r),r.onabort=u(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),ln(e),Kt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new rt(null);r&&it(a,r),t&&(a.g=t),i&&at(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Yt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new Tt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function dn(){}function hn(){}function fn(e,t){ee.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ve.call(this),this.status=1}function gn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ce.g(),this.v=this.o?fe(this.o):fe(Ce),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Mt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Dt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Mt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=$t.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Pe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,s,t),lt(n=st(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Yt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Rt(i)))+"&"+t:this.m&&Pt(n,this.m,i)),Je(this.h,s),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),s.T=!0,Me(s,n,null)):Me(s,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Qe(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ee(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Wt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Wt(this),en(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},hn.prototype.g=function(e,t){return new fn(e,t)},d(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Gt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,fn.aa.N.call(this)},d(pn,ge),d(mn,ve),d(gn,dn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},hn.prototype.createWebChannel=hn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Qo=function(){return new hn},Ko=function(){return be()},Wo=ye,Go={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,$o=Ae,Ie.COMPLETE="complete",Ho=Ie,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,qo=pe,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,Vo=Ot}).apply(void 0!==Xo?Xo:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Yo="@firebase/firestore",Jo="4.8.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zo.UNAUTHENTICATED=new Zo(null),Zo.GOOGLE_CREDENTIALS=new Zo("google-credentials-uid"),Zo.FIRST_PARTY=new Zo("first-party-uid"),Zo.MOCK_USER=new Zo("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let el="11.10.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new dn("@firebase/firestore");function nl(){return tl.logLevel}function rl(e,...t){if(tl.logLevel<=sn.DEBUG){const n=t.map(al);tl.debug(`Firestore (${el}): ${e}`,...n)}}function sl(e,...t){if(tl.logLevel<=sn.ERROR){const n=t.map(al);tl.error(`Firestore (${el}): ${e}`,...n)}}function il(e,...t){if(tl.logLevel<=sn.WARN){const n=t.map(al);tl.warn(`Firestore (${el}): ${e}`,...n)}}function al(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ll(e,r,n)}function ll(e,t,n){let r=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(s){r+=" CONTEXT: "+n}throw sl(r),new Error(r)}function cl(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ll(t,s,r)}function ul(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hl extends qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ml{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zo.UNAUTHENTICATED))}shutdown(){}}class gl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vl{constructor(e){this.t=e,this.currentUser=Zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){cl(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new fl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fl,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{rl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(rl("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fl)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(rl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cl("string"==typeof t.accessToken,31837,{l:t}),new pl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cl(null===e||"string"==typeof e,2055,{h:e}),new Zo(e)}}class yl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Zo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new yl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){cl(void 0===this.o,3512);const n=e=>{null!=e.error&&rl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,rl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{rl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):rl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(cl("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new bl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Nl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function _l(e,t){return e<t?-1:e>t?1:0}function El(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return _l(r,s);{const i=kl(),a=jl(i.encode(Tl(e,n)),i.encode(Tl(t,n)));return 0!==a?a:_l(r,s)}}n+=r>65535?2:1}return _l(e.length,t.length)}function Tl(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function jl(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return _l(e[n],t[n]);return _l(e.length,t.length)}function Cl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="__name__";class Il{constructor(e,t,n){void 0===t?t=0:t>e.length&&ol(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ol(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Il.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Il?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Il.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return _l(e.length,t.length)}static compareSegments(e,t){const n=Il.isNumericId(e),r=Il.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Il.extractNumericId(e).compare(Il.extractNumericId(t)):El(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uo.fromString(e.substring(4,e.length-2))}}class Rl extends Il{construct(e,t,n){return new Rl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new hl(dl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Rl(t)}static emptyPath(){return new Rl([])}}const Pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ol extends Il{construct(e,t,n){return new Ol(e,t,n)}static isValidIdentifier(e){return Pl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ol.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Al}static keyField(){return new Ol([Al])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new hl(dl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new hl(dl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hl(dl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new hl(dl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ol(t)}static emptyPath(){return new Ol([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.path=e}static fromPath(e){return new Ll(Rl.fromString(e))}static fromName(e){return new Ll(Rl.fromString(e).popFirst(5))}static empty(){return new Ll(Rl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ll(new Rl(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(e,t,n){if(!n)throw new hl(dl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ml(e){if(!Ll.isDocumentKey(e))throw new hl(dl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fl(e){if(Ll.isDocumentKey(e))throw new hl(dl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ul(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function zl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":ol(12329,{type:typeof e})}function Bl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hl(dl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zl(e);throw new hl(dl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e,t){const n={typeString:e};return t&&(n.value=t),n}function ql(e,t){if(!Ul(e))throw new hl(dl.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new hl(dl.INVALID_ARGUMENT,n);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-62135596800,$l=1e6;class Gl{static now(){return Gl.fromMillis(Date.now())}static fromDate(e){return Gl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*$l);return new Gl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hl)throw new hl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$l}_compareTo(e){return this.seconds===e.seconds?_l(this.nanoseconds,e.nanoseconds):_l(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ql(e,Gl._jsonSchema))return new Gl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gl._jsonSchemaVersion="firestore/timestamp/1.0",Gl._jsonSchema={type:Vl("string",Gl._jsonSchemaVersion),seconds:Vl("number"),nanoseconds:Vl("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wl{static fromTimestamp(e){return new Wl(e)}static min(){return new Wl(new Gl(0,0))}static max(){return new Wl(new Gl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){return new Ql(e.readTime,e.key,-1)}class Ql{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ql(Wl.min(),Ll.empty(),-1)}static max(){return new Ql(Wl.max(),Ll.empty(),-1)}}function Xl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ll.comparator(e.documentKey,t.documentKey),0!==n?n:_l(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Yl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(e){if(e.code!==dl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;rl("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ol(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Zl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Zl?t:Zl.resolve(t)}catch(t){return Zl.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Zl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Zl.reject(t)}static resolve(e){return new Zl((t,n)=>{t(e)})}static reject(e){return new Zl((t,n)=>{n(e)})}static waitFor(e){return new Zl((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Zl.resolve(!1);for(const n of e)t=t.next(e=>e?Zl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Zl((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Zl((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ec(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}tc.ue=-1;function nc(e){return null==e}function rc(e){return 0===e&&1/e==-1/0}function sc(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function ic(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t){this.comparator=e,this.root=t||dc.EMPTY}insert(e,t){return new cc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dc.BLACK,null,null))}remove(e){return new cc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dc{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:dc.RED,this.left=null!=r?r:dc.EMPTY,this.right=null!=s?s:dc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new dc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ol(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ol(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ol(27949);return e+(this.isRed()?0:1)}}dc.EMPTY=null,dc.RED=!0,dc.BLACK=!1,dc.EMPTY=new class{constructor(){this.size=0}get key(){throw ol(57766)}get value(){throw ol(16141)}get color(){throw ol(16727)}get left(){throw ol(29726)}get right(){throw ol(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new dc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hc{constructor(e){this.comparator=e,this.data=new cc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fc(this.data.getIterator())}getIteratorFrom(e){return new fc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof hc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hc(this.comparator);return t.data=e,t}}class fc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.fields=e,e.sort(Ol.comparator)}static empty(){return new pc([])}unionWith(e){let t=new hc(Ol.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new mc("Invalid base64 string: "+t):t}}(e);return new gc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new gc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _l(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gc.EMPTY_BYTE_STRING=new gc("");const vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(e){if(cl(!!e,39018),"string"==typeof e){let t=0;const n=vc.exec(e);if(cl(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xc(e.seconds),nanos:xc(e.nanos)}}function xc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bc(e){return"string"==typeof e?gc.fromBase64String(e):gc.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="server_timestamp",Nc="__type__",kc="__previous_value__",Sc="__local_write_time__";function _c(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Nc])||void 0===n?void 0:n.stringValue)===wc}function Ec(e){const t=e.mapValue.fields[kc];return _c(t)?Ec(t):t}function Tc(e){const t=yc(e.mapValue.fields[Sc].timestampValue);return new Gl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Cc="(default)";class Ac{constructor(e,t){this.projectId=e,this.database=t||Cc}static empty(){return new Ac("","")}get isDefaultDatabase(){return this.database===Cc}isEqual(e){return e instanceof Ac&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="__type__",Rc="__max__",Pc={},Oc="__vector__",Lc="value";function Dc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_c(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rc}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ic])||void 0===n?void 0:n.stringValue)===Oc}(e)?10:11:ol(28295,{value:e})}function Mc(e,t){if(e===t)return!0;const n=Dc(e);if(n!==Dc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tc(e).isEqual(Tc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yc(e.timestampValue),r=yc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,bc(e.bytesValue).isEqual(bc(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xc(e.geoPointValue.latitude)===xc(t.geoPointValue.latitude)&&xc(e.geoPointValue.longitude)===xc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xc(e.integerValue)===xc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xc(e.doubleValue),r=xc(t.doubleValue);return n===r?rc(n)===rc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cl(e.arrayValue.values||[],t.arrayValue.values||[],Mc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ac(n)!==ac(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Mc(n[s],r[s])))return!1;return!0}(e,t);default:return ol(52216,{left:e})}var r}function Fc(e,t){return void 0!==(e.values||[]).find(e=>Mc(e,t))}function Uc(e,t){if(e===t)return 0;const n=Dc(e),r=Dc(t);if(n!==r)return _l(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _l(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xc(e.integerValue||e.doubleValue),r=xc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zc(e.timestampValue,t.timestampValue);case 4:return zc(Tc(e),Tc(t));case 5:return El(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bc(e),r=bc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=_l(n[s],r[s]);if(0!==e)return e}return _l(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=_l(xc(e.latitude),xc(t.latitude));return 0!==n?n:_l(xc(e.longitude),xc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Lc])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Lc])||void 0===r?void 0:r.arrayValue,u=_l((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Bc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Pc&&t===Pc)return 0;if(e===Pc)return 1;if(t===Pc)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=El(r[a],i[a]);if(0!==e)return e;const t=Uc(n[r[a]],s[i[a]]);if(0!==t)return t}return _l(r.length,i.length)}(e.mapValue,t.mapValue);default:throw ol(23264,{le:n})}}function zc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _l(e,t);const n=yc(e),r=yc(t),s=_l(n.seconds,r.seconds);return 0!==s?s:_l(n.nanos,r.nanos)}function Bc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Uc(n[s],r[s]);if(e)return e}return _l(n.length,r.length)}function Vc(e){return qc(e)}function qc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bc(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Ll.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${qc(e.fields[s])}`;return n+"}"}(e.mapValue):ol(61005,{value:e})}function Hc(e){switch(Dc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ec(e);return t?16+Hc(t):16;case 5:return 2*e.stringValue.length;case 6:return bc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Hc(t),0);case 10:case 11:return function(e){let t=0;return oc(e.fields,(e,n)=>{t+=e.length+Hc(n)}),t}(e.mapValue);default:throw ol(13486,{value:e})}}function $c(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Gc(e){return!!e&&"integerValue"in e}function Wc(e){return!!e&&"arrayValue"in e}function Kc(e){return!!e&&"nullValue"in e}function Qc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xc(e){return!!e&&"mapValue"in e}function Yc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return oc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Yc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yc(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Jc{constructor(e){this.value=e}static empty(){return new Jc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Ol.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Yc(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){oc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Jc(Yc(this.value))}}function Zc(e){const t=[];return oc(e.fields,(e,n)=>{const r=new Ol([e]);if(Xc(n)){const e=Zc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new pc(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class eu{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new eu(e,0,Wl.min(),Wl.min(),Wl.min(),Jc.empty(),0)}static newFoundDocument(e,t,n,r){return new eu(e,1,t,Wl.min(),n,r,0)}static newNoDocument(e,t){return new eu(e,2,t,Wl.min(),Wl.min(),Jc.empty(),0)}static newUnknownDocument(e,t){return new eu(e,3,t,Wl.min(),Wl.min(),Jc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof eu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new eu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.position=e,this.inclusive=t}}function nu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ll.comparator(Ll.fromName(a.referenceValue),n.key):Uc(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ru(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mc(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t="asc"){this.field=e,this.dir=t}}function iu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{}class ou extends au{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pu(e,t,n):"array-contains"===t?new yu(e,n):"in"===t?new xu(e,n):"not-in"===t?new bu(e,n):"array-contains-any"===t?new wu(e,n):new ou(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new mu(e,n):new gu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Uc(t,this.value)):null!==t&&Dc(this.value)===Dc(t)&&this.matchesComparison(Uc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ol(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lu extends au{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new lu(e,t)}matches(e){return cu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cu(e){return"and"===e.op}function uu(e){return function(e){for(const t of e.filters)if(t instanceof lu)return!1;return!0}(e)&&cu(e)}function du(e){if(e instanceof ou)return e.field.canonicalString()+e.op.toString()+Vc(e.value);if(uu(e))return e.filters.map(e=>du(e)).join(",");{const t=e.filters.map(e=>du(e)).join(",");return`${e.op}(${t})`}}function hu(e,t){return e instanceof ou?(n=e,(r=t)instanceof ou&&n.op===r.op&&n.field.isEqual(r.field)&&Mc(n.value,r.value)):e instanceof lu?function(e,t){return t instanceof lu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&hu(n,t.filters[r]),!0)}(e,t):void ol(19439);var n,r}function fu(e){return e instanceof ou?`${(t=e).field.canonicalString()} ${t.op} ${Vc(t.value)}`:e instanceof lu?function(e){return e.op.toString()+" {"+e.getFilters().map(fu).join(" ,")+"}"}(e):"Filter";var t}class pu extends ou{constructor(e,t,n){super(e,t,n),this.key=Ll.fromName(n.referenceValue)}matches(e){const t=Ll.comparator(e.key,this.key);return this.matchesComparison(t)}}class mu extends ou{constructor(e,t){super(e,"in",t),this.keys=vu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gu extends ou{constructor(e,t){super(e,"not-in",t),this.keys=vu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ll.fromName(e.referenceValue))}class yu extends ou{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wc(t)&&Fc(t.arrayValue,this.value)}}class xu extends ou{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fc(this.value.arrayValue,t)}}class bu extends ou{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Fc(this.value.arrayValue,t)}}class wu extends ou{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Fc(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t=null,n=[],r=[],s=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Pe=null}}function ku(e,t=null,n=[],r=[],s=null,i=null,a=null){return new Nu(e,t,n,r,s,i,a)}function Su(e){const t=ul(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>du(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),nc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Vc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Vc(e)).join(",")),t.Pe=e}return t.Pe}function _u(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!iu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ru(e.startAt,t.startAt)&&ru(e.endAt,t.endAt)}function Eu(e){return Ll.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t=null,n=[],r=[],s=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ju(e){return new Tu(e)}function Cu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Au(e){return null!==e.collectionGroup}function Iu(e){const t=ul(e);if(null===t.Te){t.Te=[];const e=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new hc(Ol.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new su(r,n))}),e.has(Ol.keyField().canonicalString())||t.Te.push(new su(Ol.keyField(),n))}return t.Te}function Ru(e){const t=ul(e);return t.Ie||(t.Ie=function(e,t){if("F"===e.limitType)return ku(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new su(e.field,t)});const n=e.endAt?new tu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new tu(e.startAt.position,e.startAt.inclusive):null;return ku(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Iu(e))),t.Ie}function Pu(e,t){const n=e.filters.concat([t]);return new Tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ou(e,t,n){return new Tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lu(e,t){return _u(Ru(e),Ru(t))&&e.limitType===t.limitType}function Du(e){return`${Su(Ru(e))}|lt:${e.limitType}`}function Mu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>fu(e)).join(", ")}]`),nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Vc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Vc(e)).join(",")),`Target(${t})`}(Ru(e))}; limitType=${e.limitType})`}function Fu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ll.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Iu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=nu(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,Iu(n),r)||n.endAt&&!function(e,t,n){const r=nu(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,Iu(n),r)));var n,r}function Uu(e){return(t,n)=>{let r=!1;for(const s of Iu(e)){const e=zu(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function zu(e,t,n){const r=e.field.isKeyField()?Ll.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Uc(r,s):ol(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ol(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){oc(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return lc(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new cc(Ll.comparator);function qu(){return Vu}const Hu=new cc(Ll.comparator);function $u(...e){let t=Hu;for(const n of e)t=t.insert(n.key,n);return t}function Gu(e){let t=Hu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Wu(){return Qu()}function Ku(){return Qu()}function Qu(){return new Bu(e=>e.toString(),(e,t)=>e.isEqual(t))}const Xu=new cc(Ll.comparator),Yu=new hc(Ll.comparator);function Ju(...e){let t=Yu;for(const n of e)t=t.add(n);return t}const Zu=new hc(_l);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ed(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(t)?"-0":t}}function td(e){return{integerValue:""+e}}function nd(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?td(t):ed(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function sd(e,t,n){return e instanceof od?function(e,t){const n={fields:{[Nc]:{stringValue:wc},[Sc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_c(t)&&(t=Ec(t)),t&&(n.fields[kc]=t),{mapValue:n}}(n,t):e instanceof ld?cd(e,t):e instanceof ud?dd(e,t):function(e,t){const n=ad(e,t),r=fd(n)+fd(e.Ee);return Gc(n)&&Gc(e.Ee)?td(r):ed(e.serializer,r)}(e,t)}function id(e,t,n){return e instanceof ld?cd(e,t):e instanceof ud?dd(e,t):n}function ad(e,t){return e instanceof hd?Gc(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class od extends rd{}class ld extends rd{constructor(e){super(),this.elements=e}}function cd(e,t){const n=pd(t);for(const r of e.elements)n.some(e=>Mc(e,r))||n.push(r);return{arrayValue:{values:n}}}class ud extends rd{constructor(e){super(),this.elements=e}}function dd(e,t){let n=pd(t);for(const r of e.elements)n=n.filter(e=>!Mc(e,r));return{arrayValue:{values:n}}}class hd extends rd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function fd(e){return xc(e.integerValue||e.doubleValue)}function pd(e){return Wc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class md{constructor(e,t){this.version=e,this.transformResults=t}}class gd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gd}static exists(e){return new gd(void 0,e)}static updateTime(e){return new gd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yd{}function xd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cd(e.key,gd.none()):new Sd(e.key,e.data,gd.none());{const n=e.data,r=Jc.empty();let s=new hc(Ol.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new _d(e.key,r,new pc(s.toArray()),gd.none())}}function bd(e,t,n){var r;e instanceof Sd?function(e,t,n){const r=e.value.clone(),s=Td(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _d?function(e,t,n){if(!vd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Td(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ed(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function wd(e,t,n,r){return e instanceof Sd?function(e,t,n,r){if(!vd(e.precondition,t))return n;const s=e.value.clone(),i=jd(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof _d?function(e,t,n,r){if(!vd(e.precondition,t))return n;const s=jd(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ed(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(s=t,i=n,vd(e.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):i);var s,i}function Nd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=ad(r.transform,e||null);null!=s&&(null===n&&(n=Jc.empty()),n.set(r.field,s))}return n||null}function kd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Cl(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof ld&&r instanceof ld||n instanceof ud&&r instanceof ud?Cl(n.elements,r.elements,Mc):n instanceof hd&&r instanceof hd?Mc(n.Ee,r.Ee):n instanceof od&&r instanceof od);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Sd extends yd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _d extends yd{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ed(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Td(e,t,n){const r=new Map;cl(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,id(a,o,n[s]))}return r}function jd(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,sd(e,i,t))}return r}class Cd extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ad extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&bd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=wd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=wd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ku();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=xd(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Wl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ju())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(e,t)=>kd(e,t))&&Cl(this.baseMutations,e.baseMutations,(e,t)=>kd(e,t))}}class Rd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cl(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=function(){return Xu}();const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Rd(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ld,Dd;function Md(e){if(void 0===e)return sl("GRPC error has no .code"),dl.UNKNOWN;switch(e){case Ld.OK:return dl.OK;case Ld.CANCELLED:return dl.CANCELLED;case Ld.UNKNOWN:return dl.UNKNOWN;case Ld.DEADLINE_EXCEEDED:return dl.DEADLINE_EXCEEDED;case Ld.RESOURCE_EXHAUSTED:return dl.RESOURCE_EXHAUSTED;case Ld.INTERNAL:return dl.INTERNAL;case Ld.UNAVAILABLE:return dl.UNAVAILABLE;case Ld.UNAUTHENTICATED:return dl.UNAUTHENTICATED;case Ld.INVALID_ARGUMENT:return dl.INVALID_ARGUMENT;case Ld.NOT_FOUND:return dl.NOT_FOUND;case Ld.ALREADY_EXISTS:return dl.ALREADY_EXISTS;case Ld.PERMISSION_DENIED:return dl.PERMISSION_DENIED;case Ld.FAILED_PRECONDITION:return dl.FAILED_PRECONDITION;case Ld.ABORTED:return dl.ABORTED;case Ld.OUT_OF_RANGE:return dl.OUT_OF_RANGE;case Ld.UNIMPLEMENTED:return dl.UNIMPLEMENTED;case Ld.DATA_LOSS:return dl.DATA_LOSS;default:return ol(39323,{code:e})}}(Dd=Ld||(Ld={}))[Dd.OK=0]="OK",Dd[Dd.CANCELLED=1]="CANCELLED",Dd[Dd.UNKNOWN=2]="UNKNOWN",Dd[Dd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dd[Dd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dd[Dd.NOT_FOUND=5]="NOT_FOUND",Dd[Dd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dd[Dd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dd[Dd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dd[Dd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dd[Dd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dd[Dd.ABORTED=10]="ABORTED",Dd[Dd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dd[Dd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dd[Dd.INTERNAL=13]="INTERNAL",Dd[Dd.UNAVAILABLE=14]="UNAVAILABLE",Dd[Dd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fd=new Uo([4294967295,4294967295],0);function Ud(e){const t=kl().encode(e),n=new zo;return n.update(t),new Uint8Array(n.digest())}function zd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Uo([n,r],0),new Uo([s,i],0)]}class Bd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Vd(`Invalid padding: ${t}`);if(n<0)throw new Vd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Vd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Vd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Uo.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(Uo.fromNumber(n)));return 1===r.compare(Fd)&&(r=new Uo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Ud(e),[n,r]=zd(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Bd(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=Ud(e),[n,r]=zd(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Vd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new qd(Wl.min(),r,new cc(_l),qu(),Ju())}}class Hd{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hd(n,t,Ju(),Ju(),Ju())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Gd{constructor(e,t){this.targetId=e,this.De=t}}class Wd{constructor(e,t,n=gc.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Kd{constructor(){this.ve=0,this.Ce=Yd(),this.Fe=gc.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ju(),t=Ju(),n=Ju();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ol(38017,{changeType:s})}}),new Hd(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Yd()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,cl(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Qd{constructor(e){this.We=e,this.Ge=new Map,this.ze=qu(),this.je=Xd(),this.Je=Xd(),this.He=new cc(_l)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:ol(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(Eu(s))if(0===n){const e=new Ll(s.path);this.Xe(t,e,eu.newNoDocument(e,Wl.min()))}else cl(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=bc(n).toUint8Array()}catch(o){if(o instanceof mc)return il("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Bd(i,r,s)}catch(o){return il(o instanceof Vd?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&Eu(s.target)){const t=new Ll(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,eu.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Ju();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new qd(e,t,this.He,this.ze,n);return this.ze=qu(),this.je=Xd(),this.Je=Xd(),this.He=new cc(_l),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Kd,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new hc(_l),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new hc(_l),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||rl("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Kd),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new cc(Ll.comparator)}function Yd(){return new cc(Ll.comparator)}const Jd=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Zd=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),eh=(()=>({and:"AND",or:"OR"}))();class th{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nh(e,t){return e.useProto3Json||nc(t)?t:{value:t}}function rh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ih(e,t){return rh(e,t.toTimestamp())}function ah(e){return cl(!!e,49232),Wl.fromTimestamp(function(e){const t=yc(e);return new Gl(t.seconds,t.nanos)}(e))}function oh(e,t){return lh(e,t).canonicalString()}function lh(e,t){const n=(r=e,new Rl(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function ch(e){const t=Rl.fromString(e);return cl(Th(t),10190,{key:t.toString()}),t}function uh(e,t){return oh(e.databaseId,t.path)}function dh(e,t){const n=ch(t);if(n.get(1)!==e.databaseId.projectId)throw new hl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ll(ph(n))}function hh(e,t){return oh(e.databaseId,t)}function fh(e){return new Rl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ph(e){return cl(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function mh(e,t,n){return{name:uh(e,t),fields:n.value.mapValue.fields}}function gh(e,t){return{documents:[hh(e,t.path)]}}function vh(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hh(e,s);const i=function(e){if(0!==e.length)return _h(lu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:kh((t=e).field),direction:bh(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=nh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s};var l}function yh(e){let t=function(e){const t=ch(e);return 4===t.length?Rl.emptyPath():ph(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){cl(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=xh(e);return t instanceof lu&&uu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new su(Sh((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,nc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new tu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new tu(n,t)}(n.endAt)),function(e,t,n,r,s,i,a,o){return new Tu(e,t,n,r,s,i,a,o)}(t,s,a,i,o,"F",l,c)}function xh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sh(e.unaryFilter.field);return ou.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sh(e.unaryFilter.field);return ou.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sh(e.unaryFilter.field);return ou.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sh(e.unaryFilter.field);return ou.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ol(61313);default:return ol(60726)}}(e):void 0!==e.fieldFilter?(t=e,ou.create(Sh(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ol(58110);default:return ol(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return lu.create(e.compositeFilter.filters.map(e=>xh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ol(1026)}}(e.compositeFilter.op))}(e):ol(30097,{filter:e});var t}function bh(e){return Jd[e]}function wh(e){return Zd[e]}function Nh(e){return eh[e]}function kh(e){return{fieldPath:e.canonicalString()}}function Sh(e){return Ol.fromServerFormat(e.fieldPath)}function _h(e){return e instanceof ou?function(e){if("=="===e.op){if(Qc(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NAN"}};if(Kc(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qc(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NOT_NAN"}};if(Kc(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(e.field),op:wh(e.op),value:e.value}}}(e):e instanceof lu?function(e){const t=e.getFilters().map(e=>_h(e));return 1===t.length?t[0]:{compositeFilter:{op:Nh(e.op),filters:t}}}(e):ol(54877,{filter:e})}function Eh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Th(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,n,r,s=Wl.min(),i=Wl.min(),a=gc.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new jh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.gt=e}}function Ah(e){const t=yh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ou(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.Dn=new Rh}addToCollectionParentIndex(e,t){return this.Dn.add(t),Zl.resolve()}getCollectionParents(e,t){return Zl.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Zl.resolve()}deleteFieldIndex(e,t){return Zl.resolve()}deleteAllFieldIndexes(e){return Zl.resolve()}createTargetIndexes(e,t){return Zl.resolve()}getDocumentsMatchingTarget(e,t){return Zl.resolve(null)}getIndexType(e,t){return Zl.resolve(0)}getFieldIndexes(e,t){return Zl.resolve([])}getNextCollectionGroupToUpdate(e){return Zl.resolve(null)}getMinOffset(e,t){return Zl.resolve(Ql.min())}getMinOffsetFromCollectionGroup(e,t){return Zl.resolve(Ql.min())}updateCollectionGroup(e,t,n){return Zl.resolve()}updateIndexEntries(e,t){return Zl.resolve()}}class Rh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hc(Rl.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new hc(Rl.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oh=41943040;class Lh{static withCacheSize(e){return new Lh(e,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lh.DEFAULT_COLLECTION_PERCENTILE=10,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lh.DEFAULT=new Lh(Oh,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lh.DISABLED=new Lh(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dh{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Dh(0)}static ur(){return new Dh(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="LruGarbageCollector";function Fh([e,t],[n,r]){const s=_l(e,n);return 0===s?_l(t,r):s}class Uh{constructor(e){this.Tr=e,this.buffer=new hc(Fh),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Fh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){rl(Mh,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ec(e)?rl(Mh,"Ignoring IndexedDB error during garbage collection: ",e):await Jl(e)}await this.Rr(3e5)})}}class Bh{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Zl.resolve(tc.ue);const n=new Uh(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rl("LruGarbageCollector","Garbage collection skipped; disabled"),Zl.resolve(Ph)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(rl("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ph):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(rl("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),nl()<=sn.DEBUG&&rl("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${r} in `+(a-i)+`ms\n\tRemoved ${s} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-c}ms`),Zl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vh{constructor(){this.changes=new Bu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,eu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Zl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&wd(n.mutation,e,pc.empty(),Gl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ju()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Ju()){const r=Wu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=$u();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Wu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ju()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=qu();const i=Qu(),a=Qu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof _d)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),wd(a.mutation,t,a.mutation.getFieldMask(),Gl.now())):i.set(t.key,pc.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new qh(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Qu();let r=new cc((e,t)=>e-t),s=Ju();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||pc.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ju()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Ku();l.forEach(e=>{if(!s.has(e)){const r=xd(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Zl.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return s=t,Ll.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Au(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var s}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Zl.resolve(Wu());let a=-1,o=s;return i.next(t=>Zl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Zl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Ju())).next(e=>({batchId:a,changes:Gu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ll(t)).next(e=>{let t=$u();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=$u();return this.indexManager.getCollectionParents(e,s).next(a=>Zl.forEach(a,a=>{const o=(l=t,c=a.child(s),new Tu(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,eu.newInvalidDocument(r)))});let n=$u();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&wd(i.mutation,r,pc.empty(),Gl.now()),Fu(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Zl.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,{id:(n=t).id,version:n.version,createTime:ah(n.createTime)}),Zl.resolve();var n}getNamedQuery(e,t){return Zl.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,{name:(n=t).name,query:Ah(n.bundledQuery),readTime:ah(n.readTime)}),Zl.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this.overlays=new cc(Ll.comparator),this.kr=new Map}getOverlay(e,t){return Zl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wu();return Zl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),Zl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),Zl.resolve()}getOverlaysForCollection(e,t,n){const r=Wu(),s=t.length+1,i=new Ll(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Zl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new cc((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Wu(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Wu(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Zl.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Pd(t,n));let s=this.kr.get(t);void 0===s&&(s=Ju(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.sessionToken=gc.EMPTY_BYTE_STRING}getSessionToken(e){return Zl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Zl.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this.qr=new hc(Qh.Qr),this.$r=new hc(Qh.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Qh(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Qh(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Ll(new Rl([])),n=new Qh(t,e),r=new Qh(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ll(new Rl([])),n=new Qh(t,e),r=new Qh(t,e+1);let s=Ju();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Qh(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Qh{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ll.comparator(e.key,t.key)||_l(e.Hr,t.Hr)}static Ur(e,t){return _l(e.Hr,t.Hr)||Ll.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new hc(Qh.Qr)}checkEmpty(e){return Zl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Id(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Yr=this.Yr.add(new Qh(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Zl.resolve(i)}lookupMutationBatch(e,t){return Zl.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return Zl.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Zl.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return Zl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Qh(t,0),r=new Qh(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),Zl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hc(_l);return t.forEach(e=>{const t=new Qh(e,0),r=new Qh(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),Zl.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ll.isDocumentKey(s)||(s=s.child(""));const i=new Qh(new Ll(s),0);let a=new hc(_l);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},i),Zl.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){cl(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return Zl.forEach(t.mutations,r=>{const s=new Qh(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new Qh(t,0),r=this.Yr.firstAfterOrEqual(n);return Zl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Zl.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.ni=e,this.docs=new cc(Ll.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Zl.resolve(n?n.document.mutableCopy():eu.newInvalidDocument(t))}getEntries(e,t){let n=qu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():eu.newInvalidDocument(e))}),Zl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=qu();const i=t.path,a=new Ll(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Xl(Kl(a),n)<=0||(r.has(a.key)||Fu(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Zl.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ol(9500)}ri(e,t){return Zl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Jh(this)}getSize(e){return Zl.resolve(this.size)}}class Jh extends Vh{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),Zl.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.persistence=e,this.ii=new Bu(e=>Su(e),_u),this.lastRemoteSnapshotVersion=Wl.min(),this.highestTargetId=0,this.si=0,this.oi=new Kh,this.targetCount=0,this._i=Dh.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),Zl.resolve()}getLastRemoteSnapshotVersion(e){return Zl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Zl.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Zl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Zl.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Dh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Zl.resolve()}updateTargetData(e,t){return this.hr(t),Zl.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Zl.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Zl.waitFor(s).next(()=>r)}getTargetCount(e){return Zl.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return Zl.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Zl.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Zl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Zl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return Zl.resolve(n)}containsKey(e,t){return Zl.resolve(this.oi.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.ai={},this.overlays={},this.ui=new tc(0),this.ci=!1,this.ci=!0,this.li=new Wh,this.referenceDelegate=e(this),this.hi=new Zh(this),this.indexManager=new Ih,this.remoteDocumentCache=new Yh(e=>this.referenceDelegate.Pi(e)),this.serializer=new Ch(t),this.Ti=new $h(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new Xh(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){rl("MemoryPersistence","Starting transaction:",e);const r=new tf(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return Zl.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class tf extends Yl{constructor(e){super(),this.currentSequenceNumber=e}}class nf{constructor(e){this.persistence=e,this.Ai=new Kh,this.Ri=null}static Vi(e){return new nf(e)}get mi(){if(this.Ri)return this.Ri;throw ol(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Zl.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Zl.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Zl.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zl.forEach(this.mi,n=>{const r=Ll.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,Wl.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Zl.or([()=>Zl.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class rf{constructor(e,t){this.persistence=e,this.gi=new Bu(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ic(t)),t=sc(e.get(n),t);return ic(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Bh(e,t)}(this,t)}static Vi(e,t){return new rf(e,t)}Ii(){}di(e){return Zl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return Zl.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?Zl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Wl.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Zl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Zl.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Zl.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Zl.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hc(e.data.value)),t}Sr(e,t,n){return Zl.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return Zl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Ju(),r=Ju();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sf(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=Vt()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Bt())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new af;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(nl()<=sn.DEBUG&&rl("QueryEngine","SDK will not create cache indexes for query:",Mu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Zl.resolve()):(nl()<=sn.DEBUG&&rl("QueryEngine","Query:",Mu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(nl()<=sn.DEBUG&&rl("QueryEngine","The SDK decides to create cache indexes for query:",Mu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ru(t))):Zl.resolve())}ps(e,t){if(Cu(t))return Zl.resolve(null);let n=Ru(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ou(t,null,"F"),n=Ru(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Ju(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,Ou(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return Cu(t)||r.isEqual(Wl.min())?Zl.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?Zl.resolve(null):(nl()<=sn.DEBUG&&rl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mu(t)),this.vs(e,i,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Wl.fromTimestamp(1e9===r?new Gl(n+1,0):new Gl(n,r));return new Ql(s,Ll.empty(),t)}(r,-1)).next(e=>e))})}bs(e,t){let n=new hc(Uu(e));return t.forEach((t,r)=>{Fu(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return nl()<=sn.DEBUG&&rl("QueryEngine","Using full collection scan to execute query:",Mu(t)),this.gs.getDocumentsMatchingQuery(e,t,Ql.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="LocalStore";class cf{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new cc(_l),this.Ms=new Bu(e=>Su(e),_u),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hh(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}async function uf(e,t){const n=ul(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Ju();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function df(e){const t=ul(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function hf(e,t){const n=ul(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(gc.EMPTY_BYTE_STRING,Wl.min()).withLastLimboFreeSnapshotVersion(Wl.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.hi.updateTargetData(e,c))});let o=qu(),l=Ju();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(function(e,t,n){let r=Ju(),s=Ju();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=qu();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Wl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):rl(lf,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ls:r,ks:s}})}(e,i,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(Wl.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Zl.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=s,e))}function ff(e,t){const n=ul(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function pf(e,t,n){const r=ul(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(a){if(!ec(a))throw a;rl(lf,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function mf(e,t,n){const r=ul(e);let s=Wl.min(),i=Ju();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ul(e),s=r.Ms.get(n);return void 0!==s?Zl.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,Ru(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:Wl.min(),n?i:Ju())).next(e=>(function(e,t,n){let r=e.xs.get(t)||Wl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,qs:i})))}class gf{constructor(){this.activeTargetIds=Zu}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vf{constructor(){this.Fo=new gf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new gf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{xo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="ConnectivityMonitor";class bf{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){rl(xf,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){rl(xf,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf=null;function Nf(){return null===wf?wf=268435456+Math.round(2147483648*Math.random()):wf++,"0x"+wf.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const kf="RestConnection",Sf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _f{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Cc?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,s){const i=Nf(),a=this.Go(e,t.toUriEncodedString());rl(kf,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,s);const{host:l}=new URL(a),c=Lt(l);return this.jo(e,a,o,n,c).then(t=>(rl(kf,`Received RPC '${e}' ${i}: `,t),t),t=>{throw il(kf,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+el,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Sf[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="WebChannelConnection";class jf extends _f{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Nf();return new Promise((s,a)=>{const o=new Vo;o.setWithCredentials(!0),o.listenOnce(Ho.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case $o.NO_ERROR:const t=o.getResponseJson();rl(Tf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case $o.TIMEOUT:rl(Tf,`RPC '${e}' ${i} timed out`),a(new hl(dl.DEADLINE_EXCEEDED,"Request time out"));break;case $o.HTTP_ERROR:const n=o.getStatus();if(rl(Tf,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(dl).indexOf(t)>=0?t:dl.UNKNOWN}(t.status);a(new hl(e,t.message))}else a(new hl(dl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new hl(dl.UNAVAILABLE,"Connection failed."));break;default:ol(9055,{c_:e,streamId:i,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{rl(Tf,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);rl(Tf,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Nf(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Qo(),a=Ko(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");rl(Tf,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);this.T_(u);let d=!1,h=!1;const f=new Ef({Ho:t=>{h?rl(Tf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(rl(Tf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),rl(Tf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,qo.EventType.OPEN,()=>{h||(rl(Tf,`RPC '${e}' stream ${r} transport opened.`),f.s_())}),p(u,qo.EventType.CLOSE,()=>{h||(h=!0,rl(Tf,`RPC '${e}' stream ${r} transport closed`),f.__(),this.I_(u))}),p(u,qo.EventType.ERROR,t=>{h||(h=!0,il(Tf,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.__(new hl(dl.UNAVAILABLE,"The operation could not be completed")))}),p(u,qo.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];cl(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){rl(Tf,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Ld[e];if(void 0!==t)return Md(t)}(t),s=a.message;void 0===n&&(n=dl.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.__(new hl(n,s)),u.close()}else rl(Tf,`RPC '${e}' stream ${r} received:`,s),f.a_(s)}}),p(a,Wo.STAT_EVENT,t=>{t.stat===Go.PROXY?rl(Tf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Go.NOPROXY&&rl(Tf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Cf(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(e){return new th(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&rl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="PersistentStream";class Pf{constructor(e,t,n,r,s,i,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new If(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===dl.RESOURCE_EXHAUSTED?(sl(t.toString()),sl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===dl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.b_===t&&this.W_(e,n)},t=>{e(()=>{const e=new hl(dl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return rl(Rf,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(rl(Rf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Of extends Pf{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:ol(39313,{state:r}),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(cl(void 0===t||"string"==typeof t,58123),gc.fromBase64String(t||"")):(cl(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),gc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?dl.UNKNOWN:Md(e.code);return new hl(t,e.message||"")}(o);n=new Wd(s,i,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=dh(e,r.document.name),i=ah(r.document.updateTime),a=r.document.createTime?ah(r.document.createTime):Wl.min(),o=new Jc({mapValue:{fields:r.document.fields}}),l=eu.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new $d(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=dh(e,r.document),i=r.readTime?ah(r.readTime):Wl.min(),a=eu.newNoDocument(s,i),o=r.removedTargetIds||[];n=new $d([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=dh(e,r.document),i=r.removedTargetIds||[];n=new $d([],i,s,null)}else{if(!("filter"in t))return ol(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Od(r,s),a=e.targetId;n=new Gd(a,i)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Wl.min():t.readTime?ah(t.readTime):Wl.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=fh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Eu(r)?{documents:gh(e,r)}:{query:vh(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=sh(e,t.resumeToken);const r=nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Wl.min())>0){n.readTime=rh(e,t.snapshotVersion.toTimestamp());const r=nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ol(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=fh(this.serializer),t.removeTarget=e,this.k_(t)}}class Lf extends Pf{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return cl(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,cl(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){cl(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(cl(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ah(e.updateTime):ah(t);return n.isEqual(Wl.min())&&(n=ah(t)),new md(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ah(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=fh(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Sd)n={update:mh(e,t.key,t.value)};else if(t instanceof Cd)n={delete:uh(e,t.key)};else if(t instanceof _d)n={update:mh(e,t.key,t.data),updateMask:Eh(t.fieldMask)};else{if(!(t instanceof Ad))return ol(16599,{Rt:t.type});n={verify:uh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof od)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ld)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ud)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof hd)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw ol(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(s=t.precondition).updateTime?{updateTime:ih(r,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ol(27497))),n;var r,s}(this.serializer,e))};this.k_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{}class Mf extends Df{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new hl(dl.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Wo(e,lh(t,n),r,s,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hl(dl.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Jo(e,lh(t,n),r,i,a,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hl(dl.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Ff{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(sl(t),this._a=!1):rl("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RemoteStore";class zf{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{Qf(this)&&(rl(Uf,"Restarting streams for network reachability change."),await async function(e){const t=ul(e);t.Ia.add(4),await Vf(t),t.Aa.set("Unknown"),t.Ia.delete(4),await Bf(t)}(this))})}),this.Aa=new Ff(n,r)}}async function Bf(e){if(Qf(e))for(const t of e.da)await t(!0)}async function Vf(e){for(const t of e.da)await t(!1)}function qf(e,t){const n=ul(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Kf(n)?Wf(n):fp(n).x_()&&$f(n,t))}function Hf(e,t){const n=ul(e),r=fp(n);n.Ta.delete(t),r.x_()&&Gf(n,t),0===n.Ta.size&&(r.x_()?r.B_():Qf(n)&&n.Aa.set("Unknown"))}function $f(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fp(e).H_(t)}function Gf(e,t){e.Ra.$e(t),fp(e).Y_(t)}function Wf(e){e.Ra=new Qd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),fp(e).start(),e.Aa.aa()}function Kf(e){return Qf(e)&&!fp(e).M_()&&e.Ta.size>0}function Qf(e){return 0===ul(e).Ia.size}function Xf(e){e.Ra=void 0}async function Yf(e){e.Aa.set("Online")}async function Jf(e){e.Ta.forEach((t,n)=>{$f(e,t)})}async function Zf(e,t){Xf(e),Kf(e)?(e.Aa.la(t),Wf(e)):e.Aa.set("Unknown")}async function ep(e,t,n){if(e.Aa.set("Online"),t instanceof Wd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(r){rl(Uf,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await tp(e,r)}else if(t instanceof $d?e.Ra.Ye(t):t instanceof Gd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Wl.min()))try{const t=await df(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(gc.EMPTY_BYTE_STRING,r.snapshotVersion)),Gf(e,t);const s=new jh(r.target,t,n,r.sequenceNumber);$f(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(s){rl(Uf,"Failed to raise snapshot:",s),await tp(e,s)}}async function tp(e,t,n){if(!ec(t))throw t;e.Ia.add(1),await Vf(e),e.Aa.set("Offline"),n||(n=()=>df(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{rl(Uf,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Bf(e)})}function np(e,t){return t().catch(n=>tp(e,n,t))}async function rp(e){const t=ul(e),n=pp(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:-1;for(;sp(t);)try{const e=await ff(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,ip(t,e)}catch(s){await tp(t,s)}ap(t)&&op(t)}function sp(e){return Qf(e)&&e.Pa.length<10}function ip(e,t){e.Pa.push(t);const n=pp(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function ap(e){return Qf(e)&&!pp(e).M_()&&e.Pa.length>0}function op(e){pp(e).start()}async function lp(e){pp(e).na()}async function cp(e){const t=pp(e);for(const n of e.Pa)t.X_(n.mutations)}async function up(e,t,n){const r=e.Pa.shift(),s=Rd.from(r,t,n);await np(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await rp(e)}async function dp(e,t){t&&pp(e).Z_&&await async function(e,t){if(function(e){switch(e){case dl.OK:return ol(64938);case dl.CANCELLED:case dl.UNKNOWN:case dl.DEADLINE_EXCEEDED:case dl.RESOURCE_EXHAUSTED:case dl.INTERNAL:case dl.UNAVAILABLE:case dl.UNAUTHENTICATED:return!1;case dl.INVALID_ARGUMENT:case dl.NOT_FOUND:case dl.ALREADY_EXISTS:case dl.PERMISSION_DENIED:case dl.FAILED_PRECONDITION:case dl.ABORTED:case dl.OUT_OF_RANGE:case dl.UNIMPLEMENTED:case dl.DATA_LOSS:return!0;default:return ol(15467,{code:e})}}(n=t.code)&&n!==dl.ABORTED){const n=e.Pa.shift();pp(e).N_(),await np(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await rp(e)}var n}(e,t),ap(e)&&op(e)}async function hp(e,t){const n=ul(e);n.asyncQueue.verifyOperationInProgress(),rl(Uf,"RemoteStore received new credentials");const r=Qf(n);n.Ia.add(3),await Vf(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Bf(n)}function fp(e){return e.Va||(e.Va=function(e,t,n){const r=ul(e);return r.ia(),new Of(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Yf.bind(null,e),e_:Jf.bind(null,e),n_:Zf.bind(null,e),J_:ep.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),Kf(e)?Wf(e):e.Aa.set("Unknown")):(await e.Va.stop(),Xf(e))})),e.Va}function pp(e){return e.ma||(e.ma=function(e,t,n){const r=ul(e);return r.ia(),new Lf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:lp.bind(null,e),n_:dp.bind(null,e),ea:cp.bind(null,e),ta:up.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await rp(e)):(await e.ma.stop(),e.Pa.length>0&&(rl(Uf,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class mp{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new fl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new mp(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hl(dl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(e,t){if(sl("AsyncQueue",`${t}: ${e}`),ec(e))return new hl(dl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{static emptySet(e){return new vp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ll.comparator(t.key,n.key):(e,t)=>Ll.comparator(e.key,t.key),this.keyedMap=$u(),this.sortedSet=new cc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.fa=new cc(Ll.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ol(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class xp{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new xp(e,t,vp.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class wp{constructor(){this.queries=Np(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=ul(e),r=n.queries;n.queries=Np(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new hl(dl.ABORTED,"Firestore shutting down"))}}function Np(){return new Bu(e=>Du(e),Lu)}async function kp(e,t){const n=ul(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new bp,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const e=gp(a,`Initialization of query '${Mu(t.query)}' failed`);return void t.onError(e)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Tp(n)}async function Sp(e,t){const n=ul(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _p(e,t){const n=ul(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(s)&&(r=!0);t.ya=s}}r&&Tp(n)}function Ep(e,t,n){const r=ul(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Tp(e){e.Da.forEach(e=>{e.next()})}var jp,Cp;(Cp=jp||(jp={})).Fa="default",Cp.Cache="cache";class Ap{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jp.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.key=e}}class Rp{constructor(e){this.key=e}}class Pp{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ju(),this.mutatedKeys=Ju(),this.Xa=Uu(e),this.eu=new vp(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new yp,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Fu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ol(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==i.length||l?{snapshot:new xp(this.query,e.eu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ju(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new Rp(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new Ip(n))}),t}uu(e){this.Ha=e.qs,this.Za=Ju();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return xp.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Op="SyncEngine";class Lp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dp{constructor(e){this.key=e,this.lu=!1}}class Mp{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new Bu(e=>Du(e),Lu),this.Tu=new Map,this.Iu=new Set,this.du=new cc(Ll.comparator),this.Eu=new Map,this.Au=new Kh,this.Ru={},this.Vu=new Map,this.mu=Dh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function Fp(e,t,n=!0){const r=im(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await zp(r,t,n,!0),s}async function Up(e,t){const n=im(e);await zp(n,t,!0,!1)}async function zp(e,t,n,r){const s=await function(e,t){const n=ul(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,Zl.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new jh(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}(e.localStore,Ru(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await async function(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await mf(e.localStore,t.query,!1).then(({documents:e})=>t.view.nu(e,s)));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Zp(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const i=await mf(e.localStore,t,!0),a=new Pp(t,i.qs),o=a.nu(i.documents),l=Hd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Zp(e,n,c._u);const u=new Lp(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&qf(e.remoteStore,s),o}async function Bp(e,t,n){const r=ul(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!Lu(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await pf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hf(r.remoteStore,s.targetId),Yp(r,s.targetId)}).catch(Jl)):(Yp(r,s.targetId),await pf(r.localStore,s.targetId,!0))}async function Vp(e,t){const n=ul(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hf(n.remoteStore,r.targetId))}async function qp(e,t,n){const r=function(e){const t=ul(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kp.bind(null,t),t}(e);try{const e=await function(e,t){const n=ul(e),r=Gl.now(),s=t.reduce((e,t)=>e.add(t.key),Ju());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=qu(),l=Ju();return n.Os.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Nd(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new _d(e.key,t,Zc(t.value.mapValue),gd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Gu(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new cc(_l)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await nm(r,e.changes),await rp(r.remoteStore)}catch(s){const e=gp(s,"Failed to persist write");n.reject(e)}}async function Hp(e,t){const n=ul(e);try{const e=await hf(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(cl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?cl(r.lu,14607):e.removedDocuments.size>0&&(cl(r.lu,42227),r.lu=!1))}),await nm(n,e,t)}catch(r){await Jl(r)}}function $p(e,t,n){const r=ul(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=ul(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&Tp(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gp(e,t,n){const r=ul(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new cc(Ll.comparator);e=e.insert(i,eu.newNoDocument(i,Wl.min()));const n=Ju().add(i),s=new qd(Wl.min(),new Map,new cc(_l),e,n);await Hp(r,s),r.du=r.du.remove(i),r.Eu.delete(t),tm(r)}else await pf(r.localStore,t,!1).then(()=>Yp(r,t,n)).catch(Jl)}async function Wp(e,t){const n=ul(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ul(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Zl.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);cl(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ju();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Xp(n,r,null),Qp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nm(n,e)}catch(s){await Jl(s)}}async function Kp(e,t,n){const r=ul(e);try{const e=await function(e,t){const n=ul(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(cl(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Xp(r,t,n),Qp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nm(r,e)}catch(s){await Jl(s)}}function Qp(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function Xp(e,t,n){const r=ul(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Yp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||Jp(e,t)})}function Jp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Hf(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),tm(e))}function Zp(e,t,n){for(const r of n)r instanceof Ip?(e.Au.addReference(r.key,t),em(e,r)):r instanceof Rp?(rl(Op,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Jp(e,r.key)):ol(19791,{yu:r})}function em(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(rl(Op,"New document in limbo: "+n),e.Iu.add(r),tm(e))}function tm(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new Ll(Rl.fromString(t)),r=e.mu.next();e.Eu.set(r,new Dp(n)),e.du=e.du.insert(n,r),qf(e.remoteStore,new jh(Ru(ju(n.path)),r,"TargetPurposeLimboResolution",tc.ue))}}async function nm(e,t,n){const r=ul(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=sf.Es(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.hu.J_(s),await async function(e,t){const n=ul(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Zl.forEach(t,t=>Zl.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Zl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!ec(r))throw r;rl(lf,"Failed to update sequence numbers: "+r)}for(const s of t){const e=s.targetId;if(!s.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,i))}async function rm(e,t){const n=ul(e);if(!n.currentUser.isEqual(t)){rl(Op,"User change. New user:",t.toKey());const e=await uf(n.localStore,t);n.currentUser=t,s="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).Vu.forEach(e=>{e.forEach(e=>{e.reject(new hl(dl.CANCELLED,s))})}),r.Vu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await nm(n,e.Bs)}var r,s}function sm(e,t){const n=ul(e),r=n.Eu.get(t);if(r&&r.lu)return Ju().add(r.key);{let e=Ju();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function im(e){const t=ul(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gp.bind(null,t),t.hu.J_=_p.bind(null,t.eventManager),t.hu.pu=Ep.bind(null,t.eventManager),t}class am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return function(e,t,n,r){return new cf(e,t,n,r)}(this.persistence,new of,e.initialUser,this.serializer)}Du(e){return new ef(nf.Vi,this.serializer)}bu(e){return new vf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}am.provider={build:()=>new am};class om extends am{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){cl(this.persistence.referenceDelegate instanceof rf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new zh(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?Lh.withCacheSize(this.cacheSizeBytes):Lh.DEFAULT;return new ef(e=>rf.Vi(e,t),this.serializer)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$p(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=rm.bind(null,this.syncEngine),await async function(e,t){const n=ul(e);t?(n.Ia.delete(2),await Bf(n)):t||(n.Ia.add(2),await Vf(n),n.Aa.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wp}createDatastore(e){const t=Af(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new jf(r));var r;return function(e,t,n,r){return new Mf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>$p(this.syncEngine,e,0),i=bf.C()?new bf:new yf,new zf(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Mp(e,t,n,r,s,i);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ul(e);rl(Uf,"RemoteStore shutting down."),t.Ia.add(5),await Vf(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}lm.provider={build:()=>new lm};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):sl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="FirestoreClient";class dm{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zo.UNAUTHENTICATED,this.clientId=Sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{rl(um,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(rl(um,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=gp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hm(e,t){e.asyncQueue.verifyOperationInProgress(),rl(um,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await uf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{il("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{rl("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{il("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function fm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rl(um,"Using user provided OfflineComponentProvider");try{await hm(e,e._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!("FirebaseError"===(n=s).name?n.code===dl.FAILED_PRECONDITION||n.code===dl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw s;il("Error using user provided cache. Falling back to memory cache: "+s),await hm(e,new am)}}else rl(um,"Using default OfflineComponentProvider"),await hm(e,new om(void 0));var n;return e._offlineComponents}(e);rl(um,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>hp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>hp(t.remoteStore,n)),e._onlineComponents=t}async function pm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rl(um,"Using user provided OnlineComponentProvider"),await fm(e,e._uninitializedComponentsProvider._online)):(rl(um,"Using default OnlineComponentProvider"),await fm(e,new lm))),e._onlineComponents}async function mm(e){const t=await pm(e),n=t.eventManager;return n.onListen=Fp.bind(null,t.syncEngine),n.onUnlisten=Bp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Up.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Vp.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const vm=new Map,ym="firestore.googleapis.com",xm=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new hl(dl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ym,this.ssl=xm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:xm;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Oh;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hl(dl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new hl(dl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hl(dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new hl(dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new hl(dl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class wm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new hl(dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hl(dl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ml;switch(e.type){case"firstParty":return new xl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hl(dl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vm.get(e);t&&(rl("ComponentProvider","Removing Datastore"),vm.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Nm(this.firestore,e,this._query)}}class km{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new km(this.firestore,e,this._key)}toJSON(){return{type:km._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ql(t,km._jsonSchema))return new km(e,n||null,new Ll(Rl.fromString(t.referencePath)))}}km._jsonSchemaVersion="firestore/documentReference/1.0",km._jsonSchema={type:Vl("string",km._jsonSchemaVersion),referencePath:Vl("string")};class Sm extends Nm{constructor(e,t,n){super(e,t,ju(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new km(this.firestore,null,new Ll(e))}withConverter(e){return new Sm(this.firestore,e,this._path)}}function _m(e,t,...n){if(e=Zt(e),Dl("collection","path",t),e instanceof wm){const r=Rl.fromString(t,...n);return Fl(r),new Sm(e,null,r)}{if(!(e instanceof km||e instanceof Sm))throw new hl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rl.fromString(t,...n));return Fl(r),new Sm(e.firestore,null,r)}}function Em(e,t,...n){if(e=Zt(e),1===arguments.length&&(t=Sl.newId()),Dl("doc","path",t),e instanceof wm){const r=Rl.fromString(t,...n);return Ml(r),new km(e,null,new Ll(r))}{if(!(e instanceof km||e instanceof Sm))throw new hl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rl.fromString(t,...n));return Ml(r),new km(e.firestore,e instanceof Sm?e.converter:null,new Ll(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="AsyncQueue";class jm{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new If(this,"async_queue_retry"),this.oc=()=>{const e=Cf();e&&rl(Tm,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Cf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Cf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new fl;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ec(e))throw e;rl(Tm,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,sl("INTERNAL UNHANDLED ERROR: ",Cm(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=mp.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&ol(47125,{hc:Cm(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Cm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Am extends wm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function Im(e,t){const n="object"==typeof e?e:vr(),r="string"==typeof e?e:Cc,s=dr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=It("firestore");e&&function(e,t,n,r={}){var s;e=Bl(e,wm);const i=Lt(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;i&&(Dt(`https://${l}`),zt("Firestore",!0)),a.host!==ym&&a.host!==l&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!Gt(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Zo.MOCK_USER;else{t=Mt(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new hl(dl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zo(i)}e._authCredentials=new gl(new pl(t,n))}}(s,...e)}return s}function Rm(e){if(e._terminated)throw new hl(dl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const s=e._freezeSettings(),i=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=s,new jc(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gm(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator));var a,o,l,c;e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new dm(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class Pm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pm(gc.fromBase64String(e))}catch(t){throw new hl(dl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pm(gc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ql(e,Pm._jsonSchema))return Pm.fromBase64String(e.bytes)}}Pm._jsonSchemaVersion="firestore/bytes/1.0",Pm._jsonSchema={type:Vl("string",Pm._jsonSchemaVersion),bytes:Vl("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Om{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hl(dl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ol(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hl(dl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hl(dl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _l(this._lat,e._lat)||_l(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dm._jsonSchemaVersion}}static fromJSON(e){if(ql(e,Dm._jsonSchema))return new Dm(e.latitude,e.longitude)}}Dm._jsonSchemaVersion="firestore/geoPoint/1.0",Dm._jsonSchema={type:Vl("string",Dm._jsonSchemaVersion),latitude:Vl("number"),longitude:Vl("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Mm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ql(e,Mm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Mm(e.vectorValues);throw new hl(dl.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mm._jsonSchemaVersion="firestore/vectorValue/1.0",Mm._jsonSchema={type:Vl("string",Mm._jsonSchemaVersion),vectorValues:Vl("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fm=/^__.*__$/;class Um{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _d(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sd(e,this.data,t,this.fieldTransforms)}}function zm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ol(40011,{Ec:e})}}class Bm{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(zm(this.Ec)&&Fm.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Vm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Af(e)}Dc(e,t,n,r=!1){return new Bm({Ec:e,methodName:t,bc:n,path:Ol.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qm(e){const t=e._freezeSettings(),n=Af(e._databaseId);return new Vm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hm(e,t,n,r,s,i={}){const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Km("Data must be an object, but it was:",a,r);const o=Gm(r,a);let l,c;if(i.merge)l=new pc(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Qm(t,r,n);if(!a.contains(s))throw new hl(dl.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Zm(e,s)||e.push(s)}l=new pc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Um(new Jc(o),l,c)}function $m(e,t){if(Wm(e=Zt(e)))return Km("Unsupported field value:",t,e),Gm(e,t);if(e instanceof Lm)return function(e,t){if(!zm(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=$m(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return nd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gl.fromDate(e);return{timestampValue:rh(t.serializer,n)}}if(e instanceof Gl){const n=new Gl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rh(t.serializer,n)}}if(e instanceof Dm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pm)return{bytesValue:sh(t.serializer,e._byteString)};if(e instanceof km){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:oh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mm)return n=e,r=t,{mapValue:{fields:{[Ic]:{stringValue:Oc},[Lc]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.wc("VectorValues must only contain numeric values.");return ed(r.serializer,e)})}}}}};var n,r;throw t.wc(`Unsupported field value: ${zl(e)}`)}(e,t)}function Gm(e,t){const n={};return lc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oc(e,(e,r)=>{const s=$m(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Wm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gl||e instanceof Dm||e instanceof Pm||e instanceof km||e instanceof Lm||e instanceof Mm)}function Km(e,t,n){if(!Wm(n)||!Ul(n)){const r=zl(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Qm(e,t,n){if((t=Zt(t))instanceof Om)return t._internalPath;if("string"==typeof t)return Ym(e,t);throw Jm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xm=new RegExp("[~\\*/\\[\\]]");function Ym(e,t,n){if(t.search(Xm)>=0)throw Jm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Om(...t.split("."))._internalPath}catch(r){throw Jm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Jm(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new hl(dl.INVALID_ARGUMENT,o+e+l)}function Zm(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new km(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tg extends eg{data(){return super.data()}}function ng(e,t){return"string"==typeof t?Ym(e,t):t instanceof Om?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{}class sg extends rg{}function ig(e,t,...n){let r=[];t instanceof rg&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof lg).length,n=e.filter(e=>e instanceof ag).length;if(t>1||t>0&&n>0)throw new hl(dl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class ag extends sg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ag(e,t,n)}_apply(e){const t=this._parse(e);return dg(e._query,t),new Nm(e.firestore,e.converter,Pu(e._query,t))}_parse(e){const t=qm(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new hl(dl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){ug(a,i);const t=[];for(const n of a)t.push(cg(r,e,n));o={arrayValue:{values:t}}}else o=cg(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ug(a,i),o=function(e,t,n,r=!1){return $m(n,e.Dc(r?4:3,t))}(n,t,a,"in"===i||"not-in"===i);return ou.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function og(e,t,n){const r=t,s=ng("where",e);return ag._create(s,r,n)}class lg extends rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:lu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)dg(n,s),n=Pu(n,s)}(e._query,t),new Nm(e.firestore,e.converter,Pu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function cg(e,t,n){if("string"==typeof(n=Zt(n))){if(""===n)throw new hl(dl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Au(t)&&-1!==n.indexOf("/"))throw new hl(dl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Rl.fromString(n));if(!Ll.isDocumentKey(r))throw new hl(dl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $c(e,new Ll(r))}if(n instanceof km)return $c(e,n._key);throw new hl(dl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zl(n)}.`)}function ug(e,t){if(!Array.isArray(e)||0===e.length)throw new hl(dl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new hl(dl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new hl(dl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hg{convertValue(e,t="none"){switch(Dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ol(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return oc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Lc].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>xc(e.doubleValue));return new Mm(s)}convertGeoPoint(e){return new Dm(xc(e.latitude),xc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ec(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=yc(e);return new Gl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rl.fromString(e);cl(Th(n),9688,{name:e});const r=new Ac(n.get(1),n.get(3)),s=new Ll(n.popFirst(5));return r.isEqual(t)||sl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pg extends eg{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new hl(dl.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pg._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}pg._jsonSchemaVersion="firestore/documentSnapshot/1.0",pg._jsonSchema={type:Vl("string",pg._jsonSchemaVersion),bundleSource:Vl("string","DocumentSnapshot"),bundleName:Vl("string"),bundle:Vl("string")};class mg extends pg{data(e={}){return super.data(e)}}class gg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new mg(this._firestore,this._userDataWriter,n.key,n,new fg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hl(dl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new mg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new fg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new mg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:vg(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new hl(dl.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ol(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(e){e=Bl(e,km);const t=Bl(e.firestore,Am);return function(e,t,n={}){const r=new fl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new cm({next:o=>{i.Ou(),t.enqueueAndForget(()=>Sp(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new hl(dl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new hl(dl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Ap(ju(n.path),i,{includeMetadataChanges:!0,ka:!0});return kp(e,a)}(await mm(e),e.asyncQueue,t,n,r)),r.promise}(Rm(t),e._key).then(n=>function(e,t,n){const r=n.docs.get(t._key),s=new xg(e);return new pg(e,s,t._key,r,new fg(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n))}gg._jsonSchemaVersion="firestore/querySnapshot/1.0",gg._jsonSchema={type:Vl("string",gg._jsonSchemaVersion),bundleSource:Vl("string","QuerySnapshot"),bundleName:Vl("string"),bundle:Vl("string")};class xg extends hg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new km(this.firestore,null,t)}}function bg(e){e=Bl(e,Nm);const t=Bl(e.firestore,Am),n=Rm(t),r=new xg(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hl(dl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new fl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new cm({next:n=>{i.Ou(),t.enqueueAndForget(()=>Sp(e,a)),n.fromCache&&"server"===r.source?s.reject(new hl(dl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Ap(n,i,{includeMetadataChanges:!0,ka:!0});return kp(e,a)}(await mm(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new gg(t,r,e,n))}function wg(e,t,n){e=Bl(e,km);const r=Bl(e.firestore,Am),s=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);return function(e,t){return function(e,t){const n=new fl;return e.asyncQueue.enqueueAndForget(async()=>qp(await function(e){return pm(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Rm(e),t)}(r,[Hm(qm(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,gd.none())])}!function(e,t=!0){el=mr,ur(new en("firestore",(e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),i=new Am(new vl(e.getProvider("auth-internal")),new wl(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hl(dl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i},"PUBLIC").setMultipleInstances(!0)),yr(Yo,Jo,e),yr(Yo,Jo,"esm2017")}();const Ng=gr({apiKey:"AIzaSyAIZn2N4kQB9v7w8uhyTFx0Gi9gpa5mJ2k",authDomain:"blockdag-avatars.firebaseapp.com",projectId:"blockdag-avatars",storageBucket:"blockdag-avatars.firebasestorage.app",messagingSenderId:"326265418448",appId:"1:326265418448:web:915df8b9981e0b734364d5"}),kg=function(e=vr()){const t=dr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=dr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Gt(n.getOptions(),null!=t?t:{}))return e;Lr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ta,persistence:[Hi,Ti,Ci]}),r=Pt("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ia)return;const r=null==t?void 0:t.token;Ra!==r&&(Ra=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Zt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Zt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=At("auth");return i&&Js(n,`http://${i}`),n}(Ng),Sg=function(e=vr(),t){const n=dr(e=Zt(e),Mo).getImmediate({identifier:t}),r=It("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`;const s=Lt(t);s&&(Dt(`https://${e.host}/b`),zt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:Mt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Ng),_g=Im(Ng),Eg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),Tg=({onSubmit:t,onCancel:n,isLoading:r=!1,error:s=""})=>{const[i,a]=l.useState({displayName:"",accountEmail:"",accountPassword:"",fullName:"",email:"",phone:"",dateOfBirth:"",street:"",city:"",state:"",zipCode:"",idType:"passport",idNumber:""}),[o,c]=l.useState(!1),[u,d]=l.useState({}),h=e=>{const{name:t,value:n}=e.target;a(e=>({...e,[t]:n})),u[t]&&d(e=>({...e,[t]:void 0}))},f=e=>{e.preventDefault(),(()=>{const e={};return i.displayName.trim()||(e.displayName="Display name is required"),i.accountEmail.trim()||(e.accountEmail="Email is required"),i.accountPassword.trim()||(e.accountPassword="Password is required"),i.accountPassword.length<6&&(e.accountPassword="Password must be at least 6 characters"),d(e),0===Object.keys(e).length})()&&t(i)};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-start justify-center p-4 overflow-y-auto pt-8",children:e.jsx("div",{className:"w-full max-w-3xl bg-slate-900/95 border border-cyan-500/30 rounded-2xl shadow-2xl shadow-cyan-500/20 my-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-cyan-300",children:"Create Account"}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white text-xl",children:""})]}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[s&&e.jsx("div",{className:"p-3 rounded-lg border "+(s.toLowerCase().includes("success")?"bg-green-900/30 border-green-700/50 text-green-300":"bg-red-900/30 border-red-700/50 text-red-300"),children:e.jsx("p",{className:"text-sm",children:s})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wider",children:"Account Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Display Name"}),e.jsx("input",{id:"displayName",type:"text",name:"displayName",value:i.displayName,onChange:h,placeholder:"Your display name",disabled:r,className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.displayName&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.displayName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accountEmail",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Email"}),e.jsx("input",{id:"accountEmail",type:"email",name:"accountEmail",value:i.accountEmail,onChange:h,placeholder:"john@example.com",disabled:r,className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.accountEmail&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.accountEmail})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accountPassword",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"accountPassword",type:o?"text":"password",name:"accountPassword",value:i.accountPassword,onChange:h,placeholder:"At least 6 characters",disabled:r,className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all pr-10 text-base"}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-300",children:o?"":""})]}),u.accountPassword&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.accountPassword})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wider",children:"Personal Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Full Name"}),e.jsx("input",{id:"fullName",type:"text",name:"fullName",value:i.fullName,onChange:h,placeholder:"John Doe",disabled:r,autoComplete:"name",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.fullName&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.fullName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",name:"phone",value:i.phone,onChange:h,placeholder:"+1 (555) 000-0000",disabled:r,autoComplete:"tel",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.phone&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Date of Birth"}),e.jsx("input",{id:"dateOfBirth",type:"date",name:"dateOfBirth",value:i.dateOfBirth,onChange:h,disabled:r,autoComplete:"bday",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.dateOfBirth&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.dateOfBirth})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-600/30",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wider",children:"Address"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Street Address"}),e.jsx("input",{id:"street",type:"text",name:"street",value:i.street,onChange:h,placeholder:"123 Main Street",disabled:r,autoComplete:"street-address",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.street&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.street})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-semibold text-slate-300 mb-2",children:"City"}),e.jsx("input",{id:"city",type:"text",name:"city",value:i.city,onChange:h,placeholder:"New York",disabled:r,autoComplete:"address-level2",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.city&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.city})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-semibold text-slate-300 mb-2",children:"State"}),e.jsx("input",{id:"state",type:"text",name:"state",value:i.state,onChange:h,placeholder:"NY",disabled:r,autoComplete:"address-level1",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.state&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.state})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-semibold text-slate-300 mb-2",children:"Zip Code"}),e.jsx("input",{id:"zipCode",type:"text",name:"zipCode",value:i.zipCode,onChange:h,placeholder:"10001",disabled:r,autoComplete:"postal-code",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.zipCode&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.zipCode})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-600/30",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 uppercase tracking-wider",children:"Identity Verification"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idType",className:"block text-sm font-semibold text-slate-300 mb-2",children:"ID Type"}),e.jsxs("select",{id:"idType",name:"idType",value:i.idType,onChange:h,disabled:r,className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base",children:[e.jsx("option",{value:"passport",children:"Passport"}),e.jsx("option",{value:"drivers_license",children:"Driver's License"}),e.jsx("option",{value:"national_id",children:"National ID"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idNumber",className:"block text-sm font-semibold text-slate-300 mb-2",children:"ID Number"}),e.jsx("input",{id:"idNumber",type:"text",name:"idNumber",value:i.idNumber,onChange:h,placeholder:"123456789",disabled:r,autoComplete:"off",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-500/60 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/80 disabled:opacity-50 transition-all text-base"}),u.idNumber&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.idNumber})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-600/30",children:[e.jsx("button",{type:"button",onClick:n,disabled:r,className:"flex-1 py-2.5 border border-slate-500/50 hover:border-slate-400 text-slate-300 hover:text-white font-semibold rounded-lg transition-all disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,onClick:e=>{f(e)},className:"flex-1 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 disabled:opacity-50 text-white font-semibold rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-cyan-500/30",children:[r&&e.jsx("span",{className:"animate-spin",children:""}),r?"Verifying...":"Verify Identity"]})]})]})]})})})},jg=({onLoginSuccess:t})=>{const[n,r]=l.useState(!0),[s,i]=l.useState(!1),[a,o]=l.useState(""),[c,u]=l.useState(""),[d,h]=l.useState(""),[f,p]=l.useState(""),[m,g]=l.useState(!1),[v,y]=l.useState(""),[x,b]=l.useState(!1),[w,N]=l.useState(!1),[k,S]=l.useState(null);return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col bg-gradient-to-b from-slate-900 to-black",children:[void 0,void 0,e.jsx("div",{className:"absolute inset-0 z-0 opacity-30",style:{backgroundImage:'url("/assets/astronaut-visor.jpg")',backgroundSize:"cover",backgroundPosition:"center"}}),s&&e.jsxs("div",{className:"z-50",children:[void 0,e.jsx(Tg,{onSubmit:async e=>{g(!0),y("");try{const s=Im(),[a,l]=await Promise.all([bg(ig(_m(s,"profiles"),og("username","==",e.displayName.toLowerCase().trim()))),bg(ig(_m(s,"profiles"),og("email","==",e.accountEmail.toLowerCase().trim())))]);if(!a.empty)return y("This username is already taken. Please choose a different one."),void g(!1);if(!l.empty)return y("This email is already registered. Please log in instead."),void g(!1);const c=await async function(e,t,n){if(hr(e.app))return Promise.reject(Fr(e));const r=Vs(e),s=Ys(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mi),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&wi(e),t}),a=await gi._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(kg,e.accountEmail,e.accountPassword);await ki(c.user,{displayName:e.displayName});const d=c.user.uid;try{const t=wg(Em(s,"users",d),{displayName:e.displayName,accountEmail:e.accountEmail,fullName:e.fullName||"",email:e.email||"",phone:e.phone||"",dateOfBirth:e.dateOfBirth||"",street:e.street||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",idType:e.idType||"",idNumber:e.idNumber||"",createdAt:(new Date).toISOString()}),n=wg(Em(s,"profiles",d),{userId:d,username:e.displayName.toLowerCase().trim(),displayName:e.displayName,email:e.accountEmail.toLowerCase().trim(),avatar:"",bio:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()});await Promise.all([t,n])}catch(n){return y("Failed to save profile: "+n.message),void g(!1)}g(!1),setTimeout(async()=>{i(!1),r(!0),o(e.accountEmail),u(e.accountPassword),h(""),y("");try{const n=await Ni(kg,e.accountEmail,e.accountPassword);t(n.user.uid,e.displayName)}catch(n){y("Account created! Please log in with your credentials.")}},1e3)}catch(s){let e="Account creation failed";"auth/email-already-in-use"===s.code?e="Email already in use. Please log in instead.":"auth/weak-password"===s.code?e="Password must be at least 6 characters.":"auth/invalid-email"===s.code?e="Invalid email address.":"auth/operation-not-allowed"===s.code?e="Email/Password authentication is not enabled. Please contact support.":s.message&&(e=s.message),y(e),g(!1)}},onCancel:()=>{i(!1),y("")},isLoading:m,error:v})]}),!s&&e.jsx("div",{className:"w-full max-w-xs fixed left-1/2 -translate-x-1/2 z-50",style:{bottom:"2%"},children:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-blue-900/30 backdrop-blur-3xl border border-blue-400/40 rounded-2xl p-4 mb-0 shadow-2xl",children:[e.jsx("div",{className:"text-center mb-3 pb-3 border-b border-blue-400/20",children:e.jsx("p",{className:"text-sm font-semibold text-cyan-200 drop-shadow-lg tracking-wide",children:"Welcome! You Are Not Alone"})}),v&&e.jsx("div",{className:"mb-3 p-2 bg-red-900/30 border border-red-700/50 rounded",children:e.jsx("p",{className:"text-red-300 text-xs",children:v})}),w&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim())if(k){g(!0),y("");try{const e=Im(),n=await bg(ig(_m(e,"profiles"),og("displayName","==",k.displayName)));if(n.empty)return y("User profile not found"),void g(!1);const r=n.docs[0].data().email,s=await bg(ig(_m(e,"users"),og("accountEmail","==",r)));if(s.empty)return y("User not found"),void g(!1);if(s.docs[0].data().pin!==d)return y("Incorrect PIN"),void g(!1);N(!1),S(null),h(""),t(k.uid,k.displayName)}catch(n){y("PIN verification failed. Please try again.")}finally{g(!1)}}else y("Session expired. Please log in again.");else y("Please enter your PIN")},className:"space-y-3 mb-4",children:[e.jsx("p",{className:"text-sm text-slate-300 mb-3",children:"This account requires PIN verification"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"verificationPin",className:"block text-xs font-semibold text-slate-300 mb-1",children:"Enter PIN"}),e.jsx("input",{id:"verificationPin",name:"pin",type:"password",value:d,onChange:e=>h(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter your PIN",disabled:m,maxLength:6,inputMode:"numeric",autoComplete:"off",className:"w-full px-2.5 py-1.5 bg-slate-700/40 border border-slate-500/60 rounded text-sm text-white placeholder-slate-300 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/50 disabled:opacity-50 transition-all tracking-widest",required:!0,autoFocus:!0})]}),e.jsxs("button",{type:"submit",disabled:m,className:"w-full py-1.5 text-sm bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 disabled:opacity-50 text-white font-semibold rounded transition-all flex items-center justify-center gap-2 shadow-lg shadow-cyan-500/30",children:[m&&e.jsx("span",{className:"animate-spin",children:""}),"Verify PIN"]}),e.jsx("button",{type:"button",onClick:()=>{N(!1),S(null),h(""),y("")},disabled:m,className:"w-full py-1.5 text-sm bg-slate-700 hover:bg-slate-600 disabled:opacity-50 text-slate-300 font-semibold rounded transition-all",children:"Cancel"})]}),n&&!w&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n){g(!0),y("");try{if(!a.trim())return y("Please enter your email"),void g(!1);if(!c.trim())return y("Please enter your password"),void g(!1);try{const e=await Ni(kg,a.toLowerCase().trim(),c);g(!1),t(e.user.uid,e.user.displayName||"Guest")}catch(r){"auth/user-not-found"===r.code?y("No account found with this email"):"auth/wrong-password"===r.code?y("Incorrect password"):y("Invalid email or password"),g(!1)}}catch(s){y("Login failed. Please try again."),g(!1)}}else i(!0)},className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"loginEmail",className:"block text-xs font-semibold text-slate-300 mb-1",children:"Email"}),e.jsx("input",{id:"loginEmail",name:"email",type:"email",value:a,onChange:e=>o(e.target.value),placeholder:"your.email@example.com",disabled:m,autoComplete:"email",className:"w-full px-2.5 py-1.5 bg-slate-700/40 border border-slate-500/60 rounded text-sm text-white placeholder-slate-300 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/50 disabled:opacity-50 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"loginPassword",className:"block text-xs font-semibold text-slate-300 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"loginPassword",name:"password",type:x?"text":"password",value:c,onChange:e=>u(e.target.value),placeholder:n?"Enter password":"At least 6 characters",disabled:m,autoComplete:"current-password",className:"w-full px-2.5 py-1.5 bg-slate-700/40 border border-slate-500/60 rounded text-sm text-white placeholder-slate-300 focus:outline-none focus:border-cyan-400 focus:bg-slate-700/50 disabled:opacity-50 transition-all pr-8",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>b(!x),className:"absolute right-2 top-1.5 text-slate-400 hover:text-slate-300 text-sm",children:x?"":""})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{type:"submit",disabled:m,className:"flex-1 py-1.5 rounded text-sm font-semibold transition-all bg-cyan-500 text-white shadow-lg shadow-cyan-500/50 disabled:opacity-50 flex items-center justify-center gap-2",children:[m&&e.jsx("span",{className:"animate-spin",children:""}),"Login"]}),e.jsx("button",{type:"button",onClick:()=>{i(!0),y("")},className:"flex-1 py-1.5 rounded text-sm font-semibold transition-all bg-slate-700 text-slate-300 hover:bg-slate-600",children:"Sign Up"})]}),e.jsx("button",{type:"button",onClick:()=>t("admin-user-123","Admin"),className:"w-full py-1.5 mt-3 rounded text-xs font-semibold transition-all bg-gradient-to-r from-orange-600 to-red-600 text-white hover:from-orange-500 hover:to-red-500 shadow-lg shadow-orange-600/30",children:"Admin Access"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Eg,{className:"w-10 h-10 text-cyan-400 drop-shadow-lg"}),e.jsx("span",{className:"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-blue-400 drop-shadow-lg",children:"BlockDAG"})]})})]})})})]})},Cg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2v-1m-4-6h.01M17 12h.01M17 15h.01M17 9h.01M12 9h.01M12 12h.01M12 15h.01M9 9h.01M9 12h.01M9 15h.01M6 9h.01M6 12h.01"})}),Ag=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),Ig=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h.01M12 12h.01M18 12h.01M7 15h10M6 9h12a3 3 0 013 3v1.5a3 3 0 01-3 3H6a3 3 0 01-3-3V12a3 3 0 013-3z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 12.75l1.5-3 1.5 3M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})]}),Rg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Pg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),Og=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h18v12H3z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 21h6m-8-6a8 8 0 018-8m-4 4a4 4 0 014-4"})]}),Lg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),Dg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 14l-1.5-1.5-2 3-2 2-3 4h15l-2.5-5-2-2-1.5 2z"}),e.jsx("path",{d:"M9 10a1 1 0 100-2 1 1 0 000 2z"}),e.jsx("path",{d:"M9 12v-2h2"}),e.jsx("path",{d:"M22 10H8"})]}),Mg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Fg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Ug=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2C6.477 2 2 6.477 2 12c0 1.99.584 3.843 1.625 5.375"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 12c0-5.523-4.477-10-10-10"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 14h16"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 22V14"})]}),zg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6l-1 5h18l-1-5H4z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 11h18v8H3v-8z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6V3"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6l-1-3"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 6l1-3"})]}),Bg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 3v11a2 2 0 002 2h6a2 2 0 002-2V3"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16h10v3H7v-3z"})]}),Vg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 21V11a2 2 0 012-2h10a2 2 0 012 2v10"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 21h14"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 15h10"})]}),qg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M5 21V10l4-4 4 4v11m-8-6h.01M16 21V12l-4-4-4 4v9"})}),Hg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21l10-10-2-2-10 10-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 19l-2 2"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 5l-2 2"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15l4-4"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 3l4 4"})]}),$g=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z"})}),Gg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})]}),Wg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),Kg=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 100 90",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"prism-full-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff4141"}),"     ",e.jsx("stop",{offset:"30%",stopColor:"#ffda41"}),"    ",e.jsx("stop",{offset:"70%",stopColor:"#41ffea"}),"   ",e.jsx("stop",{offset:"100%",stopColor:"#9d41ff"}),"   "]}),e.jsxs("linearGradient",{id:"prism-inner-fill-gradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ccff41"})," ",e.jsx("stop",{offset:"100%",stopColor:"#41ff8d"})," "]}),e.jsxs("filter",{id:"prism-neon-glow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"4",result:"blur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"blur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsxs("g",{filter:"url(#prism-neon-glow-filter)",children:[e.jsx("path",{d:"M50 5 L5 85 L95 85 Z",fill:"none",stroke:"url(#prism-full-gradient)",strokeWidth:"7",strokeLinejoin:"round"}),e.jsx("path",{d:"M30 45 L70 45 L50 80 Z",fill:"url(#prism-inner-fill-gradient)"})]})]}),Qg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.25v-3.75a.75.75 0 01.75-.75h10.5a.75.75 0 01.75.75v3.75m-12 0v3.75a.75.75 0 00.75.75h10.5a.75.75 0 00.75-.75v-3.75m-12 0h12M15 9.75v6.75a.75.75 0 01-.75.75h-3a.75.75 0 01-.75-.75V9.75m4.5 0v6.75a.75.75 0 00.75.75h3a.75.75 0 00.75-.75V9.75m-4.5 0h4.5"})}),Xg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M4 8l2-3h12l2 3v2l-2 3H6l-2-3V8z"})}),Yg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15A2.25 2.25 0 002.25 6.75v10.5A2.25 2.25 0 004.5 19.5z"})}),Jg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),Zg=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 01-1.5 1.5H4.5a1.5 1.5 0 01-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 109.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1114.625 7.5H12m0 0V21m-8.625-9.75h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),ev=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z"})}),tv=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z"})});l.lazy(()=>wt(()=>import("./UE5PixelStream-ChubS3bA.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.UE5PixelStream})));const nv=({isOpen:t,onClose:n,onLaunch:r})=>{const s=l.useRef(null),[i,a]=l.useState(null),[o,u]=l.useState(!1),[d,h]=l.useState({x:0,y:0}),[f,p]=l.useState(!1),m=!1;l.useEffect(()=>{t&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude;a({lat:t,lng:n,name:localStorage.getItem("username")||"Player",size:.8,color:"#f59e0b"}),setTimeout(()=>{s.current&&s.current.pointOfView&&s.current.pointOfView({lat:t,lng:n,altitude:1.5},1500)},500)},()=>{const e=39.8283,t=-98.5795;a({lat:e,lng:t,name:localStorage.getItem("username")||"Player",size:.8,color:"#f59e0b"}),setTimeout(()=>{s.current&&s.current.pointOfView&&s.current.pointOfView({lat:e,lng:t,altitude:1.5},1500)},500)})},[t]),l.useEffect(()=>{t&&s.current&&setTimeout(()=>{s.current&&s.current.pointOfView&&s.current.pointOfView({lat:0,lng:0,altitude:2.5},0)},100)},[t]);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:n}),e.jsxs("div",{className:"relative w-full max-w-5xl h-[90vh] bg-slate-900 border border-slate-700 rounded-xl p-4 z-50 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-2xl text-white",children:"City BLDR  Interactive Earth"}),m]}),e.jsx("button",{className:"px-3 py-2 rounded bg-slate-800/60 hover:bg-slate-700 text-white",onClick:n,children:"Close"})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-b from-slate-950 to-black rounded overflow-hidden border border-slate-700 relative",children:[e.jsx(c,{ref:s,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-blue-marble.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",atmosphereColor:"lightskyblue",atmosphereAltitude:.15,animateIn:!0,waitForGlobeReady:!0,rendererConfig:{antialias:!0,alpha:!0},htmlElementsData:i?[i]:[],htmlElement:e=>{const t=document.createElement("div");return t.innerHTML=`<div style="cursor: pointer; text-align: center;"><div style="font-size: 24px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.8));"></div><div style="font-size: 11px; font-weight: bold; color: #fbbf24; text-shadow: 0 1px 3px rgba(0,0,0,0.9), 0 0 8px rgba(251,191,36,0.6); margin-top: 2px;">${e.name}'s Village</div></div>`,t.style.pointerEvents="auto",t.addEventListener("click",e=>{e.stopPropagation(),((e,t)=>{u(!0),h({x:t.clientX,y:t.clientY})})(0,e)}),t}}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),e.jsxs("div",{className:"fixed z-50 bg-slate-800 border border-slate-600 rounded-lg shadow-2xl p-3 min-w-[200px]",style:{left:`${d.x}px`,top:`${d.y}px`,transform:"translate(-50%, 10px)"},children:[e.jsxs("div",{className:"text-white font-bold mb-2 text-sm border-b border-slate-600 pb-2",children:[null==i?void 0:i.name,"'s Village"]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{className:"px-3 py-2 text-left text-sm bg-slate-700 hover:bg-slate-600 text-white rounded transition-colors",onClick:()=>{alert(`Village Info:\nLocation: ${null==i?void 0:i.lat.toFixed(4)}, ${null==i?void 0:i.lng.toFixed(4)}\nOwner: ${null==i?void 0:i.name}`),u(!1)},children:"? View Info"}),e.jsx("button",{className:"px-3 py-2 text-left text-sm bg-amber-600 hover:bg-amber-500 text-white rounded font-semibold transition-colors",onClick:()=>{r(),n()},children:" BLD (Basic)"}),m]})]})]})]}),e.jsx("div",{className:"mt-3 text-sm text-slate-300 text-center",children:" Drag   Scroll   Click village"})]})]}):null},rv=[{type:"residential",name:"House",icon:"",cost:{prism:10,wood:5,iron:0},description:"Generates population",color:"bg-green-600"},{type:"commercial",name:"Shop",icon:"",cost:{prism:20,wood:3,iron:2},description:"Generates Prism",color:"bg-blue-600"},{type:"industrial",name:"Factory",icon:"",cost:{prism:30,wood:10,iron:15},description:"Produces materials",color:"bg-gray-600"},{type:"park",name:"Park",icon:"",cost:{prism:5,wood:2,iron:0},description:"Increases happiness",color:"bg-green-400"},{type:"road",name:"Road",icon:"",cost:{prism:2,wood:0,iron:1},description:"Connects buildings",color:"bg-gray-400"}],sv=({onClose:t})=>{var n,r;const[s,i]=l.useState([]),[a,o]=l.useState({prism:100,wood:50,iron:25,population:0}),[c,u]=l.useState(null),[d,h]=l.useState(null),[f,p]=l.useState(null);l.useEffect(()=>{const e=[];for(let r=0;r<12;r++){const t=[];for(let e=0;e<12;e++)t.push({id:`${e}-${r}`,type:"empty",level:0,x:e,y:r});e.push(t)}i(e);const t=localStorage.getItem("cityBuilderSave");if(t)try{const e=JSON.parse(t);e.grid&&e.resources&&(i(e.grid),o(e.resources))}catch(n){}},[]),l.useEffect(()=>{if(0===s.length)return;const e={grid:s,resources:a};localStorage.setItem("cityBuilderSave",JSON.stringify(e))},[s,a]),l.useEffect(()=>{const e=setInterval(()=>{let e=0,t=0,n=0,r=0;s.forEach(s=>{s.forEach(s=>{"commercial"===s.type?e+=2*(s.level+1):"industrial"===s.type?(t+=1*(s.level+1),n+=1*(s.level+1)):"residential"===s.type&&(r+=1*(s.level+1))})}),o(s=>({prism:s.prism+e,wood:s.wood+t,iron:s.iron+n,population:s.population+r}))},5e3);return()=>clearInterval(e)},[s]);const m=e=>a.prism>=e.prism&&a.wood>=e.wood&&a.iron>=e.iron,g=e=>{if("empty"===e.type)return"";const t=rv.find(t=>t.type===e.type);return(null==t?void 0:t.icon)||""},v=e=>{if("empty"===e.type)return"bg-green-900/30";const t=rv.find(t=>t.type===e.type);return(null==t?void 0:t.color)||"bg-gray-500"};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-950 flex flex-col",children:[e.jsxs("div",{className:"bg-slate-900 border-b border-slate-700 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"City Builder"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded font-semibold",onClick:t,children:"Close"})]}),e.jsxs("div",{className:"mt-3 flex gap-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-3 py-2 rounded",children:[e.jsx(Kg,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"font-bold",children:a.prism}),e.jsx("span",{className:"text-xs text-slate-400",children:"Prism"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-3 py-2 rounded",children:[e.jsx(Qg,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-bold",children:a.wood}),e.jsx("span",{className:"text-xs text-slate-400",children:"Wood"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-3 py-2 rounded",children:[e.jsx(Xg,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-bold",children:a.iron}),e.jsx("span",{className:"text-xs text-slate-400",children:"Iron"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-bold",children:a.population}),e.jsx("span",{className:"text-xs text-slate-400",children:"Population"})]})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-700 p-4 overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"Buildings"}),e.jsx("div",{className:"flex flex-col gap-2",children:rv.map(t=>e.jsxs("button",{className:"p-3 rounded text-left transition-colors "+(c===t.type?"bg-cyan-600 text-white":"bg-slate-800 hover:bg-slate-700 text-white"),onClick:()=>u(t.type),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsx("span",{className:"font-semibold",children:t.name})]}),e.jsx("div",{className:"text-xs text-slate-300 mb-2",children:t.description}),e.jsxs("div",{className:"text-xs flex gap-2 items-center",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Kg,{className:"w-3 h-3 text-purple-400"}),t.cost.prism]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qg,{className:"w-3 h-3 text-amber-600"}),t.cost.wood]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xg,{className:"w-3 h-3 text-slate-400"}),t.cost.iron]})]})]},t.type))}),f&&"empty"!==(null==(r=null==(n=s[f.y])?void 0:n[f.x])?void 0:r.type)&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Selected Building"}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded mb-2",children:[e.jsx("div",{className:"text-2xl mb-1",children:g(s[f.y][f.x])}),e.jsxs("div",{className:"text-white text-sm",children:["Level ",s[f.y][f.x].level]})]}),e.jsx("button",{className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded mb-2",onClick:()=>{if(!f)return;const{x:e,y:t}=f,n=s[t][e];if("empty"===n.type)return void alert("No building to upgrade!");const r={prism:15*(n.level+1),wood:8*(n.level+1),iron:5*(n.level+1)};if(!m(r))return void alert("Not enough resources to upgrade!");const a=[...s];a[t][e]={...n,level:n.level+1},i(a),o(e=>({...e,prism:e.prism-r.prism,wood:e.wood-r.wood,iron:e.iron-r.iron}))},children:" Upgrade"}),e.jsx("button",{className:"w-full px-3 py-2 bg-red-600 hover:bg-red-500 text-white rounded",onClick:()=>{if(!f)return;const{x:e,y:t}=f;if("empty"===s[t][e].type)return;const n=[...s];n[t][e]={id:`${e}-${t}`,type:"empty",level:0,x:e,y:t},i(n),p(null)},children:" Demolish"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-8 bg-gradient-to-br from-green-900 to-green-950",children:e.jsx("div",{className:"inline-block",children:e.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:"repeat(12, 60px)"},children:s.map((t,n)=>t.map((t,r)=>e.jsxs("div",{className:`\n                      w-[60px] h-[60px] rounded border-2 cursor-pointer transition-all\n                      ${v(t)}\n                      ${(null==d?void 0:d.x)===r&&(null==d?void 0:d.y)===n?"border-yellow-400 scale-105":"border-slate-600"}\n                      ${(null==f?void 0:f.x)===r&&(null==f?void 0:f.y)===n?"ring-2 ring-cyan-400":""}\n                      flex items-center justify-center text-3xl relative\n                    `,onClick:()=>((e,t)=>{if(!c)return void p({x:e,y:t});if("empty"!==s[t][e].type)return void alert("Cell already occupied!");const n=rv.find(e=>e.type===c);if(!n)return;if(!m(n.cost))return void alert("Not enough resources!");const r=[...s];r[t][e]={id:`${e}-${t}`,type:c,level:1,x:e,y:t},i(r),o(e=>({...e,prism:e.prism-n.cost.prism,wood:e.wood-n.cost.wood,iron:e.iron-n.cost.iron})),u(null)})(r,n),onMouseEnter:()=>h({x:r,y:n}),onMouseLeave:()=>h(null),children:[g(t),t.level>1&&e.jsx("div",{className:"absolute top-0 right-0 bg-yellow-500 text-black text-xs font-bold px-1 rounded-bl",children:t.level})]},`${r}-${n}`)))})})})]}),e.jsx("div",{className:"bg-slate-900 border-t border-slate-700 p-2 text-center text-xs text-slate-400",children:"Select a building type, then click on the grid to place it  Click a building to select it, then upgrade or demolish"})]})},iv={mint:{key:"cashback_pct",value:.002,sourceSet:"mint",label:"+0.2% BDAG cashback"},vault:{key:"staking_apy_pct",value:.0015,sourceSet:"vault",label:"+0.15% staking APY"},siphon:{key:"fee_reduction_pct",value:.03,sourceSet:"siphon",label:"-3% transaction fees"},architect:{key:"crafting_cost_pct",value:.02,sourceSet:"architect",label:"-2% crafting costs"},broker:{key:"forge_success_pct",value:.02,sourceSet:"broker",label:"+2% forge success chance"}},av=.01,ov=.0075,lv=.15,cv=.1,uv=.1;const dv=[{set:"mint"},{set:"vault"},{set:"siphon"},{set:"architect"},{set:"broker"}],hv=e=>{const t=null==e?void 0:e.storageKey,n=null==e?void 0:e.handle,r=null==e?void 0:e.api,[s,i]=l.useState(()=>{if(r&&n)return dv;if("undefined"==typeof window)return dv;try{const e=localStorage.getItem(t);if(!e)return dv;const n=JSON.parse(e),r=dv.map(e=>n.find(t=>t.set===e.set)||e);return r}catch(e){return dv}}),a=l.useCallback(async()=>{if(r&&n)try{const e=await r.getSlots(n),t=dv.map(t=>{const n=e.find(e=>e.set===t.set);return n?{...n,confirmedWearing:n.accepted||n.confirmedWearing}:t});i(t)}catch(e){}},[r,n]);l.useEffect(()=>{if(!r||!n)try{localStorage.setItem(t,JSON.stringify(s))}catch(e){}},[s,t,r,n]);const o=l.useCallback(async(e,t)=>{const s=t.trim();if(r&&n){if(!s){const t=dv[e].set;return await r.revokeSlot({handle:n,set:t}),void(await a())}return await r.setInvite({handle:n,set:dv[e].set,invitedId:s}),void(await a())}i(t=>t.map((t,n)=>n===e?{...t,invitedId:s||void 0,accepted:!1,confirmedWearing:!1,expiresAt:void 0}:s&&t.invitedId===s?{...t,invitedId:void 0,accepted:!1,confirmedWearing:!1,expiresAt:void 0}:t))},[r,n,a]),c=l.useCallback(async e=>{if(r&&n){const t=s[e];if(!(null==t?void 0:t.invitedId))return;return await r.acceptSlot({invitedHandle:t.invitedId,set:t.set}),void(await a())}const t=Date.now()+6048e5;i(n=>n.map((n,r)=>r===e?{...n,confirmedWearing:!0,accepted:!0,expiresAt:t}:n))},[r,n,s,a]),u=l.useCallback(async e=>{if(r&&n)return await r.revokeSlot({handle:n,set:s[e].set}),void(await a());i(t=>t.map((t,n)=>n===e?{...t,confirmedWearing:!1,accepted:!1,expiresAt:void 0,invitedId:void 0}:t))},[r,n,s,a]);l.useEffect(()=>{if(r&&n)return;const e=Date.now();i(t=>t.map(t=>t.expiresAt&&t.expiresAt<e?{...t,invitedId:void 0,confirmedWearing:!1,accepted:!1,expiresAt:void 0}:t))},[r,n]),l.useEffect(()=>{a()},[a]);const{totals:d,activeBuffs:h}=l.useMemo(()=>function(e){const t={cashback_pct:0,staking_apy_pct:0,fee_reduction_pct:0,crafting_cost_pct:0,forge_success_pct:0},n=[];for(const r of e){const e=Date.now();if(!r.confirmedWearing)continue;if(!r.accepted)continue;if(r.expiresAt&&r.expiresAt<e)continue;const s=iv[r.set];switch(n.push(s),s.key){case"cashback_pct":t.cashback_pct+=s.value;break;case"staking_apy_pct":t.staking_apy_pct+=s.value;break;case"fee_reduction_pct":t.fee_reduction_pct+=s.value;break;case"crafting_cost_pct":t.crafting_cost_pct+=s.value;break;case"forge_success_pct":t.forge_success_pct+=s.value}}return t.cashback_pct=Math.min(t.cashback_pct,av),t.staking_apy_pct=Math.min(t.staking_apy_pct,ov),t.fee_reduction_pct=Math.min(t.fee_reduction_pct,lv),t.crafting_cost_pct=Math.min(t.crafting_cost_pct,cv),t.forge_success_pct=Math.min(t.forge_success_pct,uv),{totals:t,activeBuffs:n}}(s),[s]),f=l.useMemo(()=>function(e){return[{label:"Cashback",valueText:`${(100*e.cashback_pct).toFixed(1)}%`},{label:"Staking APY",valueText:`${(100*e.staking_apy_pct).toFixed(2)}%`},{label:"Fee Reduction",valueText:`${(100*e.fee_reduction_pct).toFixed(0)}%`},{label:"Crafting Cost",valueText:`${(100*e.crafting_cost_pct).toFixed(0)}%`},{label:"Forge Success",valueText:`${(100*e.forge_success_pct).toFixed(0)}%`}]}(d),[d]);return{slots:s,totals:d,totalsText:f,activeBuffs:h,setInvite:o,confirmSlot:c,revokeSlot:u,setSlots:i}},fv={},pv=(null==fv?void 0:fv.VITE_API_URL)||"http://localhost:4000";async function mv(e,t={}){const n=await fetch(`${pv}${e}`,{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!n.ok){const e=await n.text();throw new Error(`Request failed ${n.status}: ${e}`)}if(204!==n.status)return n.json()}const gv={upsertUser:async function(e){return mv("/users",{method:"POST",body:JSON.stringify({handle:e})})},getSlots:async function(e){return(await mv(`/team/slots/${encodeURIComponent(e)}`)).map(e=>({...e,expiresAt:e.expiresAt?new Date(e.expiresAt).getTime():void 0}))},setInvite:async function(e){await mv("/team/slots",{method:"POST",body:JSON.stringify(e)})},acceptSlot:async function(e){await mv("/team/slots/accept",{method:"POST",body:JSON.stringify({handle:e.invitedHandle,set:e.set})})},revokeSlot:async function(e){await mv("/team/slots/revoke",{method:"POST",body:JSON.stringify(e)})},getListings:async function(){return mv("/rental-board")},postListing:async function(e){return mv("/rental-board",{method:"POST",body:JSON.stringify(e)})},deleteListing:async function(e){await mv(`/rental-board/${encodeURIComponent(e)}`,{method:"DELETE"})},saveEquippedSets:async function(e){await mv("/equipped-sets",{method:"POST",body:JSON.stringify(e)})},getEquippedSets:async function(e){const t=await mv(`/equipped-sets/${encodeURIComponent(e)}`);return(null==t?void 0:t.sets)||[]}},vv=["mint","vault","siphon","architect","broker"],yv=({handle:t})=>{const{slots:n,totalsText:r,activeBuffs:s,setInvite:i,confirmSlot:a,revokeSlot:o}=hv({storageKey:"groupSlots:v1",handle:t,api:{getSlots:gv.getSlots,setInvite:gv.setInvite,acceptSlot:gv.acceptSlot,revokeSlot:gv.revokeSlot}}),[l,c]=u.useState([]),[d,h]=u.useState(""),[f,p]=u.useState(""),[m,g]=u.useState(""),[v,y]=u.useState(!1),[x,b]=u.useState([]);u.useEffect(()=>{(async()=>{y(!0);try{const e=await gv.getListings();c(e)}catch(e){}finally{y(!1)}})()},[]);u.useEffect(()=>{(async()=>{try{const e=await gv.getEquippedSets(t);b(e.filter(e=>vv.includes(e)))}catch(e){}})()},[t]);const w=e=>{switch(e){case"mint":return"from-emerald-600/30 to-emerald-900/30 border-emerald-500/40";case"vault":return"from-cyan-600/30 to-cyan-900/30 border-cyan-500/40";case"siphon":return"from-green-600/30 to-green-900/30 border-green-500/40";case"architect":return"from-orange-600/30 to-orange-900/30 border-orange-500/40";case"broker":return"from-purple-600/30 to-purple-900/30 border-purple-500/40";default:return"from-slate-700/30 to-slate-900/30 border-slate-600/40"}};return e.jsxs("div",{className:"bg-slate-900/60 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Team Slots"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Invite friends per set to gain small group buffs"})]}),e.jsxs("div",{className:"mb-5 bg-slate-800/60 border border-slate-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-white font-semibold",children:"Rental Board"}),e.jsx("span",{className:"text-[11px] text-slate-400",children:"List yourself for 7d team rentals"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 mb-2",children:[e.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-3 py-2 text-sm text-white md:col-span-2",placeholder:"Your handle / wallet",value:d,onChange:e=>h(e.target.value)}),e.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-3 py-2 text-sm text-white md:col-span-3",placeholder:"Availability, sets, expectations",value:f,onChange:e=>p(e.target.value)}),e.jsx("input",{className:"bg-slate-900 border border-slate-700 rounded px-3 py-2 text-sm text-white",placeholder:"Rate (BDAG)",value:m,onChange:e=>g(e.target.value)})]}),e.jsx("button",{className:"px-3 py-2 bg-emerald-600 text-white rounded text-sm font-semibold hover:bg-emerald-500",onClick:async()=>{const e=d.trim()||t,n=f.trim(),r=m.trim();if(e&&n){try{await gv.postListing({handle:e,message:n,rate:r});const t=await gv.getListings();c(t)}catch(s){}h(""),p(""),g("")}},children:"Post listing"}),v&&e.jsx("p",{className:"text-[11px] text-slate-400 mt-2",children:"Loading listings"}),l.length>0&&e.jsx("div",{className:"mt-3 max-h-52 overflow-y-auto space-y-2 pr-1",children:l.map(t=>{const n=Math.max(1,Math.floor((Date.now()-new Date(t.createdAt).getTime())/6e4));return e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded p-2 text-sm flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-semibold",children:[e.jsx("span",{children:t.userId}),t.rate&&e.jsxs("span",{className:"text-xs bg-emerald-500/20 text-emerald-200 px-2 py-0.5 rounded border border-emerald-500/40",children:[t.rate," BDAG"]})]}),e.jsx("p",{className:"text-slate-300 text-xs mt-1",children:t.message}),e.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Posted ",n,"m ago"]})]}),e.jsx("button",{className:"text-[11px] text-slate-400 hover:text-red-300",onClick:()=>(async e=>{try{await gv.deleteListing(e),c(t=>t.filter(t=>t.id!==e))}catch(t){}})(t.id),children:"Remove"})]},t.id)})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Equipped sets (validation)"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:vv.map(n=>{const r=x.includes(n);return e.jsx("button",{onClick:()=>(e=>{b(n=>{const r=n.includes(e)?n.filter(t=>t!==e):[...n,e];return gv.saveEquippedSets({handle:t,sets:r}),r})})(n),className:"px-3 py-1 rounded-full text-xs font-semibold border transition-colors "+(r?"bg-emerald-600/30 border-emerald-500/50 text-emerald-200":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700"),children:n},n)})}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:"Confirm only applies when the corresponding set is marked equipped."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:n.map((t,n)=>{const r=iv[t.set],s=x.includes(t.set),l=!!t.expiresAt&&t.expiresAt<Date.now(),c=s&&!!t.invitedId&&!l;return e.jsxs("div",{className:`bg-gradient-to-r ${w(t.set)} rounded-lg p-4 border`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-300 text-xs",children:"Slot"}),e.jsx("p",{className:"text-white font-bold text-lg uppercase",children:t.set})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-slate-300 text-xs",children:"Buff"}),e.jsx("p",{className:"text-emerald-300 font-bold text-sm",children:r.label})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("input",{placeholder:"Invite username / wallet",value:t.invitedId||"",onChange:e=>i(n,e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-white"})}),e.jsx("button",{onClick:()=>c?a(n):void 0,disabled:!c,className:"px-3 py-2 rounded font-bold text-xs transition-colors "+(t.confirmedWearing?"bg-emerald-600 text-white":c?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-slate-900 text-slate-600 border border-slate-700 cursor-not-allowed"),children:t.confirmedWearing?"Active ":c?"Confirm Wearing":l?"Re-invite (expired)":"Equip set first"})]}),t.invitedId&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Invited: ",t.invitedId]}),!s&&e.jsx("p",{className:"mt-1 text-[11px] text-amber-300",children:"Requires this set equipped before applying buff."}),t.confirmedWearing&&t.expiresAt&&e.jsxs("div",{className:"mt-1 text-[11px] text-emerald-300",children:["Expires in ",Math.max(0,t.expiresAt-Date.now())/1e3/60/60<24?`${Math.max(0,Math.floor((t.expiresAt-Date.now())/36e5))}h`:`${Math.max(0,Math.floor((t.expiresAt-Date.now())/864e5))}d`]}),l&&e.jsx("div",{className:"mt-1 text-[11px] text-red-300",children:"Expired  invite again to reactivate."}),(t.invitedId||t.confirmedWearing)&&e.jsx("div",{className:"mt-2 flex gap-2 text-[11px]",children:e.jsx("button",{className:"px-2 py-1 bg-slate-800 border border-slate-700 rounded text-slate-300 hover:bg-slate-700",onClick:()=>o(n),children:"Clear slot"})})]},n)})}),e.jsxs("div",{className:"bg-slate-800/60 border border-slate-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-slate-300 text-xs",children:"Group Buff Totals"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:r.map((t,n)=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:t.label}),e.jsx("p",{className:"text-sm font-bold text-white",children:t.valueText})]},n))}),0===s.length&&e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"No active buffs. Confirm wearing to apply."})]})]})},xv=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 01-2.25 2.25h-1.5a2.25 2.25 0 01-2.25-2.25v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"})}),bv=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),wv=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Nv=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("rect",{x:"6",y:"7",width:"12",height:"10",rx:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 3v4M15 3v4M9 17v4M15 17v4M12 10v4"})]}),kv=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7h-1V4a2 2 0 00-2-2h-2a2 2 0 00-2 2v3H9V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a6 6 0 006 6h6a6 6 0 006-6V9a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 16v-5"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16V4"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 16V4"})]}),Sv=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})}),_v=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})});function Ev(e,t){return function(){return e.apply(t,arguments)}}const{toString:Tv}=Object.prototype,{getPrototypeOf:jv}=Object,{iterator:Cv,toStringTag:Av}=Symbol,Iv=(e=>t=>{const n=Tv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Rv=e=>(e=e.toLowerCase(),t=>Iv(t)===e),Pv=e=>t=>typeof t===e,{isArray:Ov}=Array,Lv=Pv("undefined");function Dv(e){return null!==e&&!Lv(e)&&null!==e.constructor&&!Lv(e.constructor)&&Uv(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Mv=Rv("ArrayBuffer");const Fv=Pv("string"),Uv=Pv("function"),zv=Pv("number"),Bv=e=>null!==e&&"object"==typeof e,Vv=e=>{if("object"!==Iv(e))return!1;const t=jv(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Av in e||Cv in e)},qv=Rv("Date"),Hv=Rv("File"),$v=Rv("Blob"),Gv=Rv("FileList"),Wv=Rv("URLSearchParams"),[Kv,Qv,Xv,Yv]=["ReadableStream","Request","Response","Headers"].map(Rv);function Jv(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),Ov(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Dv(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(r=0;r<i;r++)a=s[r],t.call(null,e[a],a,e)}}function Zv(e,t){if(Dv(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const ey="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ty=e=>!Lv(e)&&e!==ey;const ny=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&jv(Uint8Array)),ry=Rv("HTMLFormElement"),sy=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),iy=Rv("RegExp"),ay=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Jv(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const oy=Rv("AsyncFunction"),ly=(cy="function"==typeof setImmediate,uy=Uv(ey.postMessage),cy?setImmediate:uy?(dy=`axios@${Math.random()}`,hy=[],ey.addEventListener("message",({source:e,data:t})=>{e===ey&&t===dy&&hy.length&&hy.shift()()},!1),e=>{hy.push(e),ey.postMessage(dy,"*")}):e=>setTimeout(e));var cy,uy,dy,hy;const fy="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ey):"undefined"!=typeof process&&process.nextTick||ly,py={isArray:Ov,isArrayBuffer:Mv,isBuffer:Dv,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Uv(e.append)&&("formdata"===(t=Iv(e))||"object"===t&&Uv(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Mv(e.buffer),t},isString:Fv,isNumber:zv,isBoolean:e=>!0===e||!1===e,isObject:Bv,isPlainObject:Vv,isEmptyObject:e=>{if(!Bv(e)||Dv(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Kv,isRequest:Qv,isResponse:Xv,isHeaders:Yv,isUndefined:Lv,isDate:qv,isFile:Hv,isBlob:$v,isRegExp:iy,isFunction:Uv,isStream:e=>Bv(e)&&Uv(e.pipe),isURLSearchParams:Wv,isTypedArray:ny,isFileList:Gv,forEach:Jv,merge:function e(){const{caseless:t,skipUndefined:n}=ty(this)&&this||{},r={},s=(s,i)=>{const a=t&&Zv(r,i)||i;Vv(r[a])&&Vv(s)?r[a]=e(r[a],s):Vv(s)?r[a]=e({},s):Ov(s)?r[a]=s.slice():n&&Lv(s)||(r[a]=s)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Jv(arguments[i],s);return r},extend:(e,t,n,{allOwnKeys:r}={})=>(Jv(t,(t,r)=>{n&&Uv(t)?e[r]=Ev(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&jv(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Iv,kindOfTest:Rv,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Ov(e))return e;let t=e.length;if(!zv(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Cv]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ry,hasOwnProperty:sy,hasOwnProp:sy,reduceDescriptors:ay,freezeMethods:e=>{ay(e,(t,n)=>{if(Uv(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Uv(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Ov(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Zv,global:ey,isContextDefined:ty,isSpecCompliantForm:function(e){return!!(e&&Uv(e.append)&&"FormData"===e[Av]&&e[Cv])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Bv(e)){if(t.indexOf(e)>=0)return;if(Dv(e))return e;if(!("toJSON"in e)){t[r]=e;const s=Ov(e)?[]:{};return Jv(e,(e,t)=>{const i=n(e,r+1);!Lv(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:oy,isThenable:e=>e&&(Bv(e)||Uv(e))&&Uv(e.then)&&Uv(e.catch),setImmediate:ly,asap:fy,isIterable:e=>null!=e&&Uv(e[Cv])};function my(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}py.inherits(my,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:py.toJSONObject(this.config),code:this.code,status:this.status}}});const gy=my.prototype,vy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vy[e]={value:e}}),Object.defineProperties(my,vy),Object.defineProperty(gy,"isAxiosError",{value:!0}),my.from=(e,t,n,r,s,i)=>{const a=Object.create(gy);py.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return my.call(a,o,l,n,r,s),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};function yy(e){return py.isPlainObject(e)||py.isArray(e)}function xy(e){return py.endsWith(e,"[]")?e.slice(0,-2):e}function by(e,t,n){return e?e.concat(t).map(function(e,t){return e=xy(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const wy=py.toFlatObject(py,{},null,function(e){return/^is[A-Z]/.test(e)});function Ny(e,t,n){if(!py.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=py.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!py.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,a=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&py.isSpecCompliantForm(t);if(!py.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(py.isDate(e))return e.toISOString();if(py.isBoolean(e))return e.toString();if(!o&&py.isBlob(e))throw new my("Blob is not supported. Use a Buffer instead.");return py.isArrayBuffer(e)||py.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"==typeof e)if(py.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(py.isArray(e)&&function(e){return py.isArray(e)&&!e.some(yy)}(e)||(py.isFileList(e)||py.endsWith(n,"[]"))&&(o=py.toArray(e)))return n=xy(n),o.forEach(function(e,r){!py.isUndefined(e)&&null!==e&&t.append(!0===a?by([n],r,i):null===a?n:n+"[]",l(e))}),!1;return!!yy(e)||(t.append(by(s,n,i),l(e)),!1)}const u=[],d=Object.assign(wy,{defaultVisitor:c,convertValue:l,isVisitable:yy});if(!py.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!py.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),py.forEach(n,function(n,i){!0===(!(py.isUndefined(n)||null===n)&&s.call(t,n,py.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t}function ky(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Sy(e,t){this._pairs=[],e&&Ny(e,this,t)}const _y=Sy.prototype;function Ey(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ty(e,t,n){if(!t)return e;const r=n&&n.encode||Ey;py.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):py.isURLSearchParams(t)?t.toString():new Sy(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}_y.append=function(e,t){this._pairs.push([e,t])},_y.toString=function(e){const t=e?function(t){return e.call(this,t,ky)}:ky;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class jy{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){py.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Cy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ay={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Sy,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Iy="undefined"!=typeof window&&"undefined"!=typeof document,Ry="object"==typeof navigator&&navigator||void 0,Py=Iy&&(!Ry||["ReactNative","NativeScript","NS"].indexOf(Ry.product)<0),Oy="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ly=Iy&&window.location.href||"http://localhost",Dy={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iy,hasStandardBrowserEnv:Py,hasStandardBrowserWebWorkerEnv:Oy,navigator:Ry,origin:Ly},Symbol.toStringTag,{value:"Module"})),...Ay};function My(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),o=s>=e.length;if(i=!i&&py.isArray(r)?r.length:i,o)return py.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&py.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&py.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(py.isFormData(e)&&py.isFunction(e.entries)){const n={};return py.forEachEntry(e,(e,r)=>{t(function(e){return py.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const Fy={transitional:Cy,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=py.isObject(e);s&&py.isHTMLForm(e)&&(e=new FormData(e));if(py.isFormData(e))return r?JSON.stringify(My(e)):e;if(py.isArrayBuffer(e)||py.isBuffer(e)||py.isStream(e)||py.isFile(e)||py.isBlob(e)||py.isReadableStream(e))return e;if(py.isArrayBufferView(e))return e.buffer;if(py.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ny(e,new Dy.classes.URLSearchParams,{visitor:function(e,t,n,r){return Dy.isNode&&py.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=py.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ny(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(py.isString(e))try{return(t||JSON.parse)(e),py.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Fy.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(py.isResponse(e)||py.isReadableStream(e))return e;if(e&&py.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(s){if(n){if("SyntaxError"===s.name)throw my.from(s,my.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dy.classes.FormData,Blob:Dy.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};py.forEach(["delete","get","head","post","put","patch"],e=>{Fy.headers[e]={}});const Uy=py.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zy=Symbol("internals");function By(e){return e&&String(e).trim().toLowerCase()}function Vy(e){return!1===e||null==e?e:py.isArray(e)?e.map(Vy):String(e)}function qy(e,t,n,r,s){return py.isFunction(r)?r.call(this,t,n):(s&&(t=n),py.isString(t)?py.isString(r)?-1!==t.indexOf(r):py.isRegExp(r)?r.test(t):void 0:void 0)}let Hy=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=By(t);if(!s)throw new Error("header name must be a non-empty string");const i=py.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Vy(e))}const i=(e,t)=>py.forEach(e,(e,n)=>s(e,n,t));if(py.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(py.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&Uy[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(py.isObject(e)&&py.isIterable(e)){let n,r,s={};for(const t of e){if(!py.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?py.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=By(e)){const n=py.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(py.isFunction(t))return t.call(this,e,n);if(py.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=By(e)){const n=py.findKey(this,e);return!(!n||void 0===this[n]||t&&!qy(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=By(e)){const s=py.findKey(n,e);!s||t&&!qy(0,n[s],s,t)||(delete n[s],r=!0)}}return py.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!qy(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return py.forEach(this,(r,s)=>{const i=py.findKey(n,s);if(i)return t[i]=Vy(r),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=Vy(r),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return py.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&py.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[zy]=this[zy]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=By(e);t[r]||(!function(e,t){const n=py.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return py.isArray(e)?e.forEach(r):r(e),this}};function $y(e,t){const n=this||Fy,r=t||n,s=Hy.from(r.headers);let i=r.data;return py.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Gy(e){return!(!e||!e.__CANCEL__)}function Wy(e,t,n){my.call(this,null==e?"canceled":e,my.ERR_CANCELED,t,n),this.name="CanceledError"}function Ky(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new my("Request failed with status code "+n.status,[my.ERR_BAD_REQUEST,my.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Hy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),py.reduceDescriptors(Hy.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),py.freezeMethods(Hy),py.inherits(Wy,my,{__CANCEL__:!0});const Qy=(e,t,n=3)=>{let r=0;const s=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];s||(s=l),n[i]=o,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,s=0,i=1e3/t;const a=(t,i=Date.now())=>{s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-s;o>=i?a(e,t):(n=e,r||(r=setTimeout(()=>{r=null,a(n)},i-o)))},()=>n&&a(n)]}(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,o=i-r,l=s(o);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Xy=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Yy=e=>(...t)=>py.asap(()=>e(...t)),Jy=Dy.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Dy.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Dy.origin),Dy.navigator&&/(msie|trident)/i.test(Dy.navigator.userAgent)):()=>!0,Zy=Dy.hasStandardBrowserEnv?{write(e,t,n,r,s,i,a){if("undefined"==typeof document)return;const o=[`${e}=${encodeURIComponent(t)}`];py.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),py.isString(r)&&o.push(`path=${r}`),py.isString(s)&&o.push(`domain=${s}`),!0===i&&o.push("secure"),py.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ex(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const tx=e=>e instanceof Hy?{...e}:e;function nx(e,t){t=t||{};const n={};function r(e,t,n,r){return py.isPlainObject(e)&&py.isPlainObject(t)?py.merge.call({caseless:r},e,t):py.isPlainObject(t)?py.merge({},t):py.isArray(t)?t.slice():t}function s(e,t,n,s){return py.isUndefined(t)?py.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!py.isUndefined(t))return r(void 0,t)}function a(e,t){return py.isUndefined(t)?py.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(tx(e),tx(t),0,!0)};return py.forEach(Object.keys({...e,...t}),function(r){const i=l[r]||s,a=i(e[r],t[r],r);py.isUndefined(a)&&i!==o||(n[r]=a)}),n}const rx=e=>{const t=nx({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=t;if(t.headers=a=Hy.from(a),t.url=Ty(ex(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),py.isFormData(n))if(Dy.hasStandardBrowserEnv||Dy.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(py.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&a.set(e,n)})}if(Dy.hasStandardBrowserEnv&&(r&&py.isFunction(r)&&(r=r(t)),r||!1!==r&&Jy(t.url))){const e=s&&i&&Zy.read(i);e&&a.set(s,e)}return t},sx="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=rx(e);let s=r.data;const i=Hy.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Hy.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ky(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new my("Request aborted",my.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const r=new my(t&&t.message?t.message:"Network Error",my.ERR_NETWORK,e,m);r.event=t||null,n(r),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Cy;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new my(t,s.clarifyTimeoutError?my.ETIMEDOUT:my.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&py.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),py.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=Qy(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Qy(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new Wy(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Dy.protocols.indexOf(v)?n(new my("Unsupported protocol "+v+":",my.ERR_BAD_REQUEST,e)):m.send(s||null)})},ix=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof my?t:new Wy(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new my(`timeout ${t} of ms exceeded`,my.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>py.asap(a),o}},ax=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},ox=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},lx=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of ox(e))yield*ax(n,t)}(e,t);let i,a=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:cx}=py,ux=(({Request:e,Response:t})=>({Request:e,Response:t}))(py.global),{ReadableStream:dx,TextEncoder:hx}=py.global,fx=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},px=e=>{e=py.merge.call({skipUndefined:!0},ux,e);const{fetch:t,Request:n,Response:r}=e,s=t?cx(t):"function"==typeof fetch,i=cx(n),a=cx(r);if(!s)return!1;const o=s&&cx(dx),l=s&&("function"==typeof hx?(e=>t=>e.encode(t))(new hx):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=i&&o&&fx(()=>{let e=!1;const t=new n(Dy.origin,{body:new dx,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=a&&o&&fx(()=>py.isReadableStream(new r("").body)),d={stream:u&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new my(`Response type '${e}' is not supported`,my.ERR_NOT_SUPPORT,n)})});const h=async(e,t)=>{const r=py.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(py.isBlob(e))return e.size;if(py.isSpecCompliantForm(e)){const t=new n(Dy.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return py.isArrayBufferView(e)||py.isArrayBuffer(e)?e.byteLength:(py.isURLSearchParams(e)&&(e+=""),py.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:s,method:a,data:o,signal:l,cancelToken:f,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:v,headers:y,withCredentials:x="same-origin",fetchOptions:b}=rx(e),w=t||fetch;v=v?(v+"").toLowerCase():"text";let N=ix([l,f&&f.toAbortSignal()],p),k=null;const S=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let _;try{if(g&&c&&"get"!==a&&"head"!==a&&0!==(_=await h(y,o))){let e,t=new n(s,{method:"POST",body:o,duplex:"half"});if(py.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Xy(_,Qy(Yy(g)));o=lx(t.body,65536,e,n)}}py.isString(x)||(x=x?"include":"omit");const t=i&&"credentials"in n.prototype,l={...b,signal:N,method:a.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?x:void 0};k=i&&new n(s,l);let f=await(i?w(k,b):w(s,l));const p=u&&("stream"===v||"response"===v);if(u&&(m||p&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});const t=py.toFiniteNumber(f.headers.get("content-length")),[n,s]=m&&Xy(t,Qy(Yy(m),!0))||[];f=new r(lx(f.body,65536,n,()=>{s&&s(),S&&S()}),e)}v=v||"text";let E=await d[py.findKey(d,v)||"text"](f,e);return!p&&S&&S(),await new Promise((t,n)=>{Ky(t,n,{data:E,headers:Hy.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:k})})}catch(E){if(S&&S(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new my("Network Error",my.ERR_NETWORK,e,k),{cause:E.cause||E});throw my.from(E,E&&E.code,e,k)}}},mx=new Map,gx=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let a,o,l=i.length,c=mx;for(;l--;)a=i[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:px(t)),c=o;return o};gx();const vx={http:null,xhr:sx,fetch:{get:gx}};py.forEach(vx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const yx=e=>`- ${e}`,xx=e=>py.isFunction(e)||null===e||!1===e;const bx={getAdapter:function(e,t){e=py.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let a=0;a<n;a++){let n;if(r=e[a],s=r,!xx(r)&&(s=vx[(n=String(r)).toLowerCase()],void 0===s))throw new my(`Unknown adapter '${n}'`);if(s&&(py.isFunction(s)||(s=s.get(t))))break;i[n||"#"+a]=s}if(!s){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new my("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(yx).join("\n"):" "+yx(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s},adapters:vx};function wx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Wy(null,e)}function Nx(e){wx(e),e.headers=Hy.from(e.headers),e.data=$y.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return bx.getAdapter(e.adapter||Fy.adapter,e)(e).then(function(t){return wx(e),t.data=$y.call(e,e.transformResponse,t),t.headers=Hy.from(t.headers),t},function(t){return Gy(t)||(wx(e),t&&t.response&&(t.response.data=$y.call(e,e.transformResponse,t.response),t.response.headers=Hy.from(t.response.headers))),Promise.reject(t)})}const kx="1.13.2",Sx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const _x={};Sx.transitional=function(e,t,n){return(r,s,i)=>{if(!1===e)throw new my(function(e,t){return"[Axios v"+kx+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(s," has been removed"+(t?" in "+t:"")),my.ERR_DEPRECATED);return t&&!_x[s]&&(_x[s]=!0),!e||e(r,s,i)}},Sx.spelling=function(e){return(e,t)=>!0};const Ex={assertOptions:function(e,t,n){if("object"!=typeof e)throw new my("options must be an object",my.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new my("option "+i+" must be "+n,my.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new my("Unknown option "+i,my.ERR_BAD_OPTION)}},validators:Sx},Tx=Ex.validators;let jx=class{constructor(e){this.defaults=e||{},this.interceptors={request:new jy,response:new jy}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=nx(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&Ex.assertOptions(n,{silentJSONParsing:Tx.transitional(Tx.boolean),forcedJSONParsing:Tx.transitional(Tx.boolean),clarifyTimeoutError:Tx.transitional(Tx.boolean)},!1),null!=r&&(py.isFunction(r)?t.paramsSerializer={serialize:r}:Ex.assertOptions(r,{encode:Tx.function,serialize:Tx.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ex.assertOptions(t,{baseUrl:Tx.spelling("baseURL"),withXsrfToken:Tx.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&py.merge(s.common,s[t.method]);s&&py.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=Hy.concat(i,s);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[Nx.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=Nx.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Ty(ex((e=nx(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};py.forEach(["delete","get","head","options"],function(e){jx.prototype[e]=function(t,n){return this.request(nx(n||{},{method:e,url:t,data:(n||{}).data}))}}),py.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(nx(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}jx.prototype[e]=t(),jx.prototype[e+"Form"]=t(!0)});const Cx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Cx).forEach(([e,t])=>{Cx[t]=e});const Ax=function e(t){const n=new jx(t),r=Ev(jx.prototype.request,n);return py.extend(r,jx.prototype,n,{allOwnKeys:!0}),py.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(nx(t,n))},r}(Fy);Ax.Axios=jx,Ax.CanceledError=Wy,Ax.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Wy(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},Ax.isCancel=Gy,Ax.VERSION=kx,Ax.toFormData=Ny,Ax.AxiosError=my,Ax.Cancel=Ax.CanceledError,Ax.all=function(e){return Promise.all(e)},Ax.spread=function(e){return function(t){return e.apply(null,t)}},Ax.isAxiosError=function(e){return py.isObject(e)&&!0===e.isAxiosError},Ax.mergeConfig=nx,Ax.AxiosHeaders=Hy,Ax.formToJSON=e=>My(py.isHTMLForm(e)?new FormData(e):e),Ax.getAdapter=bx.getAdapter,Ax.HttpStatusCode=Cx,Ax.default=Ax;const{Axios:Ix,AxiosError:Rx,CanceledError:Px,isCancel:Ox,CancelToken:Lx,VERSION:Dx,all:Mx,Cancel:Fx,isAxiosError:Ux,spread:zx,toFormData:Bx,AxiosHeaders:Vx,HttpStatusCode:qx,formToJSON:Hx,getAdapter:$x,mergeConfig:Gx}=Ax,Wx="23TV6D",Kx="http://localhost:3000/auth/fitbit-callback",Qx="https://www.fitbit.com/oauth2/authorize",Xx="https://api.fitbit.com/1";const Yx=new class{constructor(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=0,this.userId=null,this.loadTokensFromStorage(),this.initializeApiClient()}initializeApiClient(){this.apiClient=Ax.create({baseURL:Xx,headers:{Accept:"application/json",Authorization:this.accessToken?`Bearer ${this.accessToken}`:""}}),this.apiClient.interceptors.request.use(async e=>(this.isTokenExpired()&&await this.refreshAccessToken(),this.accessToken&&(e.headers.Authorization=`Bearer ${this.accessToken}`),e),e=>Promise.reject(e)),this.apiClient.interceptors.response.use(e=>e,async e=>{var t;if(401===(null==(t=e.response)?void 0:t.status))try{return await this.refreshAccessToken(),this.apiClient(e.config)}catch(n){throw this.clearTokens(),n}return Promise.reject(e)})}isTokenExpired(){return Date.now()>=this.tokenExpiry}loadTokensFromStorage(){const e=localStorage.getItem("fitbit_tokens");if(e)try{const{accessToken:t,refreshToken:n,tokenExpiry:r,userId:s}=JSON.parse(e);this.accessToken=t,this.refreshToken=n,this.tokenExpiry=r,this.userId=s}catch(t){localStorage.removeItem("fitbit_tokens")}}saveTokensToStorage(){localStorage.setItem("fitbit_tokens",JSON.stringify({accessToken:this.accessToken,refreshToken:this.refreshToken,tokenExpiry:this.tokenExpiry,userId:this.userId}))}clearTokens(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=0,this.userId=null,localStorage.removeItem("fitbit_tokens")}startOAuthFlow(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("fitbit_oauth_state",e);const t=new URL(Qx);t.searchParams.append("client_id",Wx),t.searchParams.append("response_type","code"),t.searchParams.append("scope","activity heartrate sleep profile"),t.searchParams.append("redirect_uri",Kx),t.searchParams.append("state",e),t.searchParams.append("prompt","login"),window.location.href=t.toString()}async handleOAuthCallback(e,t){const n=sessionStorage.getItem("fitbit_oauth_state");if(!n)return!1;if(t!==n)return!1;try{const t=(await Ax.post("http://localhost:4000/fitbit/token",{code:e,redirect_uri:Kx})).data;return this.accessToken=t.access_token,this.refreshToken=t.refresh_token,this.tokenExpiry=Date.now()+1e3*t.expires_in,this.userId=t.user_id,this.saveTokensToStorage(),this.initializeApiClient(),sessionStorage.removeItem("fitbit_oauth_state"),!0}catch(r){return!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const e=(await Ax.post("http://localhost:4000/fitbit/refresh",{refresh_token:this.refreshToken})).data;return this.accessToken=e.access_token,this.refreshToken=e.refresh_token||this.refreshToken,this.tokenExpiry=Date.now()+1e3*e.expires_in,this.saveTokensToStorage(),this.initializeApiClient(),!0}catch(e){return this.clearTokens(),!1}}isAuthenticated(){return!!this.accessToken&&!this.isTokenExpired()}async getUserProfile(){try{return(await this.apiClient.get("/user/-/profile.json")).data.user}catch(e){throw e}}async getTodayHealthData(){const e=(new Date).toISOString().split("T")[0];return this.getHealthDataForDate(e)}async getHealthDataForDate(e){var t,n,r,s,i,a;try{const[o,l,c,u,d,h,f]=await Promise.all([this.apiClient.get(`/user/-/activities/date/${e}.json`),this.apiClient.get(`/user/-/activities/date/${e}.json`),this.apiClient.get(`/user/-/sleep/date/${e}.json`),this.apiClient.get(`/user/-/activities/date/${e}.json`),this.apiClient.get(`/user/-/activities/heart/date/${e}/1d.json`),this.apiClient.get(`/user/-/activities/date/${e}.json`),this.apiClient.get(`/user/-/activities/date/${e}.json`)]),p=(null==(t=o.data.summary)?void 0:t.steps)||0,m=(null==(n=l.data.summary)?void 0:n.floors)||0;let g=75;if(c.data.sleep&&c.data.sleep.length>0){const e=c.data.sleep.reduce((e,t)=>e+t.duration/36e5,0);g=Math.min(100,Math.max(0,12.5*e))}const v=(null==(r=u.data.summary)?void 0:r.caloriesBurned)||0;let y=70;if(d.data["activities-heart"]&&d.data["activities-heart"].length>0){y=(null==(s=d.data["activities-heart"][0].value)?void 0:s.restingHeartRate)||70}const x=(null==(i=h.data.summary)?void 0:i.fairlyActiveMinutes)||0,b=(null==(a=f.data.summary)?void 0:a.distance)||0;return{steps:Math.round(p),stairs:Math.round(m),sleepScore:Math.round(g),calories:Math.round(v),heartRate:Math.round(y),activeMinutes:Math.round(x),distance:Number(b.toFixed(2)),floors:Math.round(m)}}catch(o){return this.getDefaultHealthData()}}getDefaultHealthData(){return{steps:8500,stairs:12,sleepScore:78,calories:2250,heartRate:72,activeMinutes:45,distance:6.5,floors:12}}async getIntradayData(e,t){try{return(await this.apiClient.get(`/user/-/activities/${t}/date/${e}/1d/1min.json`)).data}catch(n){throw n}}setupContinuousSync(e,t=3e4){const n=setInterval(async()=>{try{if(this.isAuthenticated()){const t=await this.getTodayHealthData();e(t)}}catch(t){}},t);return()=>clearInterval(n)}logout(){this.clearTokens()}getUserId(){return this.userId}getAccessToken(){return this.accessToken}},Jx=["Block_Master","DAG_Miner","Crypto_King","Chain_Link","Node_Operator","Ledger_Legend","Hash_Hero","Token_Titan","Satoshi_Seeker","Web3_Warrior","DeFi_Dude","Smart_Contractor","Gas_Guzzler","Altcoin_Ace","Bull_Runner","Hodl_Hero","Moon_Mission","Rocket_Rider","Wallet_Watcher","Key_Keeper","Secure_Signer","P2P_Peer","Network_Ninja","Consensus_Captain","Genesis_Block"],Zx=()=>Jx[Math.floor(Math.random()*Jx.length)],eb=[{id:"tier1",name:"Grand Jackpot",rangeLabel:"1st Place",count:1,poolPercent:.25,icon:Ae,colorClass:"text-rose-500",bgGradient:"bg-gradient-to-r from-rose-500/20 to-transparent",border:"border-rose-500/50",glow:"shadow-[0_0_10px_rgba(244,63,94,0.5)]"},{id:"tier2",name:"Diamond Tier",rangeLabel:"2nd - 5th",count:4,poolPercent:.2,icon:Ie,colorClass:"text-purple-500",bgGradient:"bg-gradient-to-r from-purple-500/20 to-transparent",border:"border-purple-500/50",glow:"shadow-[0_0_10px_rgba(168,85,247,0.5)]"},{id:"tier3",name:"Gold Tier",rangeLabel:"6th - 20th",count:15,poolPercent:.25,icon:Re,colorClass:"text-amber-400",bgGradient:"bg-gradient-to-r from-amber-400/20 to-transparent",border:"border-amber-400/50",glow:"shadow-[0_0_10px_rgba(251,191,36,0.5)]"},{id:"tier4",name:"Silver Tier",rangeLabel:"21st - 50th",count:30,poolPercent:.3,icon:Pe,colorClass:"text-cyan-400",bgGradient:"bg-gradient-to-r from-cyan-400/20 to-transparent",border:"border-cyan-400/50",glow:"shadow-[0_0_10px_rgba(34,211,238,0.5)]"}],tb=({stats:t})=>e.jsxs("div",{className:"w-full h-48 flex items-end justify-center gap-4 relative",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 group w-16",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-white transition-colors",children:"80%"}),e.jsx("div",{className:"w-12 bg-rose-500 rounded-t-lg shadow-[0_0_15px_rgba(244,63,94,0.4)] transition-all h-[80%] hover:brightness-110"}),e.jsx("span",{className:"text-[10px] font-bold text-rose-500 uppercase",children:"Payout"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 group w-16",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-white transition-colors",children:"12%"}),e.jsx("div",{className:"w-12 bg-cyan-400 rounded-t-lg shadow-[0_0_15px_rgba(34,211,238,0.4)] transition-all h-[12%] hover:brightness-110"}),e.jsx("span",{className:"text-[10px] font-bold text-cyan-400 uppercase",children:"Grant"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 group w-16",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-white transition-colors",children:"8%"}),e.jsx("div",{className:"w-12 bg-purple-500 rounded-t-lg shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all h-[8%] hover:brightness-110"}),e.jsx("span",{className:"text-[10px] font-bold text-purple-500 uppercase",children:"Burn"})]})]}),nb=({grantPoolAmount:t,isVisible:n})=>n?e.jsxs("div",{className:"mt-8 border border-cyan-500/20 bg-cyan-950/20 rounded-xl p-4 flex items-start gap-4 animate-fadeIn",children:[e.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-full",children:e.jsx(ze,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 uppercase tracking-wide mb-1",children:"Grant Pool Advisor"}),e.jsxs("p",{className:"text-sm text-slate-300",children:["The Grant Pool has accumulated ",e.jsxs("span",{className:"text-white font-bold",children:["$",t.toLocaleString(void 0,{maximumFractionDigits:0})]})," this month. This fund supports community proposals voted on by the DAO."]})]})]}):null,rb=async(e,t,n)=>{n("[INIT] Connecting to BlockDAG Network..."),await new Promise(e=>setTimeout(e,800)),n("[AUTH] Verifying contract owner permissions... SUCCESS"),await new Promise(e=>setTimeout(e,600)),n("[CALC] Verifying randomness (VRF) seed..."),await new Promise(e=>setTimeout(e,800)),n(`[CALC] Batch processing ${e.length} addresses...`);const r=await Promise.all(e.map(async(e,t)=>(await new Promise(e=>setTimeout(e,100*Math.random())),t%5==0&&n(`[TX] Processing batch ${Math.floor(t/5)+1}...`),{...e,transactionHash:`0x${Array(64).fill(0).map(()=>Math.floor(16*Math.random()).toString(16)).join("").substring(0,16)}...`})));return n(`[DONE] ${e.length} Payouts Confirmed. Gas used: 0.045 BDAG.`),n(`[EVENT] EmissionCompleted(poolId=4421, total=${t})`),r},sb=({isOpen:t,onClose:n,userBdagBalance:r,setUserBdagBalance:s})=>{var i,a;const[o,c]=l.useState(12500),[u,d]=l.useState([]),[h,f]=l.useState("IDLE"),[p,m]=l.useState(!1),[g,v]=l.useState([]),[y,x]=l.useState("buy"),[b,w]=l.useState(null),[N,k]=l.useState(10),[S,_]=l.useState([]),E=l.useRef(null),[T,j]=l.useState(!1),[C,A]=l.useState(.05),[I,R]=l.useState(!1);l.useEffect(()=>{(async()=>{R(!0),await new Promise(e=>setTimeout(e,500)),A(.005*Math.random()-.0025+.05),R(!1)})()},[]);const P=l.useMemo(()=>{const e=C>0?C:.05;return Math.round(2.5/e)},[2.5,C]),O=l.useMemo(()=>({totalPool:o,payoutPool:.8*o,grantPool:.12*o,buybackPool:.08*o,winnerCount:50}),[o]),L=O.payoutPool*eb[0].poolPercent;l.useEffect(()=>{E.current&&E.current.scrollIntoView({behavior:"smooth"})},[S]),l.useEffect(()=>{if(!t)return;const e=Array.from({length:142}).map((e,t)=>({id:`user-${t}`,name:Zx(),ticketCount:1,joinedAt:new Date(Date.now()-1e7*Math.random())}));d(e)},[t]),l.useEffect(()=>{if(!t||"IDLE"!==h)return;const e=setInterval(()=>{k(t=>t<=1?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[t,h]);const D=l.useCallback((e,t)=>{const n=.8*e,r=[...t].sort(()=>.5-Math.random()).slice(0,50);let s=1;const i=[];for(const a of eb){const e=n*a.poolPercent/a.count,t=a.count;r.slice(s-1,s-1+t).forEach((t,n)=>{i.push({...t,rank:s+n,prizeAmount:e,transactionHash:"PENDING"})}),s+=t}return i.sort((e,t)=>e.rank-t.rank)},[]),M=l.useCallback(async()=>{if(r<P)return void alert(`Insufficient BDAG Balance! You need ${P} BDAG.`);j(!0),await new Promise(e=>setTimeout(e,1500)),c(e=>e+10),s(r-P);const e={id:`user-${Date.now()}`,name:"You",ticketCount:1,joinedAt:new Date};d(t=>[e,...t]),j(!1)},[r,P,10,s]),F=l.useCallback(async()=>{if(0!==u.length){f("DRAWING"),_([]);try{const e=D(o,u),t=await rb(e,O.payoutPool,e=>_(t=>[...t,e])),n=`raffle-${Date.now()}`,r={id:n,date:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}).toUpperCase(),totalPool:o,winners:t};v(e=>[r,...e]),await new Promise(e=>setTimeout(e,1e3)),x("history"),w(n),c(12500),d(Array.from({length:50}).map((e,t)=>({id:`new-user-${t}`,name:Zx(),ticketCount:1,joinedAt:new Date}))),f("IDLE"),k(10)}catch(e){_(t=>[...t,`[ERROR] Transaction Failed: ${e}`]),f("IDLE")}}},[u,o,D,O.payoutPool]);l.useEffect(()=>{},[N,h,t]);return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md overflow-hidden p-4 sm:p-6",onClick:n,children:[e.jsxs("div",{className:"w-full h-full max-w-7xl bg-slate-950 rounded-3xl border border-slate-800 shadow-2xl overflow-hidden flex flex-col relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-6 right-6 z-50 p-2 bg-slate-900/80 rounded-full text-slate-400 hover:text-white hover:bg-rose-500 transition-all border border-white/10",children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"border-b border-white/10 bg-slate-900/60 p-4 sm:px-8 h-20 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative w-10 h-10",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-[0_0_10px_rgba(244,63,94,0.5)]",children:[e.jsx("path",{d:"M50 8 L88 28 V72 L50 92 L12 72 V28 Z",fill:"none",stroke:"#F43F5E",strokeWidth:"3"}),e.jsx("circle",{cx:"50",cy:"50",r:"4",fill:"#F43F5E"})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400 uppercase leading-none",children:"BlockDAG"}),e.jsx("span",{className:"text-[10px] font-bold text-rose-500 tracking-[0.3em] uppercase",children:"Community Raffle"})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3 bg-white/5 border border-white/10 rounded-full py-1.5 px-4",children:[e.jsx("div",{className:"bg-purple-500/20 p-1.5 rounded-full",children:e.jsx(Le,{className:"w-4 h-4 text-purple-500"})}),e.jsxs("div",{className:"flex flex-col items-end leading-none",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:"Your Balance"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[r.toLocaleString()," BDAG"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 sm:p-8 scrollbar-hide",children:[e.jsxs("div",{className:"text-center mb-12 animate-fadeIn",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2 mb-6 border border-amber-400/30 bg-amber-400/10 text-amber-400 text-xs font-bold uppercase tracking-widest rounded-full shadow-[0_0_15px_rgba(251,191,36,0.2)]",children:[e.jsx(De,{className:"w-4 h-4"}),"Monthly Prize Pool"]}),e.jsx("div",{className:"relative inline-block mb-8",children:e.jsxs("span",{className:"text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-br from-rose-500 via-purple-500 to-cyan-400 tracking-tighter drop-shadow-[0_10px_20px_rgba(139,92,246,0.3)]",children:["$",o.toLocaleString()]})}),e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-0 text-sm font-bold border border-white/10 rounded-full bg-slate-900/40 backdrop-blur-sm overflow-hidden divide-x divide-white/10 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white px-6 py-3",children:[e.jsx(Me,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{children:[u.length," ENTRIES"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white px-6 py-3",children:[e.jsx(Fe,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"font-mono",children:(e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(N)})]})]}),e.jsxs("button",{onClick:()=>m(!0),className:"group flex items-center gap-2 px-6 py-2 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-rose-500/50 text-white text-xs font-bold uppercase tracking-widest transition-all",children:["View Payout Tiers ",e.jsx(Ue,{className:"w-4 h-4 text-rose-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-2xl p-6 border border-white/5 relative overflow-hidden group hover:border-rose-500/50 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-500/5 to-transparent opacity-50"}),e.jsx(De,{className:"absolute -top-4 -right-4 w-24 h-24 text-rose-500 opacity-10 group-hover:opacity-20 transition-all transform rotate-12"}),e.jsxs("div",{className:"absolute top-4 right-4 z-20 group/info",children:[e.jsx(ze,{className:"w-4 h-4 text-white/40 hover:text-rose-500 cursor-help transition-colors"}),e.jsx("div",{className:"absolute top-6 right-0 w-64 bg-slate-800 border border-rose-500/50 rounded-lg p-3 opacity-0 invisible group-hover/info:opacity-100 group-hover/info:visible transition-all shadow-xl",children:e.jsx("p",{className:"text-xs text-white/90",children:"80% of the prize pool is distributed to raffle winners across multiple tiers. The top prize winner receives the largest share, with decreasing amounts for subsequent tiers."})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 mb-4 relative z-10",children:[e.jsx(Be,{className:"w-4 h-4"})," ",e.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Winners (80%)"})]}),e.jsxs("div",{className:"text-3xl font-black text-white mb-4 relative z-10",children:["$",O.payoutPool.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("div",{className:"border-t border-white/10 pt-3 relative z-10",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold block",children:"Top Prize"}),e.jsxs("span",{className:"text-lg font-black text-rose-500",children:["$",L.toLocaleString(void 0,{maximumFractionDigits:0})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-2xl p-6 border border-white/5 relative overflow-hidden group hover:border-cyan-400/50 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-400/5 to-transparent opacity-50"}),e.jsx(Ve,{className:"absolute -top-4 -right-4 w-24 h-24 text-cyan-400 opacity-10 group-hover:opacity-20 transition-all transform rotate-12"}),e.jsxs("div",{className:"absolute top-4 right-4 z-20 group/info",children:[e.jsx(ze,{className:"w-4 h-4 text-white/40 hover:text-cyan-400 cursor-help transition-colors"}),e.jsx("div",{className:"absolute top-6 right-0 w-64 bg-slate-800 border border-cyan-400/50 rounded-lg p-3 opacity-0 invisible group-hover/info:opacity-100 group-hover/info:visible transition-all shadow-xl",children:e.jsx("p",{className:"text-xs text-white/90",children:"12% of the prize pool funds ecosystem development grants. This supports developers, creators, and community initiatives that grow the BlockDAG ecosystem."})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 mb-4 relative z-10",children:[e.jsx(Ve,{className:"w-4 h-4"})," ",e.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Grants (12%)"})]}),e.jsxs("div",{className:"text-3xl font-black text-white mb-4 relative z-10",children:["$",O.grantPool.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("div",{className:"border-t border-white/10 pt-3 relative z-10",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold block",children:"Purpose"}),e.jsx("span",{className:"text-sm font-bold text-cyan-400 uppercase",children:"Ecosystem Growth"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-2xl p-6 border border-white/5 relative overflow-hidden group hover:border-purple-500/50 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-50"}),e.jsx(qe,{className:"absolute -top-4 -right-4 w-24 h-24 text-purple-500 opacity-10 group-hover:opacity-20 transition-all transform rotate-12"}),e.jsxs("div",{className:"absolute top-4 right-4 z-20 group/info",children:[e.jsx(ze,{className:"w-4 h-4 text-white/40 hover:text-purple-500 cursor-help transition-colors"}),e.jsx("div",{className:"absolute top-6 right-0 w-64 bg-slate-800 border border-purple-500/50 rounded-lg p-3 opacity-0 invisible group-hover/info:opacity-100 group-hover/info:visible transition-all shadow-xl",children:e.jsx("p",{className:"text-xs text-white/90",children:"8% of the prize pool is held in escrow for strategic buybacks. Similar to XRP's escrow mechanism, these funds are released on a schedule to support market stability and token value."})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-purple-500 mb-4 relative z-10",children:[e.jsx(He,{className:"w-4 h-4"})," ",e.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Buybacks (8%)"})]}),e.jsxs("div",{className:"text-3xl font-black text-white mb-4 relative z-10",children:["$",O.buybackPool.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("div",{className:"border-t border-white/10 pt-3 relative z-10",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold block",children:"Mechanism"}),e.jsx("span",{className:"text-sm font-bold text-purple-500 uppercase",children:"Escrow"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[e.jsxs("div",{className:"lg:col-span-1 bg-slate-900/50 rounded-2xl p-6 border border-white/5 flex flex-col items-center justify-center shadow-lg",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 w-full text-left tracking-wide text-xs uppercase flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-rose-500"})," Distribution"]}),e.jsx(tb,{stats:O})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/50 rounded-2xl border border-white/5 flex flex-col overflow-hidden shadow-lg relative min-h-[400px]",children:[e.jsxs("div",{className:"flex border-b border-white/10 bg-slate-900",children:[e.jsxs("button",{onClick:()=>{x("buy"),w(null)},className:"flex-1 py-4 text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all "+("buy"===y?"text-white bg-rose-500/10 border-b-2 border-rose-500":"text-slate-400 hover:text-white hover:bg-white/5"),children:[e.jsx(Ge,{className:"w-4 h-4 "+("buy"===y?"text-rose-500":"")})," Buy Tickets"]}),e.jsxs("button",{onClick:()=>x("history"),className:"flex-1 py-4 text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all "+("history"===y?"text-white bg-cyan-400/10 border-b-2 border-cyan-400":"text-slate-400 hover:text-white hover:bg-white/5"),children:[e.jsx(Fe,{className:"w-4 h-4 "+("history"===y?"text-cyan-400":"")})," History"]})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col relative",children:["buy"===y&&e.jsx(e.Fragment,{children:"DRAWING"===h?e.jsxs("div",{className:"flex-1 flex flex-col h-full animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-cyan-400 text-xs font-mono",children:[e.jsx(We,{className:"w-3 h-3"})," SECURE CONNECTION"]})]}),e.jsxs("div",{className:"flex-1 bg-black/80 rounded-lg border border-cyan-400/30 p-4 font-mono text-xs overflow-hidden flex flex-col shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-500 mb-3 border-b border-white/10 pb-2",children:[e.jsx(Ke,{className:"w-3 h-3"})," ",e.jsx("span",{className:"uppercase tracking-widest font-bold",children:"BlockDAG Contract v2.1"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-1.5 pr-2",ref:E,children:[S.map((t,n)=>e.jsxs("div",{className:"break-all",children:[e.jsx("span",{className:"text-cyan-400 mr-2",children:">"}),e.jsx("span",{className:t.includes("ERROR")?"text-red-500":t.includes("SUCCESS")?"text-green-400 font-bold":t.includes("EVENT")?"text-purple-400":"text-slate-400",children:t})]},n)),e.jsx("div",{ref:E})]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center text-xs text-slate-400 uppercase tracking-wider",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-3 h-3 animate-bounce text-rose-500"})," Executing..."]}),e.jsx("span",{children:"~5s"})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center animate-fadeIn",children:[e.jsxs("div",{className:"mb-4 relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-rose-500 blur-2xl opacity-20 group-hover:opacity-40 transition-opacity"}),e.jsx(Qe,{className:"w-20 h-20 text-rose-500 fill-slate-900 stroke-[1.5] relative z-10"}),e.jsx(Ge,{className:"w-8 h-8 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20"})]}),e.jsx("h3",{className:"text-2xl font-black text-white mb-2 uppercase tracking-wide",children:"Get Your Tickets"}),e.jsx("p",{className:"text-slate-400 mb-8 max-w-sm text-sm",children:"Revenue-Driven Strategy: Sustainable growth through a hybrid entry model."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 sm:gap-8 mb-4 p-4 bg-slate-800/50 border border-white/10 rounded-2xl shadow-inner w-full max-w-md",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-cyan-400"}),e.jsxs("span",{className:"text-2xl font-black text-white",children:["$",7.5.toFixed(2)]})]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Cash (USD)"})]}),e.jsx("div",{className:"text-slate-500 font-bold text-lg",children:"+"}),e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-2xl font-black text-purple-500",children:I?e.jsx(Ye,{className:"w-5 h-5 animate-spin"}):P})]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"BDAG Coins"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-mono mb-6 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[e.jsx(Je,{className:"w-3 h-3 text-cyan-400"}),e.jsx("span",{children:I?"Fetching Price...":`1 BDAG  $${C.toFixed(4)} USD`})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs items-center",children:[e.jsx("button",{onClick:M,disabled:T||I,className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 hover:to-rose-500 text-white rounded-xl px-6 py-3 shadow-lg shadow-rose-900/30 border border-white/10 disabled:opacity-70 disabled:cursor-not-allowed transition-all",children:T?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 animate-spin"})," Processing..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"font-bold uppercase tracking-wider text-sm",children:"Buy Ticket"})," ",e.jsx(Ze,{className:"w-4 h-4"})]})}),e.jsx("button",{onClick:F,className:"text-xs text-slate-500 hover:text-white transition-colors font-mono font-bold uppercase tracking-widest border-b border-dashed border-slate-700 hover:border-white pb-0.5",children:"[ Admin: Initiate Draw ]"})]})]})}),"history"===y&&e.jsx("div",{className:"h-full flex flex-col",children:b?e.jsxs("div",{className:"flex flex-col h-full animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>w(null),className:"p-1.5 bg-white/5 border border-white/5 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(tt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white text-sm tracking-wide",children:null==(i=g.find(e=>e.id===b))?void 0:i.date}),e.jsxs("div",{className:"flex items-center gap-1.5 text-cyan-400 mt-0.5",children:[e.jsx(nt,{className:"w-3 h-3"})," ",e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Confirmed"})]})]})]}),e.jsxs("div",{className:"flex-1 bg-white/5 border border-white/5 rounded-xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-3 bg-black/20 text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5",children:[e.jsx("div",{className:"col-span-2 text-center",children:"Rank"}),e.jsx("div",{className:"col-span-5",children:"User"}),e.jsx("div",{className:"col-span-5 text-right",children:"Prize"})]}),e.jsx("div",{className:"overflow-y-auto flex-1 scrollbar-thin",children:null==(a=g.find(e=>e.id===b))?void 0:a.winners.map(t=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors items-center text-xs group",children:[e.jsx("div",{className:"col-span-2 flex justify-center",children:e.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-[10px] font-bold rounded-md border "+(1===t.rank?"bg-rose-500/20 text-rose-500 border-rose-500/50":t.rank<=5?"bg-purple-500/20 text-purple-500 border-purple-500/50":"bg-slate-800 text-slate-500 border-slate-700"),children:t.rank})}),e.jsx("div",{className:"col-span-5 font-bold text-white truncate group-hover:text-cyan-400 transition-colors uppercase",children:t.name}),e.jsxs("div",{className:"col-span-5 text-right text-rose-500 font-bold",children:["$",t.prizeAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},t.id))})]})]}):e.jsx("div",{className:"space-y-3 overflow-y-auto pr-2 scrollbar-thin",children:0===g.length?e.jsx("div",{className:"text-center py-12 text-slate-600 font-bold uppercase tracking-widest border border-dashed border-white/5 rounded-xl",children:"No history found"}):g.map(t=>e.jsxs("button",{onClick:()=>w(t.id),className:"w-full bg-slate-800/30 hover:bg-white/5 border border-white/5 hover:border-cyan-400/30 rounded-xl p-4 flex items-center justify-between group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-white/5 rounded-lg text-slate-400 group-hover:text-cyan-400 transition-colors",children:e.jsx(et,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-bold text-white text-sm tracking-wide group-hover:text-cyan-400 transition-colors",children:t.date}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono mt-0.5",children:["POOL: ",e.jsxs("span",{className:"text-white font-bold",children:["$",t.totalPool.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-bold mb-0.5",children:"Top Prize"}),e.jsxs("p",{className:"text-cyan-400 font-bold font-mono",children:["$",(.8*t.totalPool*.25).toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsx(Ue,{className:"w-4 h-4 text-slate-600 group-hover:text-cyan-400"})]})]},t.id))})})]})]})]}),e.jsx(nb,{grantPoolAmount:O.grantPool,isVisible:"COMPLETED"===h||O.grantPool>1e3})]})]}),p&&e.jsxs("div",{className:"absolute inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-white/10 bg-slate-900",children:[e.jsxs("h2",{className:"text-base font-bold text-white tracking-widest uppercase flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-rose-500"})," Prize Structure"]}),e.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-white p-1.5 rounded-lg hover:bg-white/5",children:e.jsx(Oe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-br from-slate-800 to-slate-900 border border-rose-500/30 rounded-xl text-center",children:[e.jsx("p",{className:"text-rose-500 text-[10px] font-bold uppercase tracking-[0.3em] mb-1",children:"Total Winner Pool"}),e.jsxs("p",{className:"text-4xl font-black text-white",children:["$",O.payoutPool.toLocaleString()]})]}),e.jsx("div",{className:"space-y-3",children:eb.map(t=>{const n=O.payoutPool*t.poolPercent/t.count;return e.jsxs("div",{className:`relative overflow-hidden border ${t.border} rounded-xl bg-slate-800/50 p-4 flex items-center justify-between`,children:[e.jsx("div",{className:`absolute inset-0 ${t.bgGradient} opacity-20`}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:`p-2 rounded-lg border border-white/10 ${t.colorClass} bg-slate-900`,children:e.jsx(t.icon,{className:"w-4 h-4 fill-current"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold text-sm ${t.colorClass} tracking-wide`,children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white font-medium mt-0.5",children:[e.jsx("span",{className:"bg-slate-900/50 px-1.5 py-0.5 rounded border border-white/10 text-slate-400 uppercase tracking-wider",children:t.rangeLabel}),e.jsxs("span",{className:"text-slate-500 font-bold",children:[t.count," Winner",t.count>1?"s":""]})]})]})]}),e.jsxs("div",{className:"text-right relative z-10",children:[e.jsx("p",{className:"text-[9px] text-slate-500 uppercase tracking-widest font-bold mb-0.5",children:"Payout Each"}),e.jsxs("p",{className:"text-base font-bold text-white",children:["$",n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},t.id)})})]})]})]})]}):null};class ib extends d{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new db(e)}),this.register(function(e){return new hb(e)}),this.register(function(e){return new wb(e)}),this.register(function(e){return new Nb(e)}),this.register(function(e){return new kb(e)}),this.register(function(e){return new pb(e)}),this.register(function(e){return new mb(e)}),this.register(function(e){return new gb(e)}),this.register(function(e){return new vb(e)}),this.register(function(e){return new ub(e)}),this.register(function(e){return new yb(e)}),this.register(function(e){return new fb(e)}),this.register(function(e){return new bb(e)}),this.register(function(e){return new xb(e)}),this.register(function(e){return new lb(e)}),this.register(function(e){return new Sb(e)}),this.register(function(e){return new _b(e)})}load(e,t,n,r){const s=this;let i;if(""!==this.resourcePath)i=this.resourcePath;else if(""!==this.path){const t=h.extractUrlBase(e);i=h.resolveURL(t,this.path)}else i=h.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){r&&r(t),s.manager.itemError(e),s.manager.itemEnd(e)},o=new f(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{s.parse(n,i,function(n){t(n),s.manager.itemEnd(e)},a)}catch(r){a(r)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const i={},a={},o=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer){if(o.decode(new Uint8Array(e,0,4))===Eb){try{i[ob.KHR_BINARY_GLTF]=new Cb(e)}catch(c){return void(r&&r(c))}s=JSON.parse(i[ob.KHR_BINARY_GLTF].content)}else s=JSON.parse(o.decode(e))}else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new tw(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](l);e.name,a[e.name]=e,i[e.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const e=s.extensionsUsed[u],t=s.extensionsRequired||[];switch(e){case ob.KHR_MATERIALS_UNLIT:i[e]=new cb;break;case ob.KHR_DRACO_MESH_COMPRESSION:i[e]=new Ab(s,this.dracoLoader);break;case ob.KHR_TEXTURE_TRANSFORM:i[e]=new Ib;break;case ob.KHR_MESH_QUANTIZATION:i[e]=new Rb;break;default:t.indexOf(e)>=0&&a[e]}}l.setExtensions(i),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function ab(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ob={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class lb{constructor(e){this.parser=e,this.name=ob.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,i=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const o=new g(16777215);void 0!==i.color&&o.setRGB(i.color[0],i.color[1],i.color[2],v);const l=void 0!==i.range?i.range:0;switch(i.type){case"directional":a=new w(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new b(o),a.distance=l;break;case"spot":a=new x(o),a.distance=l,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,a.angle=i.spot.outerConeAngle,a.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return a.position.set(0,0,0),a.decay=2,Qb(a,i),void 0!==i.intensity&&(a.intensity=i.intensity),a.name=t.createUniqueName(i.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],s=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then(function(e){return n._getNodeRef(t.cache,s,e)})}}class cb{constructor(){this.name=ob.KHR_MATERIALS_UNLIT}getMaterialType(){return G}extendParams(e,t,n){const r=[];e.color=new g(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],v),e.opacity=t[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,y))}return Promise.all(r)}}class ub{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class db{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){const e=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new m(e,e)}return Promise.all(s)}}class hb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class fb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return void 0!==i.iridescenceFactor&&(t.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(t.iridescenceIOR=i.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}}class pb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new g(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=r.extensions[this.name];if(void 0!==i.sheenColorFactor){const e=i.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],v)}return void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",i.sheenColorTexture,y)),void 0!==i.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}}class mb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(s)}}class gb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const a=i.attenuationColor||[1,1,1];return t.attenuationColor=(new g).setRGB(a[0],a[1],a[2],v),Promise.all(s)}}class vb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class yb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));const a=i.specularColorFactor||[1,1,1];return t.specularColor=(new g).setRGB(a[0],a[1],a[2],v),void 0!==i.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",i.specularColorTexture,y)),Promise.all(s)}}class xb{constructor(e){this.parser=e,this.name=ob.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return t.bumpScale=void 0!==i.bumpFactor?i.bumpFactor:1,void 0!==i.bumpTexture&&s.push(n.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(s)}}class bb{constructor(e){this.parser=e,this.name=ob.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return void 0!==i.anisotropyStrength&&(t.anisotropy=i.anisotropyStrength),void 0!==i.anisotropyRotation&&(t.anisotropyRotation=i.anisotropyRotation),void 0!==i.anisotropyTexture&&s.push(n.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(s)}}class wb{constructor(e){this.parser=e,this.name=ob.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,i)}}class Nb{constructor(e){this.parser=e,this.name=ob.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],a=r.images[i.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(s){if(s)return n.loadTextureImage(e,i.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class kb{constructor(e){this.parser=e,this.name=ob.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],a=r.images[i.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(s){if(s)return n.loadTextureImage(e,i.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Sb{constructor(e){this.name=ob.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(t){const n=e.byteOffset||0,r=e.byteLength||0,i=e.count,a=e.byteStride,o=new Uint8Array(t,n,r);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(i,a,o,e.mode,e.filter).then(function(e){return e.buffer}):s.ready.then(function(){const t=new ArrayBuffer(i*a);return s.decodeGltfBuffer(new Uint8Array(t),i,a,o,e.mode,e.filter),t})})}return null}}class _b{constructor(e){this.name=ob.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const o of r.primitives)if(o.mode!==Db.TRIANGLES&&o.mode!==Db.TRIANGLE_STRIP&&o.mode!==Db.TRIANGLE_FAN&&void 0!==o.mode)return null;const s=n.extensions[this.name].attributes,i=[],a={};for(const o in s)i.push(this.parser.getDependency("accessor",s[o]).then(e=>(a[o]=e,a[o])));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,s=[];for(const i of n){const e=new N,t=new k,n=new _,o=new k(1,1,1),l=new S(i.geometry,i.material,r);for(let s=0;s<r;s++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,s),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,s),a.SCALE&&o.fromBufferAttribute(a.SCALE,s),l.setMatrixAt(s,e.compose(t,n,o));for(const r in a)if("_COLOR_0"===r){const e=a[r];l.instanceColor=new E(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&i.geometry.setAttribute(r,a[r]);T.prototype.copy.call(l,i),this.parser.assignFinalMaterial(l),s.push(l)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]}))}}const Eb="glTF",Tb=1313821514,jb=5130562;class Cb{constructor(e){this.name=ob.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Eb)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let i=0;for(;i<r;){const t=s.getUint32(i,!0);i+=4;const r=s.getUint32(i,!0);if(i+=4,r===Tb){const r=new Uint8Array(e,12+i,t);this.content=n.decode(r)}else if(r===jb){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ab{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ob.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,a={},o={},l={};for(const c in i){const e=Bb[c]||c.toLowerCase();a[e]=i[c]}for(const c in e.attributes){const t=Bb[c]||c.toLowerCase();if(void 0!==i[c]){const r=n.accessors[e.attributes[c]],s=Mb[r.componentType];l[t]=s.name,o[t]=!0===r.normalized}}return t.getDependency("bufferView",s).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)},a,l,v,n)})})}}class Ib{constructor(){this.name=ob.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Rb{constructor(){this.name=ob.KHR_MESH_QUANTIZATION}}class Pb extends ye{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let i=0;i!==r;i++)t[i]=n[s+i];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=r-t,u=(n-t)/c,d=u*u,h=d*u,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let x=0;x!==a;x++){const e=i[p+x+a],t=i[p+x+o]*c,n=i[f+x+a],r=i[f+x]*c;s[x]=v*e+y*t+m*n+g*r}return s}}const Ob=new _;class Lb extends Pb{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Ob.fromArray(s).normalize().toArray(s),s}}const Db={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Mb={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Fb={9728:M,9729:D,9984:L,9985:O,9986:P,9987:R},Ub={33071:z,33648:U,10497:F},zb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Bb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Vb={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},qb={CUBICSPLINE:void 0,LINEAR:ue,STEP:ce},Hb="OPAQUE",$b="MASK",Gb="BLEND";function Wb(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new H({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ve})),e.DefaultMaterial}function Kb(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Qb(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function Xb(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}}}function Yb(e){let t;const n=e.extensions&&e.extensions[ob.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Jb(n.attributes):e.indices+":"+Jb(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,s=e.targets.length;r<s;r++)t+=":"+Jb(e.targets[r]);return t}function Jb(e){let t="";const n=Object.keys(e).sort();for(let r=0,s=n.length;r<s;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Zb(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const ew=new N;class tw{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ab,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,i=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);r=n&&t?parseInt(t[1],10):-1,s=e.indexOf("Firefox")>-1,i=s?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&r<17||s&&i<98?this.textureLoader=new j(this.options.manager):this.textureLoader=new C(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return Kb(s,i,r),Qb(i,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(i)})).then(function(){for(const e of i.scenes)e.updateMatrixWorld();e(i)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,i]of e.children.entries())s(i,t.children[r])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[ob.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(e,s){n.load(h.resolveURL(t.uri,r.path),e,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=zb[r.type],t=Mb[r.componentType],n=!0===r.normalized,s=new t(r.count*e);return Promise.resolve(new A(s,e,n))}const s=[];return void 0!==r.bufferView?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(e){const s=e[0],i=zb[r.type],a=Mb[r.componentType],o=a.BYTES_PER_ELEMENT,l=o*i,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let h,f;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new a(s,e*u,r.count*u/o),l=new I(h,u/o),t.cache.add(n,l)),f=new de(l,i,c%u/o,d)}else h=null===s?new a(r.count*i):new a(s,c,r.count*i),f=new A(h,i,d);if(void 0!==r.sparse){const t=zb.SCALAR,n=Mb[r.sparse.indices.componentType],o=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],o,r.sparse.count*t),u=new a(e[2],l,r.sparse.count*i);null!==s&&(f=new A(f.array.slice(),f.itemSize,f.normalized)),f.normalized=!1;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(f.setX(t,u[e*i]),i>=2&&f.setY(t,u[e*i+1]),i>=3&&f.setZ(t,u[e*i+2]),i>=4&&f.setW(t,u[e*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}f.normalized=d}return f})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,s=t.images[r];let i=this.textureLoader;if(s.uri){const e=n.manager.getHandler(s.uri);null!==e&&(i=e)}return this.loadTextureImage(e,r,i)}loadTextureImage(e,t,n){const r=this,s=this.json,i=s.textures[e],a=s.images[t],o=(a.uri||a.bufferView)+":"+i.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=i.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(s.samplers||{})[i.sampler]||{};return t.magFilter=Fb[n.magFilter]||D,t.minFilter=Fb[n.minFilter]||R,t.wrapS=Ub[n.wrapS]||F,t.wrapT=Ub[n.wrapT]||F,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==M&&t.minFilter!==D,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const i=r.images[e],a=self.URL||self.webkitURL;let o=i.uri||"",l=!1;if(void 0!==i.bufferView)o=n.getDependency("bufferView",i.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t),o});else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then(function(e){return new Promise(function(n,r){let i=n;!0===t.isImageBitmapLoader&&(i=function(e){const t=new he(e);t.needsUpdate=!0,n(t)}),t.load(h.resolveURL(e,s.path),i,void 0,r)})}).then(function(e){var t;return!0===l&&a.revokeObjectURL(o),Qb(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e}).catch(function(e){throw e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(i){if(!i)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((i=i.clone()).channel=n.texCoord),s.extensions[ob.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[ob.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(i);i=s.extensions[ob.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),s.associations.set(i,t)}}return void 0!==r&&(i.colorSpace=r),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new B,V.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new q,V.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||s||i){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),i&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),s&&(t.vertexColors=!0),i&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return H}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let i;const a={},o=[];if((s.extensions||{})[ob.KHR_MATERIALS_UNLIT]){const e=r[ob.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),o.push(e.extendParams(a,s,t))}else{const n=s.pbrMetallicRoughness||{};if(a.color=new g(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],v),a.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(a,"map",n.baseColorTexture,y)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),i=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=$);const l=s.alphaMode||Hb;if(l===Gb?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===$b&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&i!==G&&(o.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new m(1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==s.occlusionTexture&&i!==G&&(o.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&i!==G){const e=s.emissiveFactor;a.emissive=(new g).setRGB(e[0],e[1],e[2],v)}return void 0!==s.emissiveTexture&&i!==G&&o.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,y)),Promise.all(o).then(function(){const n=new i(a);return s.name&&(n.name=s.name),Qb(n,s),t.associations.set(n,{materials:e}),s.extensions&&Kb(r,n,s),n})}createUniqueName(e){const t=W.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(e){return n[ob.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return nw(n,e,t)})}const i=[];for(let a=0,o=e.length;a<o;a++){const n=e[a],o=Yb(n),l=r[o];if(l)i.push(l.promise);else{let e;e=n.extensions&&n.extensions[ob.KHR_DRACO_MESH_COMPRESSION]?s(n):nw(new K,n,t),r[o]={primitive:n,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],i=s.primitives,a=[];for(let o=0,l=i.length;o<l;o++){const e=void 0===i[o].material?Wb(this.cache):this.getDependency("material",i[o].material);a.push(e)}return a.push(t.loadGeometries(i)),Promise.all(a).then(function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let u=0,d=o.length;u<d;u++){const n=o[u],c=i[u];let d;const h=a[u];if(c.mode===Db.TRIANGLES||c.mode===Db.TRIANGLE_STRIP||c.mode===Db.TRIANGLE_FAN||void 0===c.mode)d=!0===s.isSkinnedMesh?new Q(n,h):new X(n,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),c.mode===Db.TRIANGLE_STRIP?d.geometry=Y(d.geometry,we):c.mode===Db.TRIANGLE_FAN&&(d.geometry=Y(d.geometry,Ne));else if(c.mode===Db.LINES)d=new J(n,h);else if(c.mode===Db.LINE_STRIP)d=new Z(n,h);else if(c.mode===Db.LINE_LOOP)d=new ee(n,h);else{if(c.mode!==Db.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new te(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&Xb(d,s),d.name=t.createUniqueName(s.name||"mesh_"+e),Qb(d,s),c.extensions&&Kb(r,d,c),t.assignFinalMaterial(d),l.push(d)}for(let r=0,s=l.length;r<s;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return s.extensions&&Kb(r,l[0],s),l[0];const c=new ne;s.extensions&&Kb(r,c,s),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new re(se.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new ie(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Qb(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const t=e.pop(),n=e,r=[],s=[];for(let i=0,a=n.length;i<a;i++){const e=n[i];if(e){r.push(e);const n=new N;null!==t&&n.fromArray(t.array,16*i),s.push(n)}}return new ae(r,s)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,i=[],a=[],o=[],l=[],c=[];for(let u=0,d=r.channels.length;u<d;u++){const e=r.channels[u],t=r.samplers[e.sampler],n=e.target,s=n.node,d=void 0!==r.parameters?r.parameters[t.input]:t.input,h=void 0!==r.parameters?r.parameters[t.output]:t.output;void 0!==n.node&&(i.push(this.getDependency("node",s)),a.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=[];for(let s=0,c=t.length;s<c;s++){const e=t[s],c=r[s],u=i[s],d=a[s],h=o[s];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const f=n._createAnimationTracks(e,c,u,d,h);if(f)for(let t=0;t<f.length;t++)l.push(f[t])}return new oe(s,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),s=[],i=n.children||[];for(let o=0,l=i.length;o<l;o++)s.push(t.getDependency("node",i[o]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(s),a]).then(function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,ew)});for(let s=0,i=n.length;s<i;s++)t.add(n[s]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=t.nodes[e],i=s.name?r.createUniqueName(s.name):"",a=[],o=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&a.push(o),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(e){return r._getNodeRef(r.cameraCache,s.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if(a=!0===s.isBone?new le:t.length>1?new ne:1===t.length?t[0]:new T,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(s.name&&(a.userData.name=s.name,a.name=i),Qb(a,s),s.extensions&&Kb(n,a,s),void 0!==s.matrix){const e=new N;e.fromArray(s.matrix),a.applyMatrix4(e)}else void 0!==s.translation&&a.position.fromArray(s.translation),void 0!==s.rotation&&a.quaternion.fromArray(s.rotation),void 0!==s.scale&&a.scale.fromArray(s.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new ne;n.name&&(s.name=r.createUniqueName(n.name)),Qb(s,n),n.extensions&&Kb(t,s,n);const i=n.nodes||[],a=[];for(let o=0,l=i.length;o<l;o++)a.push(r.getDependency("node",i[o]));return Promise.all(a).then(function(e){for(let t=0,n=e.length;t<n;t++)s.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[n,s]of r.associations)(n instanceof V||n instanceof he)&&t.set(n,s);return e.traverse(e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(s),s})}_createAnimationTracks(e,t,n,r,s){const i=[],a=e.name?e.name:e.uuid,o=[];let l;switch(Vb[s.path]===Vb.weights?e.traverse(function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)}):o.push(a),Vb[s.path]){case Vb.weights:l=pe;break;case Vb.rotation:l=me;break;case Vb.position:case Vb.scale:l=fe;break;default:if(1===n.itemSize)l=pe;else l=fe}const c=void 0!==r.interpolation?qb[r.interpolation]:ue,u=this._getArrayFromAccessor(n);for(let d=0,h=o.length;d<h;d++){const e=new l(o[d]+"."+Vb[s.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(e),i.push(e)}return i}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=Zb(t.constructor),n=new Float32Array(t.length);for(let r=0,s=t.length;r<s;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof me?Lb:Pb)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function nw(e,t,n){const r=t.attributes,s=[];function i(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}for(const a in r){const t=Bb[a]||a.toLowerCase();t in e.attributes||s.push(i(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});s.push(r)}return ge.workingColorSpace,Qb(e,t),function(e,t,n){const r=t.attributes,s=new xe;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,i=e.max;if(void 0===t||void 0===i)return;if(s.set(new k(t[0],t[1],t[2]),new k(i[0],i[1],i[2])),e.normalized){const t=Zb(Mb[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const i=t.targets;if(void 0!==i){const e=new k,t=new k;for(let r=0,s=i.length;r<s;r++){const s=i[r];if(void 0!==s.POSITION){const r=n.json.accessors[s.POSITION],i=r.min,a=r.max;if(void 0!==i&&void 0!==a){if(t.setX(Math.max(Math.abs(i[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(i[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(i[2]),Math.abs(a[2]))),r.normalized){const e=Zb(Mb[r.componentType]);t.multiplyScalar(e)}e.max(t)}}}s.expandByVector(e)}e.boundingBox=s;const a=new be;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(s).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,s=!1,i=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(s=!0),void 0!==e.COLOR_0&&(i=!0),r&&s&&i)break}if(!r&&!s&&!i)return Promise.resolve(e);const a=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(s){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(i){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(t){const n=t[0],a=t[1],o=t[2];return r&&(e.morphAttributes.position=n),s&&(e.morphAttributes.normal=a),i&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}const rw=({modelData:t,modelUrl:n,isLoading:r=!1,onError:s,size:i="medium"})=>{const a=l.useRef(null),o=l.useRef(null),c=l.useRef(null),d=l.useRef(null),[h,f]=u.useState(!1),p={small:{width:120,height:120},medium:{width:200,height:200},large:{width:320,height:320}}[i];l.useEffect(()=>{if(!a.current)return;const e=new ke;e.background=new g(1976635);const r=new re(75,p.width/p.height,.1,1e3);r.position.z=2;const s=new Se({antialias:!0,alpha:!0});s.setSize(p.width,p.height),s.setPixelRatio(window.devicePixelRatio),a.current.appendChild(s.domElement);const i=new _e(16777215,.7);e.add(i);const l=new w(16777215,.8);l.position.set(5,10,7),e.add(l),o.current=e,c.current=s,(t||n)&&m(t||n,e);const u=requestAnimationFrame(function t(){requestAnimationFrame(t),d.current&&(d.current.rotation.y+=.005),s.render(e,r)}),h=()=>{a.current&&(r.aspect=p.width/p.height,r.updateProjectionMatrix(),s.setSize(p.width,p.height))};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),cancelAnimationFrame(u),a.current&&s.domElement.parentNode===a.current&&a.current.removeChild(s.domElement),s.dispose()}},[p]);const m=(e,t)=>{f(!1);try{let n=function(e){d.current&&t.remove(d.current);const n=e.scene,r=(new xe).setFromObject(n),s=r.getCenter(new k),i=r.getSize(new k);n.position.sub(s);const a=1.5/Math.max(i.x,i.y,i.z);n.scale.multiplyScalar(a),t.add(n),d.current=n,f(!0)},r=function(e){e.loaded,e.total};const i=new ib;e.startsWith("data:")?i.load(e,n,r,e=>{const t=`Failed to load model: ${e.message}`;null==s||s(t),f(!1)}):i.load(e,n,r,e=>{const t=`Failed to load model: ${e.message}`;null==s||s(t),f(!1)})}catch(n){const e=n instanceof Error?n.message:"Unknown error";null==s||s(e),f(!1)}};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:a,style:{width:p.width,height:p.height,borderRadius:"50%",overflow:"hidden",border:"3px solid rgb(34, 211, 238)",boxShadow:"0 0 20px rgba(34, 211, 238, 0.3)"}}),(r||!h)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-slate-800/50",style:{width:p.width,height:p.height},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Loading avatar..."})]})})]})},sw=({avatarSettings:t,size:n="medium",autoRotate:r=!0,className:s=""})=>{const i=l.useRef(null),a=l.useRef(null),o=l.useRef(null),c=l.useRef(null),u=l.useRef(null),d=l.useRef(null),h={small:{width:80,height:80},medium:{width:120,height:120},large:{width:160,height:160}}[n],f=(e,t)=>{for(;e.children.length>0;)e.remove(e.children[0]);const n=new Ee(.6,32,32);let r;if(t.faceImageData){const e=document.createElement("canvas"),n=e.getContext("2d"),i=new Image;i.onload=()=>{if(e.width=512,e.height=512,n){n.drawImage(i,0,0,512,512);const t=new Te(e);t.flipY=!1;const r=new H({map:t});s.material=r}},i.src=t.faceImageData,r=new H({color:t.skinTone,metalness:.1,roughness:.8})}else r=new H({color:t.skinTone,metalness:.1,roughness:.8});const s=new X(n,r);s.position.y=.2,e.add(s);const i=new Ee(.12,16,16),a=new H({color:t.eyeColor,metalness:.3,roughness:.4}),o=new X(i,a);o.position.set(-.2,.5,.5),e.add(o);const l=new X(i,a);l.position.set(.2,.5,.5),e.add(l);const c=p(t.hairStyle),u=new H({color:t.hairColor,metalness:.1,roughness:.7}),d=new X(c,u);d.position.y=1.1,e.add(d);const h=m(t.bodyType),f=new H({color:t.clothingColor,metalness:.05,roughness:.9}),g=new X(h,f);g.position.y=-.6,e.add(g)},p=e=>{switch(e){case"short":default:return new Ee(.7,32,32,0,2*Math.PI,0,.6*Math.PI);case"medium":return new Ee(.75,32,32,0,2*Math.PI,0,.7*Math.PI);case"long":return new je(.65,1.2,32);case"curly":const e=new Ee(.8,16,16),t=e.attributes.position,n=t.array;for(let r=0;r<n.length;r+=3)n[r]+=.3*(Math.random()-.5),n[r+1]+=.3*(Math.random()-.5),n[r+2]+=.3*(Math.random()-.5);return t.needsUpdate=!0,e}},m=e=>{let t=.6,n=.35;return"slim"===e?(t=.5,n=.3):"athletic"===e&&(t=.7,n=.4),new Ce(t,1,n)};return l.useEffect(()=>{if(!i.current)return;const e=new ke;e.background=new g(1976635),a.current=e;const n=new re(75,h.width/h.height,.1,1e3);n.position.z=2,c.current=n;const s=new Se({antialias:!0,alpha:!0});s.setSize(h.width,h.height),s.setPixelRatio(window.devicePixelRatio),i.current.appendChild(s.domElement),o.current=s;const l=new _e(16777215,.6);e.add(l);const p=new w(16777215,.8);p.position.set(5,5,5),e.add(p);const m=new ne;e.add(m),u.current=m,f(m,t);const v=()=>{d.current=requestAnimationFrame(v),r&&m&&(m.rotation.y+=.01),s.render(e,n)};return v(),()=>{d.current&&cancelAnimationFrame(d.current),i.current&&s.domElement.parentNode===i.current&&i.current.removeChild(s.domElement),s.dispose()}},[h,r]),l.useEffect(()=>{u.current&&f(u.current,t)},[t]),e.jsx("div",{ref:i,className:`rounded-full overflow-hidden border-4 border-cyan-500 shadow-lg shadow-cyan-500/20 inline-block ${s}`,style:{width:`${h.width}px`,height:`${h.height}px`}})},iw=({avatarSettings:t,size:n="small",autoRotate:r=!0})=>{const s=l.useRef(null),i=l.useRef(null),a=l.useRef(null),o=l.useRef(null),c=l.useRef(null),u=l.useRef(null),d={small:{width:200,height:400},medium:{width:280,height:500}}[n],h=(e,t)=>{for(;e.children.length>0;)e.remove(e.children[0]);const n=new Ee(.35,48,48);let r;if(t.faceImageData){const e=document.createElement("canvas"),n=e.getContext("2d"),i=new Image;i.onload=()=>{if(e.width=512,e.height=512,n){n.drawImage(i,0,0,512,512);const t=new Te(e);t.flipY=!1;const r=new H({map:t,metalness:.1,roughness:.8});s.material=r}},i.src=t.faceImageData,r=new H({color:t.skinTone,metalness:.1,roughness:.8})}else r=new H({color:t.skinTone,metalness:.1,roughness:.8});const s=new X(n,r);s.position.y=2.5,e.add(s);const i=new Ee(.08,32,32),a=new H({color:t.eyeColor,metalness:.3,roughness:.4}),o=new X(i,a);o.position.set(-.12,2.7,.3),e.add(o);const l=new X(i,a);l.position.set(.12,2.7,.3),e.add(l);const c=f(t.hairStyle),u=new H({color:t.hairColor,metalness:.1,roughness:.7}),d=new X(c,u);d.position.y=2.9,e.add(d);const h=new Ce(.5,1.2,.3),p=new H({color:t.clothingColor,metalness:.05,roughness:.9}),m=new X(h,p);m.position.y=1.2,e.add(m);const g=new Ce(.15,1,.2),v=new H({color:t.skinTone,metalness:.1,roughness:.8}),y=new X(g,v);y.position.set(-.4,1.5,0),e.add(y);const x=new X(g,v);x.position.set(.4,1.5,0),e.add(x);const b=new Ce(.18,1.2,.2),w=new H({color:"#2c2c2c",metalness:.05,roughness:.9}),N=new X(b,w);N.position.set(-.18,0,0),e.add(N);const k=new X(b,w);k.position.set(.18,0,0),e.add(k);const S=new Ce(.2,.2,.3),_=new H({color:"#1a1a1a",metalness:.1,roughness:.9}),E=new X(S,_);E.position.set(-.18,-.65,.05),e.add(E);const T=new X(S,_);T.position.set(.18,-.65,.05),e.add(T)},f=e=>{switch(e){case"short":return new Ee(.4,32,32,0,2*Math.PI,0,.5*Math.PI);case"medium":return new Ee(.42,32,32,0,2*Math.PI,0,.6*Math.PI);case"long":return new je(.4,.8,32);case"curly":const e=new Ee(.45,16,16),t=e.attributes.position,n=t.array;for(let r=0;r<n.length;r+=3)n[r]+=.15*(Math.random()-.5),n[r+1]+=.15*(Math.random()-.5),n[r+2]+=.15*(Math.random()-.5);return t.needsUpdate=!0,e;default:return new Ee(.4,32,32)}};return l.useEffect(()=>{if(!s.current)return;const e=new ke;e.background=new g(1976635),i.current=e;const n=new re(60,d.width/d.height,.1,1e3);n.position.z=3.5,o.current=n;const l=new Se({antialias:!0,alpha:!0});l.setSize(d.width,d.height),l.setPixelRatio(window.devicePixelRatio),s.current.appendChild(l.domElement),a.current=l;const f=new _e(16777215,.7);e.add(f);const p=new w(16777215,.8);p.position.set(3,5,3),e.add(p);const m=new ne;e.add(m),c.current=m,h(m,t);const v=()=>{if(u.current=requestAnimationFrame(v),r&&m){m.rotation.y+=.01;const e=m.position.y;m.position.y=e+.1*Math.sin(.002*Date.now())}l.render(e,n)};return v(),()=>{u.current&&cancelAnimationFrame(u.current),s.current&&l.domElement.parentNode===s.current&&s.current.removeChild(l.domElement),l.dispose()}},[d,r]),l.useEffect(()=>{c.current&&h(c.current,t)},[t]),e.jsx("div",{ref:s,className:"rounded-lg overflow-hidden border-2 border-cyan-500 shadow-lg shadow-cyan-500/20",style:{width:`${d.width}px`,height:`${d.height}px`,background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)"}})},aw=({onCapture:t,onCancel:n})=>{const r=l.useRef(null),s=l.useRef(null),i=l.useRef(null),[a,o]=l.useState(!1),[c,u]=l.useState(null),[d,h]=l.useState(null),f=async()=>{try{u(null),h(null);const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1920},height:{ideal:1080}},audio:!1});r.current&&(r.current.srcObject=e,i.current=e,r.current.oncanplay=()=>{var e;o(!0),null==(e=r.current)||e.play().catch(e=>{})})}catch(e){"NotAllowedError"===(null==e?void 0:e.name)?(h("permission_denied"),u("Camera access was denied. Please allow camera access to use this feature.")):"NotFoundError"===(null==e?void 0:e.name)?(h("no_camera"),u("No camera found on your device.")):(h("other"),u(`Camera error: ${(null==e?void 0:e.message)||"Unknown error"}`))}};l.useEffect(()=>(f(),()=>{i.current&&(i.current.getTracks().forEach(e=>{e.stop()}),i.current=null)}),[]);const p=()=>{i.current&&(i.current.getTracks().forEach(e=>e.stop()),i.current=null),n()};if(c&&"permission_denied"===d){const t=(()=>{const e=navigator.userAgent;return e.indexOf("Chrome")>-1&&-1===e.indexOf("Edg")?{browser:"Chrome",steps:["1. Click the lock icon in the address bar",'2. Find "Camera" and change it to "Allow"',"3. Refresh the page"]}:e.indexOf("Firefox")>-1?{browser:"Firefox",steps:["1. Click the info icon () in the address bar",'2. Scroll to find "Camera" permission',"3. Click the X to clear the block","4. Refresh the page"]}:e.indexOf("Edg")>-1?{browser:"Microsoft Edge",steps:["1. Click the lock icon in the address bar",'2. Find "Camera" and change it to "Allow"',"3. Refresh the page"]}:e.indexOf("Safari")>-1?{browser:"Safari",steps:["1. Go to Safari  Settings (or Preferences)","2. Go to Websites  Camera",'3. Find this website and set to "Allow"',"4. Refresh the page"]}:{browser:"Your Browser",steps:["Look for a permission icon in your address bar","Find the Camera permission and set it to Allow","Refresh this page"]}})();return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl p-8 max-w-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Camera Access Denied"})]}),e.jsx("p",{className:"text-slate-300 mb-6",children:"We need camera access to capture your face for the avatar. Here's how to allow it:"}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mb-6 border border-slate-700",children:[e.jsxs("p",{className:"text-sm font-semibold text-cyan-300 mb-3",children:["Instructions for ",t.browser,":"]}),e.jsx("ul",{className:"space-y-2",children:t.steps.map((t,n)=>e.jsx("li",{className:"text-sm text-slate-300",children:t},n))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,className:"flex-1 px-4 py-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-bold transition-all",children:" Try Again"}),e.jsx("button",{onClick:p,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-bold transition-all",children:"Cancel"})]})]})})}return c&&"permission_denied"!==d?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6 max-w-md text-center",children:[e.jsx("p",{className:"text-red-400 text-sm mb-4",children:c}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all",children:"Close"})]})}):e.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/80 to-transparent p-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-white text-lg font-bold",children:"Position Your Face"}),e.jsx("button",{onClick:p,className:"text-white text-2xl hover:text-red-400 transition-colors",children:""})]}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[e.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-4 border-yellow-400 rounded-2xl shadow-2xl",style:{width:"280px",height:"400px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 0 20px rgba(250, 204, 21, 0.5), inset 0 0 20px rgba(250, 204, 21, 0.2)"},children:[e.jsx("div",{className:"absolute w-6 h-6 border-t-4 border-l-4 border-yellow-400",style:{top:"-8px",left:"-8px"}}),e.jsx("div",{className:"absolute w-6 h-6 border-t-4 border-r-4 border-yellow-400",style:{top:"-8px",right:"-8px"}}),e.jsx("div",{className:"absolute w-6 h-6 border-b-4 border-l-4 border-yellow-400",style:{bottom:"-8px",left:"-8px"}}),e.jsx("div",{className:"absolute w-6 h-6 border-b-4 border-r-4 border-yellow-400",style:{bottom:"-8px",right:"-8px"}})]}),e.jsx("div",{className:"absolute top-24 left-0 right-0 text-center text-yellow-300 font-bold text-sm",children:"Center your head in the yellow box"}),e.jsx("div",{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 0 10px rgba(250, 204, 21, 0.8)"}})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(ellipse 280px 400px at center, transparent 0%, rgba(0, 0, 0, 0.4) 100%)"}})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6 flex gap-3 justify-center",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{if(r.current&&s.current)try{const e=r.current,n=s.current;n.width=e.videoWidth||1920,n.height=e.videoHeight||1080;const a=n.getContext("2d");if(a){a.drawImage(e,0,0,n.width,n.height);const r=n.toDataURL("image/jpeg",.85);i.current&&(i.current.getTracks().forEach(e=>e.stop()),i.current=null),t(r)}}catch(e){u("Failed to capture photo. Please try again.")}},className:"px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold text-lg transition-all shadow-lg hover:shadow-green-600/50",children:" Capture Photo"}),e.jsx("button",{onClick:p,className:"px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-bold transition-all",children:"Cancel"})]}),!a&&e.jsxs("div",{className:"text-yellow-300 text-center",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Initializing camera..."}),e.jsx("div",{className:"text-xs text-yellow-200 mt-1",children:"Please allow camera access if prompted"})]})]}),e.jsx("canvas",{ref:s,className:"hidden"})]})};const ow=new class{async saveAvatar(e,t,n){try{if(!e)throw new Error("User ID required");let l;if(n.faceImageData){const t=Date.now(),c=(o=`avatars/${e}/face_${t}.jpg`,Ro(Zt(Sg),o));await(r=c,s=n.faceImageData,i="data_url",Ao(r=Zt(r),s,i,a)),l=`gs://storage_bucket/avatars/${e}/face_${t}.jpg`}const c=Em(_g,"users",e,"avatar","current"),u={userId:e,userName:t,avatarSettings:{...n,faceImageData:void 0},faceImageUrl:l,createdAt:Date.now(),updatedAt:Date.now()};await wg(c,u)}catch(l){throw l}var r,s,i,a,o}async loadAvatar(e){try{if(!e)return null;const t=Em(_g,"users",e,"avatar","current"),n=await yg(t);return n.exists()?n.data():null}catch(t){return null}}async getPublicAvatars(e=50){try{const t=ig(_m(_g,"public_avatars")),n=await bg(t),r=[];return n.forEach(e=>{r.push(e.data())}),r.slice(0,e)}catch(t){return[]}}async publishAvatarPublic(e,t){try{const n=Em(_g,"public_avatars",e);await wg(n,{...t,isPublic:!0,publishedAt:Date.now()})}catch(n){throw n}}async deleteAvatar(e){try{if(!e)return;const t=Em(_g,"users",e,"avatar","current");await wg(t,{},{merge:!0})}catch(t){throw t}}getCurrentUserId(){var e;return(null==(e=kg.currentUser)?void 0:e.uid)||null}getCurrentUserName(){var e;return(null==(e=kg.currentUser)?void 0:e.displayName)||"Anonymous"}},lw=({onAvatarCreate:t,onCancel:n})=>{const r=l.useRef(null),s=l.useRef(null),i=l.useRef(null),a=l.useRef(null),[o,c]=l.useState(!1),[u,d]=l.useState(!1),[h,f]=l.useState(""),[p,m]=l.useState(null),[v,y]=l.useState(!1);l.useEffect(()=>{if(!r.current||p)return;const e=new ke;e.background=new g(1976635),s.current=e;const t=new re(75,r.current.clientWidth/r.current.clientHeight,.1,1e3);t.position.z=2;const n=new Se({antialias:!0,alpha:!0});n.setSize(r.current.clientWidth,r.current.clientHeight),n.setPixelRatio(window.devicePixelRatio),r.current.appendChild(n.domElement),i.current=n;const o=new _e(16777215,.7);e.add(o);const l=new w(16777215,.8);l.position.set(5,10,7),e.add(l);const c=new ne;e.add(c),a.current=c;const u=new Ce(.3,.3,.3),d=new H({color:440020}),h=new X(u,d);let f;c.add(h);const m=()=>{f=requestAnimationFrame(m),h.rotation.x+=.01,h.rotation.y+=.015,n.render(e,t)};m();const v=()=>{if(r.current){const e=r.current.clientWidth,s=r.current.clientHeight;t.aspect=e/s,t.updateProjectionMatrix(),n.setSize(e,s)}};return window.addEventListener("resize",v),()=>{var e;window.removeEventListener("resize",v),cancelAnimationFrame(f),(null==(e=r.current)?void 0:e.contains(n.domElement))&&r.current.removeChild(n.domElement),n.dispose()}},[]);const x=async e=>{d(!0),f("Analyzing face features...");try{const t=await(async e=>{const t=new Image,n=document.createElement("canvas"),r=n.getContext("2d");return new Promise(s=>{t.onload=()=>{n.width=t.width,n.height=t.height,null==r||r.drawImage(t,0,0);const i=null==r?void 0:r.getImageData(0,0,n.width,n.height).data;if(!i)return void s({});const a=Math.floor(.25*n.width),o=Math.floor(.75*n.width),l=Math.floor(.15*n.height),c=Math.floor(.75*n.height);let u=0,d=0,h=0,f=0;for(let e=l;e<c;e++)for(let t=a;t<o;t++){const r=4*(e*n.width+t);u+=i[r],d+=i[r+1],h+=i[r+2],f++}const p=Math.round(u/f),m=Math.round(d/f),g=Math.round(h/f),v=p-g;let y="#fdbcb4";y=v>30?"#f4a683":v>10?"#f0d9c0":v>-10?"#f5e6d3":"#d4a574";const x=(p+m+g)%100,b=["short","medium","long","curly"],w=["slim","average","athletic"];s({skinTone:y,hairStyle:b[x%b.length],hairColor:`hsl(${3.6*x%360}, ${30+x%40}%, ${20+x%30}%)`,eyeColor:`hsl(${2*x%360}, ${40+x%50}%, ${40+x%30}%)`,bodyType:w[x%w.length],clothingColor:`hsl(${5*x%360}, ${50+x%30}%, ${45+x%20}%)`,faceImageData:e})},t.onerror=()=>{s({})},t.src=e})})(e);f("Creating 3D avatar...");const n={skinTone:t.skinTone||"#fdbcb4",hairStyle:t.hairStyle||"medium",hairColor:t.hairColor||"#3d2817",eyeColor:t.eyeColor||"#8b4513",bodyType:t.bodyType||"average",clothingColor:t.clothingColor||"#4a90e2",faceImageData:e};await new Promise(e=>setTimeout(e,1500)),f("Rendering avatar..."),await new Promise(e=>setTimeout(e,500)),m(n),b(n),d(!1)}catch(t){d(!1)}},b=e=>{if(!a.current||!s.current)return;for(;a.current.children.length>0;)a.current.remove(a.current.children[0]);const t=new Ee(.6,32,32),n=new H({color:e.skinTone}),r=new X(t,n);r.position.y=.2,a.current.add(r);const o=new Ee(.12,16,16),l=new H({color:e.eyeColor}),c=new X(o,l);c.position.set(-.2,.35,.5);const u=new X(o,l);u.position.set(.2,.35,.5),a.current.add(c,u);const d=new Ee(.65,32,16,0,2*Math.PI,0,.6*Math.PI),h=new H({color:e.hairColor}),f=new X(d,h);f.position.y=.45,a.current.add(f);const p=new Ce("slim"===e.bodyType?.5:"athletic"===e.bodyType?.7:.6,1,"slim"===e.bodyType?.3:"athletic"===e.bodyType?.4:.35),m=new H({color:e.clothingColor}),g=new X(p,m);g.position.y=-.3,a.current.add(g);const v=new Ce(.2,.8,.2),y=new H({color:e.skinTone}),x=new X(v,y);x.position.set(-.45,-.2,0);const b=new X(v,y);b.position.set(.45,-.2,0),a.current.add(x,b);const w=new Ce(.2,.8,.2),N=new H({color:"#2c2c2c"}),k=new X(w,N);k.position.set(-.2,-1,0);const S=new X(w,N);if(S.position.set(.2,-1,0),a.current.add(k,S),i.current&&s.current){const e=s.current.getObjectByProperty("type","PerspectiveCamera");if(!e)return;const t=()=>{var n;requestAnimationFrame(t),a.current&&(a.current.rotation.y+=.008,a.current.position.y=.1*Math.sin(.001*Date.now())),null==(n=i.current)||n.render(s.current,e)};t()}},N=async()=>{if(p){y(!0);try{const e=ow.getCurrentUserId(),n=ow.getCurrentUserName();e&&await ow.saveAvatar(e,n,p),t(p)}catch(e){alert("Error saving avatar. Please try again.")}finally{y(!1)}}},k=()=>{m(null),c(!0)};return u?e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-4xl p-6 flex flex-col items-center justify-center min-h-96",children:[e.jsx("div",{className:"mb-6 w-48 h-48 rounded-lg overflow-hidden border-2 border-cyan-500",children:e.jsx("div",{ref:r,className:"w-full h-full"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-cyan-300 font-semibold mb-2",children:h}),e.jsx("div",{className:"w-48 h-1 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500 animate-pulse"})})]})]}):p?e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:" Your AI Avatar Created!"}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Customize your avatar or create a new one"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-300 mb-2",children:"3D Preview"}),e.jsx("div",{ref:r,className:"w-full h-96 rounded-lg overflow-hidden bg-slate-900"})]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-slate-700 p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-300 mb-2",children:"Selfie Used"}),p.faceImageData?e.jsx("img",{src:p.faceImageData,alt:"Selfie",className:"w-full h-auto rounded border border-cyan-500"}):null]}),e.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-700/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-cyan-300 mb-2",children:" AI Generated"}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed",children:"Your avatar was intelligently generated from your face. Colors, body type, and style are based on your features."})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end border-t border-slate-700 pt-4",children:[e.jsx("button",{onClick:k,disabled:v,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 disabled:opacity-50 text-white rounded-lg transition-all",children:" Retake Selfie"}),e.jsx("button",{onClick:n,disabled:v,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 text-white rounded-lg transition-all",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:v,className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 disabled:opacity-50 text-white rounded-lg font-semibold transition-all flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin",children:""}),"Saving to Cloud..."]}):e.jsx(e.Fragment,{children:" Accept Avatar"})})]})]}):e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:" AI Avatar Generator"}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:"Take a selfie and we'll instantly create your personalized 3D avatar using AI"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-cyan-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-cyan-300 mb-2",children:" How It Works:"}),e.jsxs("ol",{className:"text-xs text-slate-300 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Take a selfie with your camera"}),e.jsx("li",{children:"AI analyzes your face features"}),e.jsx("li",{children:"Generates a personalized 3D avatar (2-3 seconds)"}),e.jsx("li",{children:"Customize colors and accept"})]})]}),e.jsx("button",{onClick:()=>c(!0),className:"w-full px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white rounded-lg font-semibold transition-all text-base",children:" Take Selfie"})]}),e.jsx("div",{className:"text-center text-xs text-slate-500 border-t border-slate-700 pt-4",children:e.jsx("p",{children:" Free   Works Offline   Instant Generation"})}),o&&e.jsx(aw,{onCapture:e=>{c(!1),x(e)},onCancel:()=>c(!1)})]})},cw=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),uw=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),dw=({stat:t,value:n})=>e.jsx("div",{className:"flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-600 rounded px-2 py-0.5 shadow-[0_0_10px_rgba(34,211,238,0.1)]",children:e.jsxs("span",{className:"text-[10px] font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-blue-400",children:["+",n," ",t]})}),hw=({item:t})=>{const n=t&&"equipment"===t.type&&"rarity"in t&&t.rarity,r=t&&"universal"===t.type,s=n?{common:"border-slate-600",uncommon:"border-green-500",rare:"border-blue-500",epic:"border-purple-500",legendary:"border-orange-500"}[t.rarity]:r?"border-purple-400 shadow-[0_0_10px_rgba(192,132,252,0.3)]":"border-[var(--border-interactive)]",i=t?u.cloneElement(t.icon,{className:"w-8 h-8 text-teal-300"}):null;return e.jsx("div",{className:"aspect-square rounded-lg flex flex-col items-center justify-center p-2 text-center transition-colors relative "+(t?`bg-slate-700/50 bg-opacity-50 border cursor-pointer hover:bg-slate-700 ${s}`:"bg-slate-900/50 border-2 border-dashed border-[var(--border-interactive)] opacity-50"),children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 text-teal-300",children:i}),e.jsx("div",{className:"mt-2 text-xs font-semibold text-[var(--text-primary)] leading-tight text-center break-words",children:t.name}),e.jsxs("div",{className:"text-[10px] text-[var(--text-secondary)]",children:["x",t.quantity]})]}):e.jsx("span",{className:"text-[10px] text-[var(--text-secondary)]",children:"Empty"})})},fw=({task:t,onClaimTask:n,watchData:r,party:s,claimedXpInfo:i})=>{const a=t.isComplete(r,s);return e.jsxs("div",{className:"relative bg-[var(--bg-panel)] p-4 rounded-lg flex items-center justify-between gap-4 transition-opacity "+(t.isComplete(r,s)?"":"opacity-70"),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-[var(--text-primary)]",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full "+("Easy"===t.difficulty?"bg-green-500/50 text-green-300":"Medium"===t.difficulty?"bg-yellow-500/50 text-yellow-300":"bg-red-500/50 text-red-300"),children:t.difficulty}),e.jsx("div",{className:"flex items-center gap-x-3 gap-y-1 flex-wrap",children:t.reward.map((t,n)=>{if(t.id.startsWith("int_boost"))return e.jsx("div",{children:t.icon},n);const r=Array.isArray(t.quantity)?`+${t.quantity[0]}-${t.quantity[1]}`:`+${t.quantity}`;return e.jsxs("span",{className:"text-xs font-semibold flex items-center gap-1 text-cyan-300",children:[u.cloneElement(t.icon,{className:"w-4 h-4"})," ",r]},n)})})]})]}),i&&i.taskId===t.id&&e.jsx("div",{className:"absolute top-1/2 right-32 -translate-y-1/2 animate-xp-gain pointer-events-none",children:e.jsxs("span",{className:"text-lg font-bold text-green-400 whitespace-nowrap",style:{textShadow:"0 0 8px rgba(74, 222, 128, 0.7)"},children:["+",i.xp," XP"]})}),e.jsx("button",{onClick:()=>n(t.id),disabled:!a||t.isClaimed,className:"px-4 py-2 text-sm font-semibold rounded-lg shadow-md transition-colors w-28 text-center bg-rose-500 text-white hover:bg-rose-600 disabled:bg-[var(--bg-disabled)] disabled:cursor-not-allowed disabled:text-[var(--text-disabled)]",children:t.isClaimed?"Claimed":a?"Claim":"Incomplete"})]})},pw=({badge:t,onClaim:n})=>{const{icon:r,name:s,description:i,unlocked:a,difficulty:o,reward:l,isClaimed:c}=t;return e.jsxs("div",{className:`bg-[var(--bg-interactive)]/50 p-3 rounded-lg flex flex-col items-center text-center transition-opacity relative border-2 ${a?{Easy:"border-green-500/50",Medium:"border-yellow-500/50",Hard:"border-red-500/50"}[o]:"border-transparent"} ${a?"":"opacity-50"}`,children:[e.jsx("div",{className:"w-16 h-16 mb-2 flex items-center justify-center rounded-full "+(a?"bg-amber-500/20":"bg-slate-600"),children:u.cloneElement(r,{className:"w-10 h-10 "+(a?"text-amber-400":"text-slate-400")})}),e.jsx("h4",{className:"font-bold text-sm text-[var(--text-primary)]",children:s}),e.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1 h-10",children:i}),a&&e.jsxs("div",{className:"w-full mt-3 pt-2 border-t border-[var(--border-color)]",children:[e.jsx("p",{className:"text-xs font-bold text-amber-300 mb-1",children:"Reward"}),l.map((t,n)=>e.jsxs("span",{className:"text-xs font-semibold flex items-center justify-center gap-1 text-cyan-300",children:[u.cloneElement(t.icon,{className:"w-4 h-4"})," +",Array.isArray(t.quantity)?t.quantity.join("-"):t.quantity]},n)),e.jsx("button",{onClick:()=>n(t.id),disabled:c,className:"mt-2 w-full px-2 py-1 text-xs font-bold rounded-md transition-colors bg-amber-500 text-white hover:bg-amber-600 disabled:bg-slate-600 disabled:cursor-not-allowed disabled:text-slate-400",children:c?"Claimed":"Claim"})]})]})},mw=({badges:t,onClaimBadge:n})=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-full mx-auto animate-fadeIn",children:t.map(t=>e.jsx(pw,{badge:t,onClaim:n},t.id))}),gw=({icon:t,label:n,isActive:r,onClick:s,activeColor:i})=>{const a=u.isValidElement(t)?u.cloneElement(t,{className:"w-7 h-7 md:w-6 md:h-6"}):t;return e.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center w-full h-20 md:h-16 touch-none select-none transition-colors duration-200 ${r?i:"text-[var(--text-secondary)]"}`,"aria-label":n,children:[a,e.jsx("span",{className:"text-xs mt-1",children:n})]})},vw=({bdagBalance:t,onOpenTransactions:n,onOpenTaxes:r,onOpenTapToPay:s,walletAddress:i,onConnectWallet:a,onDisconnectWallet:o,walletError:l,isConnectingWallet:c,onBack:u})=>{const d=.05*t;return e.jsxs("div",{className:"p-6 text-center animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:u,className:"px-2 py-1 text-xs bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg text-slate-200 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-2xl font-bold text-cyan-300",children:"Wallet"})]}),i?e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-green-500/10 border border-green-500/30 px-3 py-1.5 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs font-mono text-green-400 font-bold",children:[i.slice(0,6),"...",i.slice(-4)]})]}),e.jsx("button",{onClick:o,className:"text-xs text-red-400 hover:text-red-300 hover:underline",children:"Disconnect"})]}):e.jsx("button",{onClick:a,disabled:c,className:"flex items-center gap-2 border text-orange-400 px-3 py-1.5 rounded-full transition-all text-xs font-bold "+(c?"bg-orange-900/20 border-orange-500/30 cursor-wait":"bg-orange-600/20 hover:bg-orange-600/40 border-orange-500/50"),children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-3 h-3 border-2 border-orange-400 border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M20.5 6H3.5C2.67157 6 2 6.67157 2 7.5V18.5C2 19.3284 2.67157 20 3.5 20H20.5C21.3284 20 22 19.3284 22 18.5V7.5C22 6.67157 21.3284 6 20.5 6Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 11H18.5C17.6716 11 17 11.6716 17 12.5V13.5C17 14.3284 17.6716 15 18.5 15H22",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Connect Wallet"]})})]}),l&&e.jsxs("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500/50 rounded-lg text-red-200 text-sm flex items-center gap-2 text-left",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-400 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{children:l})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 mb-6 backdrop-blur-sm border border-[var(--border-color-translucent)]",children:[e.jsx("p",{className:"text-lg text-[var(--text-secondary)]",children:"Total Balance"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx(Eg,{className:"w-8 h-8 text-cyan-400"}),e.jsx("p",{className:"text-4xl font-mono font-bold text-[var(--text-primary)]",children:t.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4})})]}),e.jsxs("p",{className:"text-xl font-mono text-slate-300 mt-1",children:[" $",d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," USD"]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-[var(--border-color)]",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),e.jsxs("p",{className:"text-md font-mono text-[var(--text-secondary)]",children:["1 BDAG = $",.05.toFixed(2)," USD"]})]})})]}),e.jsxs("button",{onClick:s,className:"w-full max-w-md mx-auto bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-3 transition-all mb-4 shadow-lg shadow-cyan-900/20 transform active:scale-95",children:[e.jsx(Yg,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg",children:"Tap to Pay"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto mb-8",children:[e.jsxs("button",{onClick:n,className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-200 font-semibold py-3 px-4 rounded-xl flex flex-col items-center justify-center gap-2 transition-all shadow-lg",children:[e.jsx(tv,{className:"w-6 h-6 text-slate-400"}),e.jsx("span",{className:"text-sm",children:"Transactions"})]}),e.jsxs("button",{onClick:r,className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-200 font-semibold py-3 px-4 rounded-xl flex flex-col items-center justify-center gap-2 transition-all shadow-lg",children:[e.jsx(xv,{className:"w-6 h-6 text-slate-400"}),e.jsx("span",{className:"text-sm",children:"Taxes"})]})]})]})},yw=({onOpenRaffle:t,onOpenMining:n})=>{const r=[{name:"ChainCanvas",description:"Create, mint, and trade AI-generated art directly on-chain. Zero gas fees for creators.",icon:e.jsx(Wg,{className:"w-12 h-12 text-blue-400"}),tag:"New",colorClass:"border-blue-500/50 hover:border-blue-400"},{name:"YieldVault Pro",description:"Advanced yield aggregation strategies for maximizing your DeFi returns across multiple protocols.",icon:e.jsx(Lg,{className:"w-12 h-12 text-green-400"}),tag:"Trending",colorClass:"border-green-500/50 hover:border-green-400"}],s=[{name:"X1 Miner Series",description:"Manage your X10, X1, and cloud mining instances. Monitor hashrate and rewards.",icon:e.jsx(ev,{className:"w-12 h-12 text-cyan-400"}),action:n,tag:"Essential",colorClass:"border-cyan-500/50 hover:border-cyan-400"},{name:"Monthly Raffle",description:"Enter the monthly draw for a chance to win big. 90% payout to winners.",icon:e.jsx(Zg,{className:"w-12 h-12 text-pink-400"}),action:t,tag:"Rewards",colorClass:"border-pink-500/50 hover:border-pink-400"}],i=[{name:"DeFi Hub",description:"Access decentralized exchanges, lending platforms, and yield farming protocols.",icon:e.jsx(Lg,{className:"w-12 h-12 text-purple-400"})},{name:"Block Explorer",description:"Track transactions, view wallet histories, and analyze on-chain data.",icon:e.jsx(Og,{className:"w-12 h-12 text-purple-400"})}];return e.jsxs("div",{className:"p-6 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-purple-300",children:"BlockDAG Ecosystem"}),e.jsx("p",{className:"text-lg text-center text-[var(--text-primary)] font-bold tracking-[0.2em] uppercase mb-8 opacity-90",children:"Engage - Build - Grow"}),e.jsx("p",{className:"text-[var(--text-secondary)] mb-8 text-center max-w-2xl mx-auto",children:"Explore the decentralized future. Access powerful tools, games, and services powered by BlockDAG."}),e.jsxs("div",{className:"max-w-4xl mx-auto mb-10",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-300 mb-4 text-center",children:"Featured"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(t=>e.jsxs("div",{onClick:t.action,className:`relative bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left flex items-start gap-4 hover:bg-slate-800/70 transition-all duration-200 cursor-pointer border-2 ${t.colorClass}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:t.name}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-1",children:t.description})]}),e.jsx("span",{className:"absolute top-2 right-2 text-xs font-bold px-2 py-0.5 rounded-full "+("Essential"===t.tag?"bg-cyan-500/50 text-cyan-200":"bg-pink-500/50 text-pink-200"),children:t.tag})]},t.name))})]}),e.jsxs("div",{className:"max-w-4xl mx-auto mb-10",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-4 text-center",children:"Spotlight"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(t=>e.jsxs("div",{className:`relative bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left flex items-start gap-4 hover:bg-slate-800/70 transition-all duration-200 cursor-pointer border-2 ${t.colorClass}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:t.name}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-1",children:t.description})]}),e.jsx("span",{className:"absolute top-2 right-2 text-xs font-bold px-2 py-0.5 rounded-full "+("New"===t.tag?"bg-blue-500/50 text-blue-300":"bg-green-500/50 text-green-300"),children:t.tag})]},t.name))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:i.map(t=>e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left flex items-start gap-4 hover:bg-slate-800/70 transition-colors duration-200 cursor-pointer border border-[var(--border-color-translucent)]",children:[e.jsx("div",{className:"flex-shrink-0",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:t.name}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mt-1",children:t.description})]})]},t.name))})]})},xw=({onOpenCastModal:t,onOpenGroupModal:n,onOpenJoustingModal:r,onOpenHeartsGame:s,onOpenTriviaGame:a,onOpenFamilyPack:o,onOpenCityBldr:c})=>{const[u,d]=l.useState("freeToPlay"),h=[{name:"Domain Tycoon",description:"Build and manage your own digital city on the BlockDAG network.",icon:e.jsx(qg,{className:"w-16 h-16 text-teal-400 flex-shrink-0"}),action:()=>{}},{name:"Blade & Block",description:"An on-chain RPG where your items are true assets. Battle, craft, and trade.",icon:e.jsx(Hg,{className:"w-16 h-16 text-rose-400 flex-shrink-0"}),action:()=>{}}];return e.jsxs("div",{className:"p-6 text-center animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-orange-300",children:"Games"}),e.jsx("p",{className:"text-[var(--text-secondary)] mb-6",children:"Explore the world of Web3 gaming."}),e.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center mb-8",children:[e.jsxs("button",{onClick:t,className:"px-6 py-3 bg-[var(--bg-interactive)] text-[var(--text-primary)] font-semibold rounded-lg shadow-md hover:bg-[var(--bg-interactive-hover)] transition-colors flex items-center gap-2",children:[e.jsx(Og,{className:"w-6 h-6"}),"Cast to TV"]}),e.jsxs("button",{onClick:n,className:"px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[e.jsx(Sv,{className:"w-6 h-6"}),"Group Up"]})]}),e.jsx("div",{className:"mb-8 max-w-4xl mx-auto",children:e.jsxs("button",{onClick:()=>{"function"==typeof c&&c()},className:"w-full h-32 relative overflow-hidden rounded-xl shadow-2xl hover:shadow-cyan-500/50 transition-all hover:scale-[1.02] group",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-cyan-900/40 to-cyan-700",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-400/30 via-purple-500/20 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-end justify-center gap-1 px-4",children:[e.jsx("div",{className:"w-12 h-20 bg-slate-800 relative border-t-2 border-cyan-400/50 group-hover:h-24 transition-all",children:e.jsxs("div",{className:"absolute top-2 left-1 right-1 grid grid-cols-2 gap-[2px]",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/60"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"})]})}),e.jsxs("div",{className:"w-16 h-28 bg-slate-700 relative border-t-2 border-cyan-400 group-hover:h-32 transition-all",children:[e.jsx("div",{className:"absolute top-1 w-full",children:e.jsx("div",{className:"w-4 h-4 bg-cyan-400 mx-auto animate-pulse"})}),e.jsxs("div",{className:"absolute top-6 left-1 right-1 grid grid-cols-3 gap-[2px]",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/90"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/70"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/90"})]})]}),e.jsx("div",{className:"w-14 h-24 bg-slate-800 relative border-t-2 border-cyan-400/50 group-hover:h-28 transition-all",children:e.jsxs("div",{className:"absolute top-3 left-1 right-1 grid grid-cols-2 gap-[2px]",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/70"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/90"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"})]})}),e.jsx("div",{className:"w-10 h-16 bg-slate-900 relative border-t-2 border-cyan-400/40 group-hover:h-20 transition-all",children:e.jsxs("div",{className:"absolute top-2 left-1 right-1 grid grid-cols-2 gap-[2px]",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-300/70"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"})]})}),e.jsx("div",{className:"w-12 h-22 bg-slate-800 relative border-t-2 border-cyan-400/50 group-hover:h-26 transition-all",children:e.jsxs("div",{className:"absolute top-3 left-1 right-1 grid grid-cols-2 gap-[2px]",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/80"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/70"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-300/90"})]})})]})]}),e.jsxs("div",{className:"relative z-10 h-full flex items-center justify-between px-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qg,{className:"w-12 h-12 text-cyan-300 drop-shadow-[0_0_10px_rgba(34,211,238,0.7)]"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-3xl font-bold text-white drop-shadow-lg",children:"City BLDR"}),e.jsx("div",{className:"text-sm text-cyan-200",children:"Build your metropolis"})]})]}),e.jsx("div",{className:"text-cyan-300 text-2xl font-bold animate-pulse",children:""})]})]})}),e.jsx("div",{className:"border-b border-[var(--border-color)] mb-8 max-w-4xl mx-auto"}),e.jsxs("div",{className:"flex justify-center border-b border-[var(--border-color)] mb-8 max-w-4xl mx-auto",children:[e.jsx("button",{onClick:()=>d("freeToPlay"),className:"px-6 py-2 font-semibold transition-colors "+("freeToPlay"===u?"text-orange-400 border-b-2 border-orange-400":"text-[var(--text-secondary)]"),children:"Free To Play"}),e.jsx("button",{onClick:()=>d("purchased"),className:"px-6 py-2 font-semibold transition-colors "+("purchased"===u?"text-orange-400 border-b-2 border-orange-400":"text-[var(--text-secondary)]"),children:"Purchased"}),e.jsx("button",{onClick:()=>d("trending"),className:"px-6 py-2 font-semibold transition-colors "+("trending"===u?"text-orange-400 border-b-2 border-orange-400":"text-[var(--text-secondary)]"),children:"Trending"})]}),"freeToPlay"===u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto animate-fadeIn",children:[e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_v,{className:"w-16 h-16 text-yellow-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Family Pack"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Collection of easy games for up to 5 players."})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:o,className:"w-full px-6 py-3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-600 transition-colors",children:"Open Pack"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Sv,{className:"w-16 h-16 text-purple-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Community Pack"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Games created and shared by the BlockDAG community."})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{className:"w-full px-6 py-3 bg-purple-500 text-white font-semibold rounded-lg shadow-md hover:bg-purple-600 transition-colors",children:"Open Pack"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Dg,{className:"w-16 h-16 text-orange-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Jousting Champions"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Form a party, play solo vs bots, or find a random match!"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-orange-500 text-white font-semibold rounded-lg shadow-md hover:bg-orange-600 transition-colors",children:"Play"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{className:"w-16 h-16 text-rose-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Hearts"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Classic 4-player trick-taking card game. Avoid points!"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:s,className:"w-full px-6 py-3 bg-rose-500 text-white font-semibold rounded-lg shadow-md hover:bg-rose-500 transition-colors",children:"Play (Free)"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Jg,{className:"w-16 h-16 text-teal-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Trivia Challenge"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Test your knowledge against friends or bots in this fast-paced quiz game."})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:a,className:"w-full px-6 py-3 bg-teal-500 text-white font-semibold rounded-lg shadow-md hover:bg-teal-600 transition-colors",children:"Play"})})]})]}),"purchased"===u&&e.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[e.jsx("p",{className:"text-[var(--text-secondary)] mb-6",children:"Games purchased from the App store will appear here."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(t=>e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:t.name}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:t.description})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:t.action,className:"w-full px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors",children:"Play"})})]},t.name))})]}),"trending"===u&&e.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[e.jsx("p",{className:"text-[var(--text-secondary)] mb-6",children:"Most popular games based on community likes."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:"#1"}),e.jsxs("div",{className:"flex items-center gap-1 text-rose-400",children:[e.jsx(i,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold",children:"12.4K"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Dg,{className:"w-16 h-16 text-orange-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Jousting Champions"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Medieval combat at its finest!"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-orange-500 text-white font-semibold rounded-lg shadow-md hover:bg-orange-600 transition-colors",children:"Play Now"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"#2"}),e.jsxs("div",{className:"flex items-center gap-1 text-rose-400",children:[e.jsx(i,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold",children:"9.8K"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qg,{className:"w-16 h-16 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"City BLDR"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Build your metropolis!"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:c,className:"w-full px-6 py-3 bg-cyan-500 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-600 transition-colors",children:"Play Now"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-amber-600",children:"#3"}),e.jsxs("div",{className:"flex items-center gap-1 text-rose-400",children:[e.jsx(i,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold",children:"8.2K"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{className:"w-16 h-16 text-rose-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Hearts"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Classic card game strategy!"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:s,className:"w-full px-6 py-3 bg-rose-500 text-white font-semibold rounded-lg shadow-md hover:bg-rose-600 transition-colors",children:"Play Now"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-500",children:"#4"}),e.jsxs("div",{className:"flex items-center gap-1 text-rose-400",children:[e.jsx(i,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold",children:"7.1K"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Jg,{className:"w-16 h-16 text-teal-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Trivia Challenge"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Test your knowledge!"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:a,className:"w-full px-6 py-3 bg-teal-500 text-white font-semibold rounded-lg shadow-md hover:bg-teal-600 transition-colors",children:"Play Now"})})]}),e.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-6 backdrop-blur-sm text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-500",children:"#5"}),e.jsxs("div",{className:"flex items-center gap-1 text-rose-400",children:[e.jsx(i,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold",children:"5.6K"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_v,{className:"w-16 h-16 text-yellow-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Family Pack"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Fun for the whole family!"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:o,className:"w-full px-6 py-3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-600 transition-colors",children:"Open Pack"})})]})]})]}),e.jsx("img",{src:"/assets/games-illustration.svg",alt:"Games Illustration",className:"mx-auto mt-8 w-64 h-64"})]})},bw=()=>e.jsxs("div",{className:"p-6 text-center animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-yellow-300",children:"Sponsors"}),e.jsx("p",{className:"text-[var(--text-secondary)] mb-8 max-w-2xl mx-auto",children:"Sponsor buttons open to the app they want designed for fan interaction. Or website. Encourage live streams of their events for premium users. That can cast to the television."}),e.jsx("div",{className:"max-w-4xl mx-auto bg-[var(--bg-panel)] rounded-lg p-4 backdrop-blur-sm border border-[var(--border-color)]",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("a",{href:"https://www.alpinef1.com/",target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg aspect-video bg-gradient-to-br from-blue-600 via-purple-600 to-pink-500 overflow-hidden",children:[e.jsx("img",{src:"/assets/bwt-alpine-blockdag.jpg?v=1",alt:"BWT Alpine F1 Team and BlockDAG Partner",style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.currentTarget.src="/assets/bwt-alpine-blockdag.png?v=1",e.currentTarget.onerror=()=>{e.currentTarget.style.display="none"}}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-4 z-10",children:e.jsx("span",{className:"bg-pink-500 text-white text-lg font-bold px-3 py-1 rounded-md shadow-lg",children:"BWT"})})]}),e.jsxs("a",{href:"https://www.inter.it/",target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg overflow-hidden aspect-video bg-gradient-to-br from-blue-600 to-blue-800 shadow-lg hover:shadow-2xl transition-all duration-300",children:[e.jsx("img",{src:"/assets/inter-milan-blockdag.jpg?v=1",alt:"Inter Milan and BlockDAG Partner",style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.currentTarget.src="/assets/inter-milan-blockdag.png?v=1",e.currentTarget.onerror=()=>{e.currentTarget.style.display="none"}}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-4 z-10",children:e.jsx("span",{className:"bg-blue-600 text-white text-lg font-bold px-3 py-1 rounded-md shadow-lg",children:"Inter Milan"})})]}),e.jsxs("a",{href:"https://www.ufc.com/",target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg overflow-hidden aspect-video bg-gradient-to-br from-gray-900 via-red-800 to-black shadow-lg hover:shadow-2xl transition-all duration-300",children:[e.jsx("img",{src:"/assets/UFC_BlockdagX1.jpg?v=1",alt:"UFC and BlockDAG Partner",style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.currentTarget.src="/assets/UFC_BlockdagX1.png?v=1",e.currentTarget.onerror=()=>{e.currentTarget.style.display="none"}}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-4 z-10",children:e.jsx("span",{className:"bg-red-700 text-white text-lg font-bold px-3 py-1 rounded-md shadow-lg",children:"UFC"})})]}),e.jsxs("a",{href:"https://www.seattleorcas.com/",target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg overflow-hidden aspect-video bg-gradient-to-br from-teal-700 to-blue-900 shadow-lg hover:shadow-2xl transition-all duration-300",children:[e.jsx("img",{src:"/assets/Blockdag_x1_Sponsor_Orca.png?v=1",alt:"Seattle Orcas and BlockDAG Partner",style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.currentTarget.src="/assets/Blockdag_x1_Sponsor_Orca.jpg?v=1",e.currentTarget.onerror=()=>{e.currentTarget.style.display="none"}}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-4 z-10",children:e.jsx("span",{className:"bg-teal-600 text-white text-lg font-bold px-3 py-1 rounded-md shadow-lg",children:"Seattle Orcas"})})]}),e.jsxs("a",{href:"https://www.seawolves.rugby/",target:"_blank",rel:"noopener noreferrer",className:"relative flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded-lg overflow-hidden aspect-video bg-gradient-to-br from-blue-800 to-indigo-900 shadow-lg hover:shadow-2xl transition-all duration-300",children:[e.jsx("img",{src:"/assets/blockdag x1 seawolves.png?v=1",alt:"Seawolves and BlockDAG Partner",style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.currentTarget.src="/assets/blockdag x1 seawolves.jpg?v=1",e.currentTarget.onerror=()=>{e.currentTarget.style.display="none"}}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-4 z-10",children:e.jsx("span",{className:"bg-blue-700 text-white text-lg font-bold px-3 py-1 rounded-md shadow-lg",children:"Seawolves"})})]})]})})]}),ww=({label:t,icon:n,className:r=""})=>e.jsxs("div",{className:`flex flex-col items-center space-y-1 ${r}`,children:[e.jsx("div",{className:"w-10 h-10 bg-[var(--bg-panel)] rounded-lg border-2 border-[var(--border-color)] flex items-center justify-center cursor-pointer hover:border-green-400 transition-colors",children:n}),e.jsx("span",{className:"text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-wide",children:t})]}),Nw=({inventory:t,onEquip:n,onOpenSmartWatch:r,connectedWatch:s,watchData:i,tasks:a,onOpenCraft:o})=>{const l=t.filter(e=>"universal"===e.type),c=t.filter(e=>"resource"===e.type),u=t.filter(e=>"equipment"===e.type),d=t.filter(e=>"template"===e.type),h=(e,t,n)=>e>=n?2:e>=t?1:0;(()=>{var e,t;let n=0;(null==(e=a.find(e=>"daily-game-1"===e.id))?void 0:e.isClaimed)&&(n+=1),(null==(t=a.find(e=>"daily-game-3"===e.id))?void 0:t.isClaimed)&&(n+=1)})(),h((null==i?void 0:i.stairs)||0,10,20),h((null==i?void 0:i.steps)||0,5e3,1e4),h((null==i?void 0:i.sleepScore)||0,70,85),h((null==i?void 0:i.calories)||0,1500,2e3);return null==i||i.stairs,((null==i?void 0:i.steps)||0).toLocaleString(),null==i||i.sleepScore,null==i||i.calories,e.jsx("div",{className:"p-4 md:p-6 animate-fadeIn h-full flex flex-col md:flex-row gap-6",children:e.jsxs("div",{className:"flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-300",children:"Inventory"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-xl shadow-md transition-colors",children:"Craft Equipment"})})]}),e.jsxs("div",{className:"space-y-8 overflow-y-auto pr-2 pb-20 custom-scrollbar",children:[l.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-3 border-b border-purple-500/30 pb-1",children:"Universal Resources"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3",children:l.map((t,r)=>e.jsx("div",{onClick:()=>n(t),children:e.jsx(hw,{item:t})},r))})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--text-secondary)] mb-3 border-b border-[var(--border-color)] pb-1",children:"Common Resources"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3",children:c.map((t,r)=>e.jsx("div",{onClick:()=>n(t),children:e.jsx(hw,{item:t})},r))})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--text-secondary)] mb-3 border-b border-[var(--border-color)] pb-1",children:"Equipment"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3",children:u.map((t,r)=>e.jsx("div",{onClick:()=>n(t),children:e.jsx(hw,{item:t})},r))})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--text-secondary)] mb-3 border-b border-[var(--border-color)] pb-1",children:"Templates"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3",children:d.map((t,r)=>e.jsx("div",{onClick:()=>n(t),children:e.jsx(hw,{item:t})},r))})]}),0===t.length&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"Your inventory is empty."})]})]})})},kw=({isOpen:t,onClose:n,connectedWatch:r,onConnect:s,onDisconnect:i})=>{if(!t)return null;const[a,o]=l.useState(!1),[c,u]=l.useState([]),[d,h]=l.useState(!0),[f,p]=l.useState(null),[m,g]=l.useState(""),[v,y]=l.useState(!1),[x,b]=l.useState(null);l.useEffect(()=>{t&&!r&&(u([]),o(!1),w())},[t,r]);const w=async()=>{const e=void 0!==navigator.bluetooth;h(e),e||p("Bluetooth not available on this device")},N=e=>{k(e),s(e)},k=async e=>{try{const{fetchSmartWatchData:t}=await wt(async()=>{const{fetchSmartWatchData:e}=await import("./bluetoothService-1Mt-vXAx.js");return{fetchSmartWatchData:e}},[]);await t(e);b(new Date),p(null)}catch(t){p("Connected but failed to sync data. Check console.")}},S=async()=>{o(!0),u([]),p(null);try{if(!navigator.bluetooth){p("Bluetooth not supported. Using mock devices for demonstration.");const{getMockSmartWatches:e}=await wt(async()=>{const{getMockSmartWatches:e}=await import("./bluetoothService-1Mt-vXAx.js");return{getMockSmartWatches:e}},[]);return void setTimeout(()=>{const t=e();u(t.map(e=>e.name)),o(!1)},1500)}try{const e=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"Versa"},{namePrefix:"Galaxy Watch"},{namePrefix:"Pixel Watch"},{namePrefix:"Watch Series"},{namePrefix:"Garmin"},{namePrefix:"Fossil"},{namePrefix:"Mi Band"},{namePrefix:"Wear OS"}],optionalServices:["0000180a-0000-1000-8000-00805f9b34fb","0000180d-0000-1000-8000-00805f9b34fb"]});e&&e.name&&u(t=>[...t,e.name])}catch(e){if("NotFoundError"!==e.name)throw e;p('No smartwatches with standard names found. Try "Generic Scan" or manual entry.')}o(!1)}catch(t){"NotFoundError"===t.name?p("No smartwatches found. Make sure your watch is in pairing mode."):"SecurityError"===t.name?p("Bluetooth permission denied. Check browser settings."):p(`Scan failed: ${t.message||"Unknown error"}`),o(!1)}},_=()=>{m.trim()&&(N(m.trim()),g(""),y(!1))};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:n,children:e.jsxs("div",{className:"bg-[var(--bg-panel-solid)] p-6 rounded-2xl w-full max-w-md m-4 border border-[var(--border-color)] shadow-2xl",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-teal-300 flex items-center gap-2",children:[e.jsx(Nv,{className:"w-6 h-6"})," Smart Watch"]}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white text-2xl font-bold",children:""})]}),f&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-900/20 border border-yellow-700/50 rounded-lg text-yellow-400 text-sm",children:f}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-900/20 border border-blue-600/50 rounded-xl",children:[e.jsxs("h3",{className:"font-bold text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:""})," Fitbit Account"]}),e.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"Connect your real Fitbit device for automatic health data sync"}),Yx.isAuthenticated()?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-2 bg-green-900/20 border border-green-600/50 rounded-lg text-green-300 text-sm",children:" Fitbit Connected"}),e.jsx("button",{onClick:async()=>{try{const e=await Yx.getTodayHealthData();if(e){alert(`Health Data Synced!\nSteps: ${e.steps}\nCalories: ${e.calories}\nSleep Score: ${e.sleepScore}`);Math.floor(e.steps/7500*2),Math.floor(e.stairs/25*2),Math.max(0,(e.sleepScore-60)/17.5),Math.floor((e.calories-1500)/1e3*2)}}catch(e){alert("Failed to sync health data")}},className:"w-full px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-semibold rounded-lg transition-colors text-sm",children:" Sync Health Data"})]}):e.jsx("button",{onClick:()=>Yx.startOAuthFlow(),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-lg transition-colors text-sm",children:" Connect Fitbit Account"})]}),r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-500/50",children:e.jsx(Nv,{className:"w-10 h-10 text-green-400"})}),e.jsx("p",{className:"text-lg font-semibold text-white mb-2",children:r}),e.jsxs("p",{className:"text-sm text-green-400 mb-2 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Connected via Bluetooth"]}),x&&e.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Last sync: ",x.toLocaleTimeString()]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-500/20 text-red-300 border border-red-500/50 rounded-lg hover:bg-red-500/30 transition-colors",children:"Disconnect Device"})]}):e.jsxs("div",{children:[!d&&e.jsxs("div",{className:"text-center py-8 bg-slate-800/50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-slate-400 mb-4",children:" Bluetooth is not available on your device"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Note: You're seeing mock smartwatch devices for testing"})]}),a||0!==c.length?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-slate-400 mb-4 flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin inline-block",children:""}),"Scanning for smartwatches..."]}):e.jsx(e.Fragment,{children:" Available Smartwatches:"})}),e.jsx("div",{className:"space-y-2 min-h-[150px]",children:c.length>0?c.map((t,n)=>e.jsxs("button",{onClick:()=>N(t),className:"w-full p-4 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-xl text-left flex items-center justify-between group transition-all hover:border-cyan-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nv,{className:"w-5 h-5 text-cyan-400"}),e.jsx("span",{className:"font-semibold text-slate-200",children:t})]}),e.jsx("span",{className:"text-xs bg-slate-900 text-slate-400 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Connect "})]},n)):a?e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),"Searching nearby devices..."]}):e.jsx("div",{className:"text-center py-6 text-slate-500",children:"No smartwatches found. Try again."})}),!a&&c.length>0&&e.jsx("button",{onClick:S,className:"w-full mt-4 py-2 text-sm text-blue-400 hover:text-blue-300 border border-blue-500/30 rounded-lg hover:border-blue-500 transition-colors",children:"Scan Again"})]}):e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-slate-400",children:"Make sure your smartwatch is nearby and discoverable."}),v?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"e.g., Versa 2, Galaxy Watch, etc.",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",onKeyPress:e=>"Enter"===e.key&&_()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:_,disabled:!m.trim(),className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-slate-700 text-white font-semibold rounded-lg transition-colors",children:"Connect"}),e.jsx("button",{onClick:()=>{y(!1),g("")},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:S,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl transition-colors shadow-lg shadow-blue-900/20",children:"Scan for Smart Watches"}),e.jsx("button",{onClick:async()=>{o(!0),u([]),p(null);try{if(!navigator.bluetooth){p("Bluetooth not supported. Using mock devices for demonstration.");const{getMockSmartWatches:e}=await wt(async()=>{const{getMockSmartWatches:e}=await import("./bluetoothService-1Mt-vXAx.js");return{getMockSmartWatches:e}},[]);return void setTimeout(()=>{const t=e();u(t.map(e=>e.name)),o(!1)},1500)}try{const e=await navigator.bluetooth.requestDevice({filters:[{services:["generic_access"]}],optionalServices:["0000180a-0000-1000-8000-00805f9b34fb","0000180d-0000-1000-8000-00805f9b34fb","0000181d-0000-1000-8000-00805f9b34fb"]});e&&e.name?u(t=>[...t,e.name]):p("Device selected but no name found. Try manual entry.")}catch(e){if("NotFoundError"!==e.name)throw e;p("No devices found. Make sure your watch is turned on and discoverable.")}o(!1)}catch(e){p(`Scan failed: ${e.message||"Unknown error"}`),o(!1)}},className:"w-full px-6 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold rounded-xl transition-colors text-sm",children:"Generic Scan (Any Device)"}),e.jsx("button",{onClick:()=>y(!0),className:"w-full px-6 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold rounded-xl transition-colors text-sm",children:"Enter Device Name Manually"})]})]})]})]})})},Sw=({isOpen:t,onClose:n,inventory:r})=>{if(!t)return null;const s=r.filter(e=>"resource"===e.type);return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:n}),e.jsxs("div",{className:"relative z-10 w-[92%] max-w-md bg-slate-900 border border-slate-700 rounded-2xl shadow-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Craft Equipment"}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white",children:""})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Select a recipe and use resources to craft new equipment. Feature preview."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider",children:"Resources"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-auto pr-1",children:[0===s.length&&e.jsx("p",{className:"text-xs text-slate-500",children:"No resources available."}),s.map(t=>e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/60 border border-slate-700 rounded p-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-slate-300",children:t.icon}),e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"text-white font-semibold leading-tight",children:t.name}),e.jsxs("p",{className:"text-slate-400",children:["Qty: ",t.quantity??0]})]})]},t.id))]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:n,className:"px-3 py-2 text-sm bg-slate-700 hover:bg-slate-600 text-white rounded",children:"Close"}),e.jsx("button",{disabled:!0,className:"px-3 py-2 text-sm bg-purple-600/60 text-white rounded opacity-60 cursor-not-allowed",title:"Coming soon",children:"Craft"})]})]})]})},_w=({isOpen:t,onClose:n,party:r,friends:s,onInvite:i,onKick:a})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:n,children:e.jsxs("div",{className:"bg-[var(--bg-panel-solid)] p-6 rounded-2xl w-full max-w-md m-4 border border-[var(--border-color)] shadow-2xl",onClick:e=>e.stopPropagation(),children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-indigo-300 flex items-center gap-2",children:[e.jsx(Sv,{className:"w-6 h-6"})," Party Management"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:["Current Party (",r.length,"/5)"]}),e.jsx("div",{className:"space-y-2",children:r.map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between bg-indigo-500/10 border border-indigo-500/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-xs",children:t.substring(0,1)}),e.jsx("span",{className:"font-semibold text-white",children:t}),"You"===t&&e.jsx("span",{className:"text-xs bg-indigo-500 text-white px-1.5 py-0.5 rounded",children:"Leader"})]}),"You"!==t&&e.jsx("button",{onClick:()=>a(t),className:"text-xs text-red-400 hover:text-red-300 hover:underline",children:"Remove"})]},n))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Online Friends"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:0===s.filter(e=>"online"===e.status&&!r.includes(e.name)).length?e.jsx("p",{className:"text-slate-500 text-sm italic",children:"No online friends available."}):s.filter(e=>"online"===e.status&&!r.includes(e.name)).map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-800 p-3 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-slate-200",children:t.name})]}),e.jsx("button",{onClick:()=>i(t.name),disabled:r.length>=5,className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded transition-colors disabled:opacity-50",children:"Invite"})]},t.id))})]}),e.jsx("button",{onClick:n,className:"mt-6 w-full py-3 bg-slate-800 text-slate-400 font-bold rounded-xl hover:bg-slate-700 transition-colors",children:"Close"})]})}):null,Ew=({isOpen:t,onClose:n,onPlayGame:r,party:s,friends:i,onProposeWager:a})=>{if(!t)return null;const o=(i||[]).filter(e=>s.includes(e.name)),[l,c]=u.useState(""),d=[{name:"Uno Online",players:"2-5 Players",icon:e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white font-bold",children:"U"}),id:"uno"},{name:"Bingo Party",players:"1-5 Players",icon:e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:"B"}),id:"bingo"},{name:"Sketch It",players:"3-5 Players",icon:e.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold",children:"S"}),id:"sketchit"},{name:"Word Guess",players:"2-5 Players",icon:e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:"W"}),id:"wordguess"}];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:n,children:e.jsxs("div",{className:"bg-[var(--bg-panel-solid)] p-6 rounded-2xl w-full max-w-md m-4 border border-[var(--border-color)] shadow-2xl relative",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-800 mb-4 border border-slate-700",children:e.jsx(_v,{className:"w-8 h-8 text-yellow-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Family Pack"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Fun games for everyone!"})]}),e.jsxs("div",{className:"mb-4 bg-slate-800/60 border border-slate-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-white font-semibold",children:"5 BDAG Wager"}),e.jsx("span",{className:"text-[11px] text-slate-400",children:"Friends in your group"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{className:"flex-1 bg-slate-900 border border-slate-700 rounded px-3 py-2 text-sm text-white",value:l,onChange:e=>c(e.target.value),children:[e.jsx("option",{value:"",children:"Select friend"}),o.map(t=>e.jsx("option",{value:t.name,children:t.name},t.name))]}),e.jsx("button",{onClick:()=>l&&a(l,"family-pack"),disabled:!l,className:"px-4 py-2 rounded bg-emerald-600 text-white text-sm font-bold hover:bg-emerald-500 transition-colors disabled:opacity-50",children:"Propose 5 BDAG wager"})]}),0===o.length&&e.jsx("p",{className:"text-[11px] text-amber-300 mt-2",children:"Need a friend who is also in your group to wager."})]}),e.jsx("div",{className:"space-y-3",children:d.map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-4 rounded-xl border border-slate-700 hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:t.name}),e.jsx("p",{className:"text-xs text-slate-400",children:t.players})]})]}),e.jsx("button",{onClick:()=>{"sketchit"===t.id?r("sketchit"):"uno"===t.id?r("uno"):alert("Game coming soon!")},className:"bg-yellow-500 hover:bg-yellow-600 text-white text-xs font-bold px-4 py-2 rounded-lg transition-colors shadow-md",children:"Play"})]},n))})]})})},Tw=({isOpen:t,onClose:n,onPayment:r,walletAddress:s,onConnectWallet:i,sendBdag:a})=>{const[o,l]=u.useState(""),[c,d]=u.useState(""),[h,f]=u.useState(null);if(u.useEffect(()=>{t||(l(""),d(""),f(null))},[t]),!t)return null;return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-md p-4",onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Tap to Pay (BDAG)"}),e.jsx("label",{className:"text-xs text-slate-400",children:"Merchant Address"}),e.jsx("input",{className:"w-full bg-slate-800/60 p-2 rounded mt-1 mb-3",value:o,onChange:e=>l(e.target.value),placeholder:"0x..."}),e.jsx("label",{className:"text-xs text-slate-400",children:"Amount (BDAG)"}),e.jsx("input",{className:"w-full bg-slate-800/60 p-2 rounded mt-1 mb-3",value:c,onChange:e=>d(e.target.value),placeholder:"e.g. 10",type:"number"}),s?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{f("Preparing transaction...");try{if(!s)return void f("Please connect your wallet");f("Sending transaction to MetaMask..."),await a(o,c),f("Transaction confirmed  payment sent"),r(parseFloat(c),o||"Merchant"),setTimeout(()=>{n()},1200)}catch(e){f("Payment failed: "+((null==e?void 0:e.message)||"Unknown error"))}},className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded",children:["Pay ",c||""," BDAG"]}),e.jsx("button",{onClick:n,className:"flex-1 bg-slate-700 text-white py-2 rounded",children:"Cancel"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:i,className:"flex-1 bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded",children:"Connect Wallet"}),e.jsx("button",{onClick:n,className:"flex-1 bg-slate-700 text-white py-2 rounded",children:"Cancel"})]}),h&&e.jsx("p",{className:"text-sm text-slate-300 mt-3",children:h})]})})},jw=({isOpen:t,onClose:n,receipts:r})=>{const[s,i]=u.useState("all"),[a,o]=u.useState(""),[l,c]=u.useState("");if(u.useEffect(()=>{t||(i("all"),o(""),c(""))},[t]),!t)return null;const d=Array.from(new Set(r.map(e=>new Date(e.date).getFullYear()))).sort((e,t)=>t-e),h=r.filter(e=>{if("all"===s)return!0;const t=new Date(e.date);if("year"===s)return!a||String(t.getFullYear())===a;if("month"===s){if(!a&&!l)return!0;const e=!a||String(t.getFullYear())===a,n=!l||String(t.getMonth())===l;return e&&n}return!0});return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-start md:items-center justify-center p-4 overflow-auto",onClick:n,children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-2xl p-4",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Transactions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Filter"}),e.jsxs("select",{className:"bg-slate-800/60 text-sm p-1 rounded",value:s,onChange:e=>i(e.target.value),children:[e.jsx("option",{value:"all",children:"All time"}),e.jsx("option",{value:"year",children:"By year"}),e.jsx("option",{value:"month",children:"By month"})]})]})]}),"year"===s&&e.jsxs("div",{className:"flex gap-2 items-center mb-3",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Year"}),e.jsxs("select",{className:"bg-slate-800/60 text-sm p-1 rounded",value:a,onChange:e=>o(e.target.value),children:[e.jsx("option",{value:"",children:"(All years)"}),d.map(t=>e.jsx("option",{value:String(t),children:t},t))]})]}),"month"===s&&e.jsxs("div",{className:"flex gap-2 items-center mb-3",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Month"}),e.jsxs("select",{className:"bg-slate-800/60 text-sm p-1 rounded",value:l,onChange:e=>c(e.target.value),children:[e.jsx("option",{value:"",children:"(All months)"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map((t,n)=>e.jsx("option",{value:String(n),children:t},t))]}),e.jsx("label",{className:"text-xs text-slate-400",children:"Year"}),e.jsxs("select",{className:"bg-slate-800/60 text-sm p-1 rounded",value:a,onChange:e=>o(e.target.value),children:[e.jsx("option",{value:"",children:"(All years)"}),d.map(t=>e.jsx("option",{value:String(t),children:t},t))]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-700 rounded",children:0===h.length?e.jsx("div",{className:"p-4 text-center text-slate-400",children:"No transactions for selected filter."}):h.map(t=>{var n;return e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:t.merchant}),e.jsx("div",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-white",children:[t.amount," BDAG"]}),e.jsx("div",{className:"text-xs text-slate-400",children:(null==(n=t.items)?void 0:n.length)?`${t.items.length} items`:""})]})]},t.id)})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{i("all"),c(""),o("")},className:"px-3 py-1 text-sm bg-slate-800 rounded",children:"Reset"}),e.jsx("button",{onClick:n,className:"px-4 py-1 bg-cyan-500 text-white rounded",children:"Close"})]})]})})},Cw=({isOpen:t,onClose:n,receipts:r,balance:s})=>{if(!t)return null;const i=(r||[]).filter(e=>"buy"===e.action||"sell"===e.action),a=e=>new Date(e),o=[],l=[],c=i.slice().sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());for(const e of c){const t=a(e.date),n=Number(e.quantity||0),r=Number(e.pricePerUnit||0);if("buy"===e.action)n>0&&o.push({qty:n,price:r,date:t,id:e.id});else if("sell"===e.action){let s=n,i=r;for(;s>0&&o.length>0;){const n=o[0],r=Math.min(s,n.qty),a=(i-n.price)*r,c=Math.floor((t.getTime()-n.date.getTime())/864e5);l.push({sellId:e.id,buyId:n.id,token:e.token||"BDAG",qty:r,buyPrice:n.price,sellPrice:i,gain:a,holdingDays:c,buyDate:n.date.toISOString(),sellDate:t.toISOString()}),n.qty-=r,n.qty<=0&&o.shift(),s-=r}if(s>0){const n=i*s;l.push({sellId:e.id,buyId:null,token:e.token||"BDAG",qty:s,buyPrice:0,sellPrice:i,gain:n,holdingDays:0,buyDate:null,sellDate:t.toISOString()})}}}const d=l.filter(e=>e.holdingDays<365).reduce((e,t)=>e+t.gain,0),h=l.filter(e=>e.holdingDays>=365).reduce((e,t)=>e+t.gain,0),f=d+h,[p,m]=u.useState(""),[g,v]=u.useState(!1),[y,x]=u.useState(()=>{try{const e=localStorage.getItem("taxRateShort");return e?parseFloat(e):35}catch{return 35}}),[b,w]=u.useState(()=>{try{const e=localStorage.getItem("taxRateLong");return e?parseFloat(e):15}catch{return 15}});u.useEffect(()=>{try{localStorage.setItem("taxRateShort",String(y)),localStorage.setItem("taxRateLong",String(b))}catch(e){}},[y,b]);const N=Array.from(new Set(l.map(e=>new Date(e.sellDate).getFullYear()))).sort((e,t)=>t-e);u.useEffect(()=>{!p&&N.length>0&&m(String(N[0]))},[N]);const k=e=>{const t=(e=>l.filter(t=>new Date(t.sellDate).getFullYear()===Number(e)))(e),n=t.reduce((e,t)=>e+t.sellPrice*t.qty,0),r=t.reduce((e,t)=>e+t.buyPrice*t.qty,0),s=t.filter(e=>e.holdingDays<365).reduce((e,t)=>e+t.gain,0),i=t.filter(e=>e.holdingDays>=365).reduce((e,t)=>e+t.gain,0);return{taxpayer:walletAddress||username||"Unknown",taxYear:e,totalProceeds:n,totalCostBasis:r,totalGain:n-r,shortTerm:s,longTerm:i,entries:t}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-start md:items-center justify-center p-4 overflow-auto",onClick:n,children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-3xl p-4",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Tax Summary"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const e=["sellId","buyId","token","qty","buyPrice","sellPrice","gain","holdingDays","buyDate","sellDate"],t=l.map(t=>e.map(e=>t[e]??"").join(",")),n=[e.join(","),...t].join("\n"),r=new Blob([n],{type:"text/csv"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download="capital_gains.csv",i.click(),URL.revokeObjectURL(s)},className:"px-3 py-1 bg-slate-800 rounded text-sm",children:"Export CSV"}),e.jsx("button",{onClick:n,className:"px-3 py-1 bg-cyan-500 rounded text-sm text-white",children:"Close"})]})]}),0===l.length?e.jsx("div",{className:"p-4 text-slate-400",children:"No buy/sell trades found in your transaction history. Add trades with `action: 'buy'|'sell', quantity, pricePerUnit` to receipts for tax calculation."}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Short-term Gains"}),e.jsxs("div",{className:"font-bold text-white",children:[d.toFixed(4)," BDAG"]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Long-term Gains"}),e.jsxs("div",{className:"font-bold text-white",children:[h.toFixed(4)," BDAG"]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Gain"}),e.jsxs("div",{className:"font-bold text-white",children:[f.toFixed(4)," BDAG"]})]})]}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-slate-400",children:"Tax Year"}),e.jsxs("select",{className:"bg-slate-800/60 text-sm p-1 rounded",value:p,onChange:e=>m(e.target.value),children:[e.jsx("option",{value:"",children:"(All years summary)"}),N.map(t=>e.jsx("option",{value:String(t),children:t},t))]}),e.jsx("button",{className:"ml-auto px-3 py-1 bg-emerald-600 rounded text-sm text-white",onClick:()=>{v(!0),!p&&N.length>0&&m(String(N[0]))},children:"Generate Form"})]}),g&&(()=>{const t=p||String(N[0]||(new Date).getFullYear()),n=k(t);return e.jsxs("div",{className:"bg-slate-800 p-3 rounded mb-3",children:[e.jsxs("h4",{className:"font-bold",children:["Mock Tax Form  ",n.taxYear]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Taxpayer"}),e.jsx("div",{className:"font-semibold",children:n.taxpayer})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Reporting Year"}),e.jsx("div",{className:"font-semibold",children:n.taxYear})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Proceeds"}),e.jsxs("div",{className:"font-semibold",children:[n.totalProceeds.toFixed(4)," BDAG"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Cost Basis"}),e.jsxs("div",{className:"font-semibold",children:[n.totalCostBasis.toFixed(4)," BDAG"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Short-term Gain"}),e.jsxs("div",{className:"font-semibold",children:[n.shortTerm.toFixed(4)," BDAG"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Long-term Gain"}),e.jsxs("div",{className:"font-semibold",children:[n.longTerm.toFixed(4)," BDAG"]})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Short-term tax rate (%)"}),e.jsx("input",{id:"shortRatePct",name:"shortRatePct",type:"number",min:"0",step:"0.1",className:"w-full bg-slate-700 p-1 rounded mt-1 text-sm",value:y,onChange:e=>x(parseFloat(e.target.value||"0"))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Long-term tax rate (%)"}),e.jsx("input",{id:"longRatePct",name:"longRatePct",type:"number",min:"0",step:"0.1",className:"w-full bg-slate-700 p-1 rounded mt-1 text-sm",value:b,onChange:e=>w(parseFloat(e.target.value||"0"))})]}),e.jsxs("div",{className:"bg-slate-900 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Estimated Tax Due"}),e.jsxs("div",{className:"font-bold",children:[(n.shortTerm*(y/100)+n.longTerm*(b/100)).toFixed(4)," BDAG"]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-3",children:[e.jsx("button",{onClick:()=>(e=>{const t=window.open("","_blank","noopener,noreferrer");if(!t)return;const n=`<!doctype html><html><head><meta charset="utf-8"><title>Mock Tax Form</title><style>body{font-family:Arial,Helvetica,sans-serif;background:#0f1724;color:#e6eef8;padding:24px} .card{background:#0b1220;padding:18px;border-radius:8px} h1{font-size:20px} table{width:100%;border-collapse:collapse} td,th{padding:8px;border-bottom:1px solid #1f2937}</style></head><body><div class="card"><h1>Mock Capital Gains Tax Form - ${e.taxYear}</h1><p><strong>Taxpayer:</strong> ${e.taxpayer}</p><table><tr><th>Item</th><th>Value</th></tr><tr><td>Total Proceeds</td><td>${e.totalProceeds.toFixed(4)} BDAG</td></tr><tr><td>Total Cost Basis</td><td>${e.totalCostBasis.toFixed(4)} BDAG</td></tr><tr><td>Total Gain</td><td>${e.totalGain.toFixed(4)} BDAG</td></tr><tr><td>Short-term Gains</td><td>${e.shortTerm.toFixed(4)} BDAG</td></tr><tr><td>Long-term Gains</td><td>${e.longTerm.toFixed(4)} BDAG</td></tr></table><h3>Detail</h3><table><tr><th>Qty</th><th>Buy</th><th>Sell</th><th>Gain</th><th>Holding Days</th></tr>${e.entries.map(e=>`<tr><td>${e.qty}</td><td>${e.buyPrice.toFixed(4)}</td><td>${e.sellPrice.toFixed(4)}</td><td>${e.gain.toFixed(4)}</td><td>${e.holdingDays}</td></tr>`).join("")}</table></div></body></html>`;t.document.write(n),t.document.close(),t.focus(),t.print()})(n),className:"px-3 py-1 bg-blue-600 rounded text-sm text-white",children:"Print Form"}),e.jsx("button",{onClick:()=>(e=>{const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`tax_form_${e.taxYear}.json`,r.click(),URL.revokeObjectURL(n)})(n),className:"px-3 py-1 bg-slate-700 rounded text-sm",children:"Download JSON"})]})]})})(),e.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-slate-700 rounded",children:l.map((t,n)=>e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sm",children:[t.token,"  ",t.qty," units"]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Bought: ",t.buyDate?new Date(t.buyDate).toLocaleDateString():"","  Sold: ",new Date(t.sellDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm",children:["Gain: ",e.jsxs("span",{className:"font-bold",children:[t.gain.toFixed(4)," BDAG"]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Holding: ",t.holdingDays," days"]})]})]},n))})]})]})})},Aw=({isOpen:e,onClose:t,isPremium:n})=>null,Iw=({isOpen:e,onClose:t})=>null,Rw=({isOpen:e,onClose:t,currentLevel:n})=>null,Pw=({isOpen:t,onClose:n,onConfirm:r})=>t?e.jsx("div",{className:"fixed inset-0 z-[210] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-slate-900 border border-amber-500/20 rounded-2xl shadow-2xl max-w-lg w-full p-6 relative overflow-hidden",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 via-transparent to-cyan-500/5 pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-amber-400 font-bold uppercase tracking-[0.2em]",children:"Premium Access"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Unlock the full X Series"}),e.jsx("p",{className:"text-sm text-slate-300",children:"$10/mo or $100/yr (2 months free)"})]}),e.jsx("button",{onClick:n,className:"text-slate-500 hover:text-white",children:e.jsx(uw,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4 relative z-10",children:["Start all in X Series X10","Remote mining software for X30 / X100","Craft Legendary Templates to sell for BDAG","No ads  uninterrupted sessions","Premium leveling rewards (exclusive)","Vote in DAO decisions"].map(t=>e.jsxs("div",{className:"flex items-start gap-2 bg-slate-800/60 border border-white/5 rounded-lg p-3",children:[e.jsx("span",{className:"mt-0.5 text-emerald-400",children:""}),e.jsx("p",{className:"text-sm text-slate-100 leading-tight",children:t})]},t))}),e.jsxs("div",{className:"bg-slate-800/60 border border-amber-500/20 rounded-xl p-4 mb-4 relative z-10",children:[e.jsx("p",{className:"text-sm text-white font-semibold mb-2",children:"Incentives to upgrade"}),e.jsxs("ul",{className:"text-sm text-slate-200 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Annual plan saves $20 vs monthly (effectively 2 free months)."}),e.jsx("li",{children:"Priority access to new firmware, templates, and DAO votes."}),e.jsx("li",{children:"Bonus BDAG drop for Premium streaks and referral boosts."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 relative z-10",children:[e.jsx("button",{onClick:()=>r("monthly"),className:"flex-1 px-4 py-3 rounded-lg bg-cyan-500 hover:bg-cyan-400 text-slate-950 font-bold shadow-lg shadow-cyan-500/30 transition-colors",children:"Activate $10/mo"}),e.jsx("button",{onClick:()=>r("annual"),className:"flex-1 px-4 py-3 rounded-lg bg-amber-500 hover:bg-amber-400 text-slate-950 font-bold shadow-lg shadow-amber-500/30 transition-colors",children:"Activate $100/yr (best value)"})]})]})}):null,Ow=({isOpen:t,onClose:n,isPremium:r})=>t?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-md overflow-hidden animate-fadeIn",onClick:n,children:e.jsxs("div",{className:"relative w-full h-full flex flex-col",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-6 right-6 z-[60] p-2 bg-slate-900/80 rounded-full text-slate-400 hover:text-white hover:bg-cyan-500 transition-all border border-white/10",children:e.jsx(uw,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(rt,{})})]})}):null,Lw=({friends:t,party:n,user:r})=>e.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-4 pb-24 space-y-6",children:[e.jsx("div",{children:e.jsx(yv,{handle:r})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-300 mb-3",children:["Friends (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:t.map(t=>e.jsxs("div",{className:"bg-[var(--bg-panel)] p-2.5 rounded-lg flex items-center justify-between border border-[var(--border-color)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs "+(t.isBlockdagFriend?"bg-indigo-600":"bg-slate-600"),children:t.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-xs text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+("online"===t.status?"bg-green-500":"bg-slate-500")}),e.jsx("span",{className:"text-xs text-slate-400 capitalize",children:t.status})]})]})]}),t.isBlockdagFriend&&e.jsx("div",{className:"bg-indigo-500/20 p-1 rounded",title:"BlockDAG User",children:e.jsx(Eg,{className:"w-3 h-3 text-indigo-400"})})]},t.id))})]})]}),Dw=({user:t,badges:n,tasks:r,friends:s,watchData:a,party:o,onClaimTask:l,onClaimBadge:c,claimedXpInfo:d,onOpenLevelRewards:h,isPremium:f,onActivatePremium:p,onEditProfile:m,onNewProfile:g,onOpenSmartWatch:v,connectedWatch:y,bdagBalance:x,onOpenWallet:b,walletAddress:w,onLogout:N})=>{var k,S,_,E;const[T,j]=u.useState(!1),[C,A]=u.useState(!1),[I,R]=u.useState(!1),[P,O]=u.useState(!1),[L,D]=u.useState(!1),[M,F]=u.useState(t||""),[U,z]=u.useState(""),[B,V]=u.useState(""),[q,H]=u.useState(""),[$,G]=u.useState(null),[W,K]=u.useState(""),[Q,X]=u.useState(null),[Y,J]=u.useState(null);u.useRef(null),u.useRef(null);const[Z,ee]=u.useState(!1),[te,ne]=u.useState(null),[re,se]=u.useState("http://localhost:3001"),[ie,ae]=u.useState(null),[oe,le]=u.useState(!1),[ce,ue]=u.useState(null);u.useEffect(()=>{F(t||"");try{const e=localStorage.getItem(`profileBio:${t}`),n=localStorage.getItem(`profileEmail:${t}`),r=localStorage.getItem(`profileLocation:${t}`);z(e||""),V(n||""),H(r||"")}catch(e){}},[t]);return u.useEffect(()=>{try{const e=localStorage.getItem(`profileAvatarSettings:${t}`);J(e||null)}catch(e){}},[t]),e.jsxs("div",{className:"p-4 md:p-6 animate-fadeIn overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 border border-slate-700 text-cyan-300",children:[e.jsx(Cg,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Wallet"}),w&&e.jsxs("span",{className:"ml-2 text-[10px] font-mono text-green-400",children:[w.slice(0,4),"...",w.slice(-3)]})]})}),e.jsx("div",{className:"flex flex-col items-center gap-4 mb-6 pb-4 border-b border-slate-700/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:justify-between",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[Y&&Y.startsWith("{")?(()=>{try{const t=JSON.parse(Y);return e.jsx(sw,{avatarSettings:t,size:"medium",autoRotate:!0})}catch{return e.jsx("div",{className:"w-20 h-20 bg-slate-700 rounded-full overflow-hidden border-4 border-cyan-500 shadow-lg shadow-cyan-500/20",children:Q?e.jsx("img",{src:Q,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-800 text-slate-500",children:e.jsx(Rg,{className:"w-12 h-12"})})})}})():Y?e.jsx(rw,{modelData:Y,size:"medium",isLoading:!1,onError:e=>{}}):e.jsx("div",{className:"w-20 h-20 bg-slate-700 rounded-full overflow-hidden border-4 border-cyan-500 shadow-lg shadow-cyan-500/20",children:Q?e.jsx("img",{src:Q,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-800 text-slate-500",children:e.jsx(Rg,{className:"w-12 h-12"})})}),C&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>A(!1),children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-xl p-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Edit Profile"}),e.jsxs("div",{className:"mb-4 bg-slate-800/50 p-3 rounded",children:[e.jsx("label",{className:"text-xs text-slate-400 block mb-2",children:"Avatar"}),e.jsxs("div",{className:"flex items-center gap-3",children:[$?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-cyan-500",children:e.jsx("img",{src:$,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-cyan-500 bg-slate-800 flex items-center justify-center",children:e.jsx(Rg,{className:"w-8 h-8 text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{id:"avatarUpload",name:"avatarUpload",type:"file",accept:"image/*",onChange:e=>{try{const t=e.target.files&&e.target.files[0];if(!t)return;const n=new FileReader;n.onload=()=>{const e=n.result;G(e)},n.readAsDataURL(t)}catch(t){}},className:"w-full text-xs"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Upload UE5 exported headshot (PNG/JPG)"})]})]}),$&&e.jsx("button",{onClick:()=>G(null),className:"mt-2 text-xs text-red-400 hover:text-red-300",children:"Remove Avatar"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Display Name"}),e.jsx("input",{id:"editName",name:"editName",type:"text",className:"w-full bg-slate-800/60 p-2 rounded",value:M,onChange:e=>F(e.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Bio"}),e.jsx("textarea",{id:"editBio",name:"editBio",className:"w-full bg-slate-800/60 p-2 rounded h-20 resize-none",value:U,onChange:e=>z(e.target.value),placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Email"}),e.jsx("input",{id:"editEmail",name:"editEmail",type:"email",className:"w-full bg-slate-800/60 p-2 rounded",value:B,onChange:e=>V(e.target.value),placeholder:"your@email.com"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Location"}),e.jsx("input",{id:"editLocation",name:"editLocation",type:"text",className:"w-full bg-slate-800/60 p-2 rounded",value:q,onChange:e=>H(e.target.value),placeholder:"City, Country"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-3 py-1 bg-slate-700 rounded",children:"Cancel"}),e.jsx("button",{onClick:()=>{try{null==m||m(M),localStorage.setItem(`profileBio:${M}`,U),localStorage.setItem(`profileEmail:${M}`,B),localStorage.setItem(`profileLocation:${M}`,q),$&&(localStorage.setItem(`profileAvatar:${M}`,$),X($))}catch(e){}A(!1)},className:"px-3 py-1 bg-cyan-500 text-white rounded",children:"Save"})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>{ue(null),R(!1)},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold mb-1 text-white",children:" Create New Profile"}),e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Enter your profile name to get started"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-300 block mb-2",children:"Profile Name"}),e.jsx("input",{className:"w-full bg-slate-800/60 p-2 rounded text-white placeholder-slate-500",value:W,onChange:e=>K(e.target.value),placeholder:"Enter your profile name"})]}),e.jsx("button",{onClick:()=>D(!0),disabled:!W,className:"w-full px-4 py-2 bg-cyan-500 hover:bg-cyan-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg font-semibold transition-all flex items-center justify-center gap-2 mb-4",children:" Customize Avatar"}),Y&&e.jsx("div",{className:"bg-emerald-500/20 border border-emerald-500/50 rounded p-3 mb-4",children:e.jsx("p",{className:"text-xs text-emerald-300 text-center",children:" Avatar Customized!"})}),ce&&e.jsxs("div",{className:"w-full bg-red-500/20 border border-red-500/50 rounded p-2 text-xs text-red-300 mb-4",children:[" ",ce]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>{ue(null),R(!1)},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all",children:"Cancel"}),e.jsx("button",{onClick:()=>{try{if(null==g||g(W),Y)try{localStorage.setItem(`profileAvatarSettings:${W}`,Y)}catch(e){}}catch(e){}K(""),J(null),ue(null),R(!1)},disabled:!W||!Y,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg font-semibold transition-all",children:"Create Profile"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 overflow-y-auto",children:e.jsx("div",{onClick:e=>e.stopPropagation(),children:e.jsx(lw,{onAvatarCreate:e=>{const t=JSON.stringify(e);J(t),D(!1)},onCancel:()=>D(!1)})})})]}),e.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t}),f&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"PREMIUM"})]}),e.jsxs("p",{className:"text-sm text-slate-400 mb-2",children:["Level ",Math.floor(a.xp/1e3)+1,"  ",e.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.xp," XP"]})]}),e.jsx("div",{className:"w-full max-w-xs mx-auto sm:mx-0 bg-slate-800/50 rounded-full h-2 overflow-hidden border border-slate-700/50",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 h-full rounded-full transition-all duration-1000 ease-out",style:{width:a.xp%1e3/10+"%"}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{j(!1),G(Q),ae(null),A(!0)},className:"text-xs bg-slate-800 hover:bg-slate-700 text-slate-200 border border-slate-700 px-2.5 py-1.5 rounded flex items-center gap-1 whitespace-nowrap",children:[e.jsx(cw,{className:"w-3 h-3"}),"Edit Profile"]}),e.jsx("button",{onClick:()=>{j(!1),ae(null),J(null),ue(null),K(""),D(!0)},className:"text-xs bg-slate-800 hover:bg-slate-700 text-slate-200 border border-slate-700 px-2.5 py-1.5 rounded whitespace-nowrap",children:"New Profile"}),!f&&e.jsx("button",{onClick:p,className:"text-xs bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 border border-amber-500/50 px-2.5 py-1.5 rounded transition-colors whitespace-nowrap",children:"Premium"}),e.jsxs("button",{onClick:v,className:"text-xs flex items-center gap-1.5 px-2.5 py-1.5 rounded border transition-all whitespace-nowrap "+(y?"bg-green-500/10 border-green-500/50 text-green-400":"bg-slate-800 border-slate-700 text-slate-400 hover:text-white"),children:[e.jsx(Nv,{className:"w-3 h-3"}),e.jsx("span",{className:"font-bold",children:y?"Connected":"Watch"})]}),e.jsxs("button",{onClick:()=>O(!0),className:"text-xs bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/50 px-2.5 py-1.5 rounded transition-colors whitespace-nowrap flex items-center gap-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Logout"]})]})]})}),e.jsxs("div",{className:"bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-xl p-3 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nv,{className:"w-4 h-4 text-cyan-400"}),e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-slate-400",children:"How ya feeling?"})]}),e.jsx("span",{className:"text-[11px] text-slate-500",children:"Daily snapshot"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-lg p-2",children:[e.jsxs("p",{className:"text-[11px] text-slate-400 flex items-center gap-1",children:[e.jsx(Nv,{className:"w-3 h-3 text-green-400"}),"Steps"]}),e.jsx("p",{className:"text-base font-mono font-bold text-white leading-tight",children:a.steps.toLocaleString()})]}),e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-lg p-2",children:[e.jsxs("p",{className:"text-[11px] text-slate-400 flex items-center gap-1",children:[e.jsx(Fg,{className:"w-3 h-3 text-blue-400"}),"Sleep"]}),e.jsxs("p",{className:"text-base font-mono font-bold text-white leading-tight",children:[a.sleepScore||0,"%"]})]}),e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-lg p-2",children:[e.jsxs("p",{className:"text-[11px] text-slate-400 flex items-center gap-1",children:[e.jsx(Fg,{className:"w-3 h-3 text-amber-400"}),"Stairs"]}),e.jsx("p",{className:"text-base font-mono font-bold text-white leading-tight",children:(null==(S=null==(k=a.stairs)?void 0:k.toLocaleString)?void 0:S.call(k))||a.stairs||0})]}),e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-lg p-2",children:[e.jsxs("p",{className:"text-[11px] text-slate-400 flex items-center gap-1",children:[e.jsx(Fg,{className:"w-3 h-3 text-red-400"}),"Calories"]}),e.jsx("p",{className:"text-base font-mono font-bold text-white leading-tight",children:(null==(E=null==(_=a.calories)?void 0:_.toLocaleString)?void 0:E.call(_))||a.calories||0})]})]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 via-slate-900/80 to-slate-950 border border-slate-800 rounded-xl p-3 h-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-3.5 h-3.5 text-red-400"}),e.jsx("p",{className:"text-[10px] text-slate-300 font-semibold uppercase tracking-[0.1em]",children:"Vitals"})]})}),e.jsx("div",{className:"space-y-1.5",children:[{label:"Health",valueText:"100/100 HP",percent:100,barClass:"bg-red-500/80",icon:e.jsx(i,{className:"w-3 h-3 text-red-300"})},{label:"Armor",valueText:"0 DEF",percent:0,barClass:"bg-blue-400/80",icon:e.jsx($g,{className:"w-3 h-3 text-blue-300"})},{label:"Speed",valueText:"0% SPD",percent:0,barClass:"bg-yellow-400/80",icon:e.jsx("span",{className:"text-yellow-300 text-[10px] font-bold",children:""})}].map(t=>e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon,e.jsx("span",{className:"font-semibold uppercase",children:t.label})]}),e.jsx("span",{className:"font-mono text-slate-200 text-[8px]",children:t.valueText})]}),e.jsx("div",{className:"h-1.5 rounded-full bg-slate-900/70 border border-slate-800 overflow-hidden",children:e.jsx("div",{className:`${t.barClass} h-full`,style:{width:`${Math.min(100,Math.max(0,t.percent))}%`}})})]},t.label))})]})}),e.jsx("div",{className:"lg:col-span-3",children:Y&&Y.startsWith("{")?(()=>{try{const t=JSON.parse(Y);return e.jsx(iw,{avatarSettings:t,size:"small",autoRotate:!0})}catch{return e.jsx("div",{className:"rounded-lg border-2 border-cyan-500/50 h-96 flex items-center justify-center bg-slate-900/50",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"Avatar not available"})})}})():e.jsx("div",{className:"rounded-lg border-2 border-cyan-500/50 h-96 flex items-center justify-center bg-slate-900/50",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"Create avatar to see preview"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-[var(--bg-panel)]/60 rounded-lg p-3 border border-[var(--border-color)]",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"Gear"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ww,{label:"Head",icon:e.jsx(Ug,{className:"w-5 h-5 text-cyan-300"}),className:"flex-1 min-w-[60px]"}),e.jsx(ww,{label:"Chest",icon:e.jsx(zg,{className:"w-5 h-5 text-purple-300"}),className:"flex-1 min-w-[60px]"}),e.jsx(ww,{label:"Gloves",icon:e.jsx(kv,{className:"w-5 h-5 text-yellow-300"}),className:"flex-1 min-w-[60px]"}),e.jsx(ww,{label:"Legs",icon:e.jsx(Bg,{className:"w-5 h-5 text-blue-300"}),className:"flex-1 min-w-[60px]"}),e.jsx(ww,{label:"Boots",icon:e.jsx(Vg,{className:"w-5 h-5 text-orange-300"}),className:"flex-1 min-w-[60px]"})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-[var(--bg-panel)]/60 rounded-lg p-3 border border-[var(--border-color)]",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"Stats"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-1.5",children:(()=>{const t=(e,t,n)=>e>=n?2:e>=t?1:0,n={STR:t((null==a?void 0:a.stairs)||0,10,20),DEX:t((null==a?void 0:a.steps)||0,5e3,1e4),CON:t((null==a?void 0:a.sleepScore)||0,70,85),INT:(()=>{var e,t;let n=0;return(null==(e=null==r?void 0:r.find(e=>"daily-game-1"===e.id))?void 0:e.isClaimed)&&(n+=1),(null==(t=null==r?void 0:r.find(e=>"daily-game-3"===e.id))?void 0:t.isClaimed)&&(n+=1),n})(),CHA:t((null==a?void 0:a.calories)||0,1500,2e3)};return[{label:"STR",value:0+n.STR,bonus:n.STR,source:"Stairs",metric:`${(null==a?void 0:a.stairs)||0} floors`},{label:"DEX",value:0+n.DEX,bonus:n.DEX,source:"Steps",metric:`${((null==a?void 0:a.steps)||0).toLocaleString()}`},{label:"CON",value:0+n.CON,bonus:n.CON,source:"Sleep",metric:`${(null==a?void 0:a.sleepScore)||0}%`},{label:"INT",value:0+n.INT,bonus:n.INT,source:"Daily Quests",metric:"Games Played"},{label:"WIS",value:0,bonus:0,source:"-"},{label:"CHA",value:0+n.CHA,bonus:n.CHA,source:"Calories",metric:`${(null==a?void 0:a.calories)||0}`}].map(t=>e.jsxs("div",{className:"relative group flex flex-col items-center justify-center gap-0.5 bg-slate-900/60 px-2 py-1.5 rounded border border-slate-700/50 hover:bg-slate-800/80 transition-colors cursor-help",children:[e.jsx("span",{className:"font-bold text-slate-400 text-xs",children:t.label}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("span",{className:"font-mono font-bold text-sm "+(t.bonus>0?"text-green-400":"text-slate-200"),children:t.value}),t.bonus>0&&e.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:["+",t.bonus]})]}),"-"!==t.source&&e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-slate-900 text-white text-xs p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 border border-slate-700",children:[e.jsx("p",{className:"font-bold",children:t.source}),e.jsx("p",{className:"text-slate-400 text-[11px]",children:t.metric}),t.bonus>0?e.jsxs("p",{className:"text-green-400 text-[11px]",children:["+",t.bonus," bonus"]}):e.jsx("p",{className:"text-slate-500 text-[11px]",children:"-"})]})]},t.label))})()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-300",children:"Daily Tasks"}),e.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-1 rounded",children:"4h 12m left"})]}),e.jsx("div",{className:"space-y-2",children:r.map(t=>e.jsx(fw,{task:t,onClaimTask:l,watchData:a,party:o,claimedXpInfo:d},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-300 mb-3",children:"Badges"}),e.jsx(mw,{badges:n,onClaimBadge:c})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4",onClick:()=>O(!1),children:e.jsxs("div",{className:"bg-slate-900 border border-red-500/30 rounded-xl w-full max-w-sm p-6 shadow-2xl",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Confirm Logout"})]}),e.jsx("p",{className:"text-slate-300 mb-6",children:"Are you sure you want to logout? You'll need to sign in again to access your account."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-200 font-semibold rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{O(!1),null==N||N()},className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Logout"]})]})]})})]})};function Mw(){l.useEffect(()=>{(async()=>{window.location.hash&&window.history.replaceState({},document.title,window.location.pathname+window.location.search);const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("state"),r=e.get("error");if(t&&n)try{await Yx.handleOAuthCallback(t,n)?(window.history.replaceState({},document.title,window.location.pathname),alert("Fitbit connected successfully! You can now sync your health data.")):alert("Failed to connect Fitbit. Please try again.")}catch(s){alert("Error connecting to Fitbit. Please try again.")}else r&&alert(`Fitbit connection failed: ${r}`)})()},[]),l.useEffect(()=>{const e=async()=>{if(Yx.isAuthenticated())try{const e=await Yx.getTodayHealthData();e&&de(t=>({...t,steps:e.steps||t.steps,stairs:e.stairs||t.stairs,sleepScore:e.sleepScore||t.sleepScore,calories:e.calories||t.calories}))}catch(e){}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const[i,a]=l.useState(!1),[o,c]=l.useState(null),[u,d]=l.useState(!0),[h,f]=l.useState("Guest"),[p,m]=l.useState("profile"),[g,v]=l.useState(12500),[y,x]=l.useState(null),[b,w]=l.useState(null),[N,k]=l.useState(!1),[S,_]=l.useState(!1),[E,T]=l.useState(!1),[j,C]=l.useState(!1),[A,I]=l.useState(!1),[R,P]=l.useState(!1),[O,L]=l.useState(!1),[D,M]=l.useState(!1),[F,U]=l.useState(!1),[z,B]=l.useState(!1),[V,q]=l.useState(!1),[H,$]=l.useState(!1),[G,W]=l.useState(!1),[K,Q]=l.useState(!1),[X,Y]=l.useState(!1),[J,Z]=l.useState(null),[ee,te]=l.useState(!1),[ne,re]=l.useState(!1),[se,ie]=l.useState(5),[ae,oe]=l.useState(null),[le,ce]=l.useState(null),[ue,de]=l.useState({steps:8500,xp:2450,stairs:12,sleepScore:78,calories:2250,gamesPlayed:0}),[he,fe]=l.useState(["You","Alice","Bob","Charlie"]),[pe,me]=l.useState([{id:"1",name:"Building",quantity:5,icon:e.jsx(Xg,{}),type:"resource"},{id:"2",name:"Equipment",quantity:12,icon:e.jsx(Qg,{}),type:"resource"},{id:"4",name:"Blue Template",quantity:1,icon:e.jsx(wv,{className:"w-10 h-10 text-blue-400"}),type:"template"},{id:"5",name:"Purple Template",quantity:1,icon:e.jsx(wv,{className:"w-10 h-10 text-purple-400"}),type:"template"},{id:"6",name:"Orange Template",quantity:1,icon:e.jsx(wv,{className:"w-10 h-10 text-orange-400"}),type:"template"},{id:"7",name:"Prism",quantity:100,icon:e.jsx(Kg,{}),type:"universal"},{id:"helm-iron-purple",name:"Iron Helm (Purple)",quantity:1,icon:e.jsx(Ug,{}),type:"equipment",rarity:"common"},{id:"chest-plate-purple",name:"Steel Breastplate (Purple)",quantity:1,icon:e.jsx(zg,{}),type:"equipment",rarity:"uncommon"},{id:"gloves-leather-purple",name:"Leather Gloves (Purple)",quantity:1,icon:e.jsx(kv,{}),type:"equipment",rarity:"rare"},{id:"legs-plate-purple",name:"Plate Leggings (Purple)",quantity:1,icon:e.jsx(Bg,{}),type:"equipment",rarity:"epic"},{id:"boots-steel-purple",name:"Steel Boots (Purple)",quantity:1,icon:e.jsx(Vg,{}),type:"equipment",rarity:"legendary"},{id:"helm-iron-orange",name:"Iron Helm (Orange)",quantity:1,icon:e.jsx(Ug,{}),type:"equipment",rarity:"common"},{id:"chest-plate-orange",name:"Steel Breastplate (Orange)",quantity:1,icon:e.jsx(zg,{}),type:"equipment",rarity:"uncommon"},{id:"gloves-leather-orange",name:"Leather Gloves (Orange)",quantity:1,icon:e.jsx(kv,{}),type:"equipment",rarity:"rare"},{id:"legs-plate-orange",name:"Plate Leggings (Orange)",quantity:1,icon:e.jsx(Bg,{}),type:"equipment",rarity:"epic"},{id:"boots-steel-orange",name:"Steel Boots (Orange)",quantity:1,icon:e.jsx(Vg,{}),type:"equipment",rarity:"legendary"}]),[ge,ve]=l.useState([{id:1,name:"Early Adopter",description:"Joined BlockDAG Network in the early phase.",unlocked:!0,icon:e.jsx(Gg,{}),difficulty:"Easy",reward:[{type:"resource",id:"prism",name:"Prism",icon:e.jsx(Kg,{}),quantity:500},{type:"resource",id:"xp",name:"XP",icon:e.jsx(bv,{}),quantity:100}],isClaimed:!0}]),[ye,xe]=l.useState([{id:"daily-login",description:"Log in to the app",type:"daily",difficulty:"Easy",reward:[{type:"resource",id:"iron_ore",name:"Building",icon:e.jsx(Xg,{}),quantity:5}],isComplete:()=>!0,isClaimed:!1},{id:"daily-game-1",description:"Play 1 Game",type:"daily",difficulty:"Easy",reward:[{type:"resource",id:"int_boost_1",name:"+1 INT",icon:e.jsx(dw,{stat:"INT",value:1}),quantity:1}],isComplete:e=>e.gamesPlayed>=1,isClaimed:!1},{id:"daily-game-3",description:"Play 3 Games",type:"daily",difficulty:"Medium",reward:[{type:"resource",id:"int_boost_2",name:"+1 INT",icon:e.jsx(dw,{stat:"INT",value:1}),quantity:1}],isComplete:e=>e.gamesPlayed>=3,isClaimed:!1}]),[be]=l.useState([{id:1,name:"Alice",status:"online",isBlockdagFriend:!0},{id:2,name:"Bob",status:"offline",isBlockdagFriend:!0},{id:3,name:"Charlie",status:"online",isBlockdagFriend:!1},{id:4,name:"Dave",status:"online",isBlockdagFriend:!0},{id:5,name:"Eve",status:"online",isBlockdagFriend:!1}]),[we,Ne]=l.useState(()=>{try{const e=localStorage.getItem("receipts");if(e)return JSON.parse(e)}catch(e){}return[{id:"1",merchant:"Star Coffee",amount:15.5,date:(new Date).toISOString(),items:[]},{id:"2",merchant:"Game Store",amount:59.99,date:new Date(Date.now()-864e5).toISOString(),items:[]}]}),[ke,Se]=l.useState(null);l.useEffect(()=>{const e=(t=e=>{e?(a(!0),c(e.uid)):(a(!1),c(null)),d(!1)},Zt(kg).onAuthStateChanged(t,n,r));var t,n,r;return()=>e()},[]),l.useEffect(()=>{o&&(async()=>{try{const e=Im(),t=await yg(Em(e,"profiles",o));if(t.exists()){const e=t.data().displayName||"Guest";f(e)}else f("Guest")}catch(e){f("Guest")}})()},[o]),l.useEffect(()=>{try{localStorage.setItem("receipts",JSON.stringify(we))}catch(e){}},[we]),l.useEffect(()=>{if(ke){const e=setTimeout(()=>Se(null),2e3);return()=>clearTimeout(e)}},[ke]),l.useEffect(()=>{(async()=>{if(void 0!==window.ethereum)try{const e=await window.ethereum.request({method:"eth_accounts"});e.length>0&&x(e[0])}catch(e){}})(),void 0!==window.ethereum&&window.ethereum.on("accountsChanged",e=>{e.length>0?x(e[0]):x(null)})},[]);const _e=(e,t)=>{c(e),f(t),a(!0)},Ee=async()=>{try{await(e=kg,Zt(e).signOut()),a(!1),c(null),f("Guest")}catch(t){}var e};if(u)return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin text-4xl mb-4",children:""}),e.jsx("p",{className:"text-slate-400",children:"Loading..."})]})});if(!i)return e.jsx(jg,{onLoginSuccess:_e});const Te=e=>{xe(t=>t.map(t=>t.id===e?(t.reward.forEach(t=>{"bdag"===t.id?v(e=>e+t.quantity):"xp"===t.id?(de(e=>({...e,xp:e.xp+t.quantity})),Se({taskId:e,xp:t.quantity})):t.id.startsWith("int_boost")?Se({taskId:e,xp:0}):me(e=>{const n=e.findIndex(e=>e.name===t.name);if(n>=0){const r=[...e];return r[n]={...r[n],quantity:r[n].quantity+t.quantity},r}return[...e,{id:t.id,name:t.name,quantity:t.quantity,icon:t.icon,type:"resource"}]})}),{...t,isClaimed:!0}):t))},je=e=>{ve(t=>t.map(t=>t.id===e?(t.reward.forEach(e=>{"bdag"===e.id&&v(t=>t+e.quantity)}),{...t,isClaimed:!0}):t))},Ce="0x0000000000000000000000000000000000000000",Ae="BDAG",Ie=18,Re="/assets/bdag-token.svg",Pe=async()=>{if(w(null),window.ethereum)try{k(!0);const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0){x(e[0]);await(async()=>{var e,t;try{return!!window.ethereum&&!!(await(null==(t=(e=window.ethereum).request)?void 0:t.call(e,{method:"wallet_watchAsset",params:{type:"ERC20",options:{address:Ce,symbol:Ae,decimals:Ie,image:window.location.origin+Re}}})))}catch(n){return!1}})()}}catch(e){w((null==e?void 0:e.message)||"Failed to connect to wallet")}finally{k(!1)}else w("MetaMask not found. Please install the MetaMask browser extension.")},Oe=()=>{x(null),w(null)},Le=()=>{$(!0)},De=e=>{J&&Z(e?e=>e?{...e,status:"accepted"}:e:null)},Me=()=>{de(e=>({...e,gamesPlayed:(e.gamesPlayed||0)+1})),ce(null)};if("hearts"===le)return e.jsx(t,{onExit:Me});if("trivia"===le)return e.jsx(n,{party:he,onExit:Me});if("sketchit"===le)return e.jsx(r,{onExit:Me});if("uno"===le)return e.jsx(s,{onExit:Me});if("citybldr"===le)return e.jsx(sv,{onClose:Me});return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-white font-sans overflow-hidden",children:[e.jsx("header",{className:"bg-slate-900/80 backdrop-blur-md border-b border-slate-800 p-3 md:p-4 flex items-center justify-between z-10",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>_(!S),className:"flex items-center gap-2 hover:opacity-80 transition-opacity focus:outline-none",children:[e.jsx("div",{className:"w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center border border-cyan-500/50",children:e.jsx(Eg,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("h1",{className:"font-bold text-base md:text-lg tracking-tight",children:["BlockDAG ",e.jsxs("span",{className:"text-cyan-400 font-light",children:["Portal ",e.jsxs("span",{className:"text-red-400",children:["(",4,")"]})]})]})]}),S&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden animate-fadeIn",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left text-slate-200 hover:bg-slate-700 transition-colors flex justify-between items-center group",onClick:()=>{_(!1),B(!0)},children:[e.jsx("span",{className:"font-semibold",children:"DAO"}),e.jsx("span",{className:"bg-red-500/20 text-red-400 text-xs font-bold px-2 py-0.5 rounded-full border border-red-500/30 group-hover:bg-red-500/30",children:4})]}),e.jsx("div",{className:"border-t border-slate-700"}),e.jsx("button",{className:"w-full px-4 py-3 text-left text-red-400 hover:bg-red-500/10 transition-colors font-semibold",onClick:()=>{_(!1),Ee()},children:" Logout"})]})]})}),e.jsx("main",{className:"flex-grow overflow-y-auto pb-20 scrollbar-hide",children:e.jsxs("div",{className:"max-w-full w-full px-4 sm:px-6 md:max-w-4xl mx-auto",children:[J&&e.jsxs("div",{className:"mb-4 bg-slate-900/80 border border-emerald-500/30 rounded-xl p-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-white font-semibold",children:["5 BDAG Wager  ",J.game]}),"accepted"===J.status?e.jsxs("p",{className:"text-xs text-emerald-300",children:["Locked in with ",J.to,". Good luck!"]}):"self"===J.initiator?e.jsxs("p",{className:"text-xs text-slate-300",children:["Waiting for ",J.to," to accept."]}):e.jsxs("p",{className:"text-xs text-slate-300",children:[J.from," challenged you to a 5 BDAG wager."]})]}),e.jsxs("div",{className:"flex gap-2",children:["pending"===J.status&&"friend"===J.initiator&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>De(!0),className:"px-3 py-1.5 text-xs font-bold bg-emerald-600 text-white rounded hover:bg-emerald-500",children:"Accept"}),e.jsx("button",{onClick:()=>De(!1),className:"px-3 py-1.5 text-xs font-bold bg-slate-800 text-slate-300 rounded border border-slate-700 hover:bg-slate-700",children:"Decline"})]}),"pending"===J.status&&"self"===J.initiator&&e.jsx("button",{onClick:()=>Z(null),className:"px-3 py-1.5 text-xs font-bold bg-slate-800 text-slate-300 rounded border border-slate-700 hover:bg-slate-700",children:"Cancel"}),"accepted"===J.status&&e.jsx("button",{onClick:()=>Z(null),className:"px-3 py-1.5 text-xs font-bold bg-slate-800 text-slate-300 rounded border border-slate-700 hover:bg-slate-700",children:"Dismiss"})]})]}),(()=>{switch(p){case"wallet":return e.jsx(vw,{bdagBalance:g,onOpenTransactions:()=>C(!0),onOpenTaxes:()=>I(!0),onOpenTapToPay:()=>P(!0),walletAddress:y,onConnectWallet:Pe,onDisconnectWallet:Oe,walletError:b,isConnectingWallet:N,onBack:()=>m("profile")});case"apps":return e.jsx(yw,{onOpenRaffle:()=>M(!0),onOpenMining:()=>L(!0)});case"games":return e.jsx(xw,{onOpenCastModal:()=>{},onOpenGroupModal:()=>Q(!0),onOpenJoustingModal:()=>U(!0),onOpenHeartsGame:()=>ce("hearts"),onOpenTriviaGame:()=>ce("trivia"),onOpenFamilyPack:()=>Y(!0),onOpenCityBldr:()=>te(!0)});case"profile":return e.jsx(Dw,{user:h,badges:ge,tasks:ye,friends:be,watchData:ue,party:he,onClaimTask:Te,onClaimBadge:je,claimedXpInfo:ke,onOpenLevelRewards:()=>q(!0),isPremium:E,onActivatePremium:Le,onEditProfile:e=>f(e),onNewProfile:e=>f(e),onOpenSmartWatch:()=>W(!0),connectedWatch:ae,bdagBalance:g,onOpenWallet:()=>m("wallet"),walletAddress:y,onLogout:Ee});case"friends":return e.jsx(Lw,{friends:be,party:he,user:h});case"sponsors":return e.jsx(bw,{});case"inventory":return e.jsx(Nw,{inventory:pe,onEquip:()=>{},onOpenSmartWatch:()=>W(!0),connectedWatch:ae,watchData:ue,tasks:ye,onOpenCraft:()=>re(!0)});default:return e.jsx("div",{className:"p-6 text-center",children:"Coming Soon"})}})()]})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-lg border-t border-slate-800 pb-safe z-20",children:e.jsxs("div",{className:"flex justify-around items-center max-w-2xl mx-auto",children:[e.jsx(gw,{icon:e.jsx(Rg,{className:"w-6 h-6"}),label:"Profile",isActive:"profile"===p,onClick:()=>m("profile"),activeColor:"text-blue-400"}),e.jsx(gw,{icon:e.jsx(Ag,{className:"w-6 h-6"}),label:"Apps",isActive:"apps"===p,onClick:()=>m("apps"),activeColor:"text-purple-400"}),e.jsx(gw,{icon:e.jsx(Sv,{className:"w-6 h-6"}),label:"Friends",isActive:"friends"===p,onClick:()=>m("friends"),activeColor:"text-pink-400"}),e.jsx(gw,{icon:e.jsx(Ig,{className:"w-6 h-6"}),label:"Games",isActive:"games"===p,onClick:()=>m("games"),activeColor:"text-orange-400"}),e.jsx(gw,{icon:e.jsx(Mg,{className:"w-6 h-6"}),label:"Inventory",isActive:"inventory"===p,onClick:()=>m("inventory"),activeColor:"text-teal-400"}),e.jsx(gw,{icon:e.jsx(Pg,{className:"w-6 h-6"}),label:"Partners",isActive:"sponsors"===p,onClick:()=>m("sponsors"),activeColor:"text-yellow-400"})]})}),e.jsx(jw,{isOpen:j,onClose:()=>C(!1),receipts:we}),e.jsx(Cw,{isOpen:A,onClose:()=>I(!1),receipts:we,balance:g}),e.jsx(Tw,{isOpen:R,onClose:()=>P(!1),onPayment:async(e,t)=>{v(t=>t-e),Ne(n=>[{id:Date.now().toString(),merchant:t,amount:e,date:(new Date).toISOString(),items:[]},...n])},walletAddress:y,onConnectWallet:Pe,sendBdag:async(e,t)=>{if(!window.ethereum)throw new Error("No wallet available");throw new Error("BDAG token address not configured")}}),e.jsx(Ow,{isOpen:O,onClose:()=>L(!1),isPremium:E}),e.jsx(sb,{isOpen:D,onClose:()=>M(!1),userBdagBalance:g,setUserBdagBalance:v}),e.jsx(Iw,{isOpen:F,onClose:()=>U(!1)}),e.jsx(Aw,{isOpen:z,onClose:()=>B(!1),isPremium:E}),e.jsx(Rw,{isOpen:V,onClose:()=>q(!1),currentLevel:Math.floor(ue.xp/1e3)+1}),e.jsx(Pw,{isOpen:H,onClose:()=>$(!1),onConfirm:e=>{T(!0),$(!1);const t="annual"===e?"Annual: save 2 months + priority feature access.":"Monthly: cancel anytime.";try{null==alert||alert(`Premium Unlocked\n${"annual"===e?"$100/yr":"$10/mo"}  ${t}`)}catch{}}}),e.jsx(kw,{isOpen:G,onClose:()=>W(!1),connectedWatch:ae,onConnect:async e=>{oe(e),W(!1);try{const{fetchSmartWatchData:t,setupSmartWatchSync:n}=await wt(async()=>{const{fetchSmartWatchData:e,setupSmartWatchSync:t}=await import("./bluetoothService-1Mt-vXAx.js");return{fetchSmartWatchData:e,setupSmartWatchSync:t}},[]),r=await t(e);r&&de(e=>({...e,steps:r.steps||e.steps,stairs:r.stairs||e.stairs,sleepScore:r.sleepScore||e.sleepScore,calories:r.calories||e.calories}));const s=n(e,e=>{de(t=>({...t,steps:e.steps||t.steps,stairs:e.stairs||t.stairs,sleepScore:e.sleepScore||t.sleepScore,calories:e.calories||t.calories}))});window.__watchSyncCleanup=s}catch(t){}},onDisconnect:()=>{window.__watchSyncCleanup&&(window.__watchSyncCleanup(),window.__watchSyncCleanup=null),oe(null)}}),e.jsx(Sw,{isOpen:ne,onClose:()=>re(!1),inventory:pe}),e.jsx(_w,{isOpen:K,onClose:()=>Q(!1),party:he,friends:be,onInvite:e=>{he.length<5&&!he.includes(e)&&fe(t=>[...t,e])},onKick:e=>{fe(t=>t.filter(t=>t!==e))}}),e.jsx(Ew,{isOpen:X,onClose:()=>Y(!1),onPlayGame:e=>{"sketchit"===e?(Y(!1),ce("sketchit")):"uno"===e&&(Y(!1),ce("uno"))},party:he,friends:be,onProposeWager:(e,t)=>{he.includes(e)&&be.find(t=>t.name===e)?Z({game:t,from:h,to:e,amount:5,status:"pending",initiator:"self"}):alert("You can only wager with friends who are in your group.")}}),e.jsx(nv,{isOpen:ee,onClose:()=>te(!1),onLaunch:()=>ce("citybldr")})]})}const Fw=document.getElementById("root");if(!Fw)throw new Error("Could not find root element to mount to");xt.createRoot(Fw).render(e.jsx(u.StrictMode,{children:e.jsx(Mw,{})}));
